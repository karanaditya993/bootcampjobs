(function(){var t=[].slice;define("config/rollbar",["module"],function(e){var n,i,r,o;return n=window[(null!=(r=window._rollbarConfig)?r.globalAlias:void 0)||"Rollbar"],n.wrapWithStack=function(i){return e.config().fix_webkit_wrapped_stack&&"WebkitAppearance"in document.documentElement.style?function(){var e,n;e=1<=arguments.length?t.call(arguments,0):[];try{return i.apply(this,e)}catch(r){throw n=r,n.stack}}:n.wrap(i)},o=function(e){var i;return i=window[e],window[e]=function(){var e;return e=1<=arguments.length?t.call(arguments,0):[],"function"==typeof e[0]&&(e[0]=n.wrapWithStack(e[0])),i.apply?i.apply(this,e):i(e[0],e[1])}},o("setTimeout"),o("setInterval"),i=window.requirejs.onError,window.requirejs.onError=n.wrapWithStack(function(t){var e,n,r,o;return"error"===(null!=(e=t.originalError)?e.type:void 0)&&"SCRIPT"===(null!=(n=t.originalError)&&null!=(r=n.target)&&null!=(o=r.tagName)?o.toUpperCase():void 0)&&(t.rollbarIgnore=!0),i(t)}),n})}).call(this),function(){var t=[].slice;define("config/jquery",["jquery","rollbar","underscore","jquery-ui"],function(e,n,i){var r,o,s,a;return a=function(e){return function(){var r,o,s,a;r=1<=arguments.length?t.call(arguments,0):[];try{return e.apply(this,r)}catch(l){throw s=l,a=r[0].currentTarget,o=i.filter((a.className||"").split(" "),function(t){return t.length>0}),n.error(s,"Error in jQuery event handler",{eventType:r[0].type,selector:""+a.tagName+(o.length>0?"."+o.join("."):"")+(a.id?"#"+a.id:"")}),s}}},o=e.event.add,e.event.add=function(t,n,i,r,s){var l;return i&&i.handler?(l=i.handler,i.handler=a(i.handler,t,n)):(l=i,i=a(i,t,n)),i.guid=l.guid?l.guid:l.guid=e.guid++,o.call(this,t,n,i,r,s)},s=e.fn.ready,e.fn.ready=function(t){return s.call(this,n.wrapWithStack(t))},r=e.ajax,e.ajax=function(t,i){var o,s,a,l;for(a=["complete","error","success"],"object"==typeof t&&(i=t,t=void 0),i||(i={}),o=0,l=a.length;l>o;o++)s=a[o],e.isFunction(i[s])&&(i[s]=n.wrapWithStack(i[s]));return r.call(this,t,i)},e.ajaxPrefilter(function(t,n,i){var r;return"GET"!==t.type.toUpperCase()&&(r=e('meta[name="csrf-token"]').attr("content"),r&&i.setRequestHeader("X-CSRF-Token",r)),!0}),e})}.call(this),function(){var t=[].slice;define("google/analytics",[],function(){return null!=window._gaq?{push:function(){var e,n;return e=1<=arguments.length?t.call(arguments,0):[],null!=(n=window._gaq)?n.push.apply(window._gaq,e):void 0}}:[]})}.call(this),function(){var t=[].slice;define("config/backbone",["backbone","google/analytics"],function(e,n){var i;if(i=e.History.prototype.navigate,e.History.prototype.navigate=function(){var r,o;return r=1<=arguments.length?t.call(arguments,0):[],o=i.apply(this,r),e.History.started&&e.history._hasPushState&&n.push(["_trackPageview",""+e.history.root+e.history.getFragment()]),o},e.History.started)throw new Error("History already started");return e.history=new e.History,e})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("models/repository",["backbone","underscore"],function(n,i){var r;return r={},{get:function(o){var s;if(!i.isFunction(o))throw new Error("Must provide a class");return r[o]||(s=function(n){function r(){return this.bootstrap=t(this.bootstrap,this),r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.model=o,r.prototype.bootstrap=function(t,e){var n,r;if(null==e&&(e={}),null==t)throw new Error("Must pass an object, array of objects, or ID");if(i.isArray(t))return i.map(t,function(t){return function(n){return t.bootstrap(n,e)}}(this));if(i.defaults(e,{merge:!0}),n=o.prototype.idAttribute,i.isObject(t)){if(null==t[n])throw new Error("Can only bootstrap models which exist on the server")}else r={},r[n]=t,t=r;return this.add(t,e),this.get(t[n])},r}(n.Collection),r[o]=new s),r[o]}}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("models/base",["backbone","underscore"],function(n,i){var r;return r=function(n){function r(){return this.toSyncData=t(this.toSyncData,this),r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.parse=function(t){var e;return e=i.result(this,"prefix"),null!=t&&null!=t[e]?t[e]:t},r.prototype.sync=function(t,e,n){var o;return n=i.clone(n),this.trigger("presync",t,e,n),null==n.data&&(o=e.toSyncData(n.attrs||e.toJSON(n),t,n),null!=o&&("create"===t||"update"===t||"patch"===t||"delete"===t?(n.contentType||(n.contentType="application/json"),n.data=JSON.stringify(o)):n.data=o)),"patch"===t&&(t="update"),r.__super__.sync.call(this,t,e,n)},r.prototype.toSyncData=function(t,e,n){var r,o;return o=i.result(this,"prefix"),r=i.extend({},n.parameters),("create"===e||"update"===e||"patch"===e)&&(r[o]||(r[o]=t)),i.isEmpty(r)&&(r=null),r},r}(n.Model),function(t){var n;return n=t.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase(),function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.toString=function(){return t},r.prototype.urlRoot="/"+n+"s",r.prototype.prefix=function(){return n},r}(r)}})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/user",["models/base","models/repository","lib/autocomplete"],function(e,n,i){var r;return r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.urlRoot="/profiles",n.prototype.toSyncData=function(t,e,i){return i.parameters||(i.parameters={}),i.parameters.use_status_codes=1,n.__super__.toSyncData.apply(this,arguments)},n.prototype.autocomplete_parameters=function(){return{tag_type:"PeopleTag"}},n.prototype.set_autocomplete_data=function(t){return this.set({id:t.tag.follower_id,name:t.tag.name,slug_url:t.tag.slug_url,avatar:t.tag.pic})},n.prototype.autocomplete=function(t){return new i(t,{selectCallback:function(t){return function(e){return t.set({id:e.id,name:e.name,slug_url:e.item.slug_url,avatar:e.item.pic}),t.trigger("autocomplete",e)}}(this),queryOptions:{tag_type:"PeopleTag"},tags:!0})},n}(e("User"))})}.call(this),function(){define("lib/environment",["module","models/repository","models/user"],function(t,e,n){var i;return i=t.config().environment,{controller:t.config().controller,action:t.config().action,isDevelopment:function(){return"development"===i},isProduction:function(){return"production"===i},env:i,currentUser:function(){var i;return(i=t.config().current_user)?e.get(n).bootstrap(i):void 0}}})}.call(this),function(){var t=[].slice;define("lib/promises",[],function(){return{mimicPromise:function(e,n){return e.done(function(){var e;return e=1<=arguments.length?t.call(arguments,0):[],n.resolveWith(this,e)}),e.fail(function(){var e;return e=1<=arguments.length?t.call(arguments,0):[],n.rejectWith(this,e)}),e.progress(function(){var e;return e=1<=arguments.length?t.call(arguments,0):[],n.notifyWith(this,e)})}}})}.call(this),function(){define("initializer",["module","jquery","rollbar","lib/environment","lib/promises"],function(t,e,n,i,r){var o,s,a,l;return l=0,s={},a={},require(["underscore"],function(){}),o=function(){function o(){var t;t=l++,this._initializedDataKey="initializer_initialized_"+t,this._deferredDataKey="initializer_deferred_"+t}return o.instance=function(){return this._instance||(this._instance=new o)},o.promiseFor=function(t){return this.instance().promiseFor(t)},o["with"]=function(t,n){return e(t).each(function(){return o.instance().promiseFor(this).done(n)})},o.prototype.selector=function(){return"."+t.config().root_class+"."+t.config().javascript_module_exists_class},o.prototype.initializerFor=function(r){var o,l,u,c,p,d;return u=e(r).data(t.config().template_name_data_key),null==u?(c=e(r)[0].tagName,"body"!==(null!=c?c.toLowerCase():void 0)&&(d="Could not get template name for "+e(r)[0].tagName+"."+(e(r).attr("class")||"").split(" ").join("."),i.isDevelopment()&&("undefined"!=typeof console&&null!==console&&console.warn(d),"undefined"!=typeof console&&null!==console&&console.warn(r)),n.warn(d)),function(){}):(p=u.split("/"),l=p.pop(),o=p.join("/"),null==s[o]&&(s[o]=e.Deferred(),require(["controllers/"+o],function(t){return s[o].resolve(t)})),a[u]||(a[u]=e.Deferred(),s[o].done(function(t){return a[u].resolve("function"==typeof t[l]?t[l]:void 0)})),a[u])},o.prototype._deferred=function(t){var n;if(n=e(t),1!==n.length)throw new Error("Single element expected");if(!n.is(this.selector()))throw new Error("Partial root expected (got "+n[0].tagName+"."+(n.attr("class")||"").split(" ").join(".")+")");return null==n.data(this._deferredDataKey)&&n.data(this._deferredDataKey,e.Deferred()),n.data(this._deferredDataKey)},o.prototype.promiseFor=function(t){return this._deferred(t).promise()},o.prototype.scan=function(){var n;return n=this,e(this.selector()).filter(function(){return!e(this).data(n._initializedDataKey)}).each(function(){var o;return o=e(this),function(o){return function(s){var a;return a=function(n,r){var o;return null==r&&(r=s),o=e(r).find(n),i.isDevelopment()&&o.each(function(){var i,r;return i=e(this).closest("."+t.config().root_class),e(this).hasClass(t.config().root_class)||null!=i[0]&&i[0]===s[0]?!0:(r=i.data(t.config().template_name_data_key),"undefined"!=typeof console&&null!==console&&(console.warn("Unauthorized access (using $$) from "+s.data(t.config().template_name_data_key)+" to "+r+". Accessor:"),console.warn(s[0]),console.warn("Accessing:"),console.warn(this),console.warn("Selector:"),console.warn(n)),!1)}),o},s.data(n._initializedDataKey,!0),e.when(n.initializerFor(s)).done(function(t){return r.mimicPromise(e.when(null!=t?t.call(o,a,s):void 0),n._deferred(s))})}}(this)(o)}),this},o.prototype._handleMutation=function(t,n){var i,r,o,s,a,l;for(o=this,i=!1,l=[],r=0,s=t.length;s>r;r++){if(a=t[r],e(a.addedNodes).each(function(){return e(this).is(o.selector())||e(this).find(o.selector()).length>0?(i=!0,!1):!0}),i){n();break}l.push(void 0)}return l},o.prototype.listen=function(r){if(null==r&&(r={}),this._listening)throw new Error("Already listening");return this._listening=!0,require(["underscore"],function(o){return function(s){var a;return r=s.defaults(r,{forcePoll:!1,pollInterval:2e3,pollDelay:100,throttleWait:200}),a=s.throttle(function(){return o.scan()},r.throttleWait),r.forcePoll||null==window.MutationObserver&&null==window.WebKitMutationObserver?(o._pollHandler=function(){return s.delay(a,r.pollDelay)},e(document).ajaxComplete(o._pollHandler),o._pollHandler.intervalId=setInterval(o._pollHandler,r.pollInterval)):(o._observer=new(window.MutationObserver||window.WebKitMutationObserver)(function(t){return o._handleMutation(t,a)}),o._observer.observe(e("body")[0],{childList:!0,subtree:!0})),a(),o._debugIntervalId=setInterval(function(){var r;return r=o,e(o.selector()).each(function(){return e(this).data(r._initializedDataKey)?void 0:s.delay(function(o){return function(){var s;return e(o).data(r._initializedDataKey)||!e.contains(document.documentElement,o)||e(o).data("initializer_already_warned")?void 0:(e(o).data("initializer_already_warned",!0),s="Uninitialized template in DOM: "+e(o).data(t.config().template_name_data_key)+" ("+o.tagName+"."+(e(o).attr("class")||"").split(" ").join(".")+")",i.isDevelopment()&&("undefined"!=typeof console&&null!==console&&console.warn(s),"undefined"!=typeof console&&null!==console&&console.warn(o)),n.warn(s))}}(this),2e3)})},5e3)}}(this)),this},o.prototype.stopListening=function(){var t;return null!=(t=this._observer)&&t.disconnect(),this._observer=null,null!=this._pollHandler&&(e(document).off("ajaxComplete",this._pollHandler),clearInterval(this._pollHandler.intervalId),this._pollHandler=null),null!=this._debugIntervalId?clearInterval(this._debugIntervalId):void 0},o.prototype.makeInitializable=function(n,i){return e(n).addClass(t.config().javascript_module_exists_class).data(t.config().template_name_data_key,i)},o}()})}.call(this),function(t){define("jquery.autosize",["jquery"],function(){return function(){return!function(t){var e,n={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},i='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',r=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","whiteSpace"],o=t(i).data("autosize",!0)[0];o.style.lineHeight="99px","99px"===t(o).css("lineHeight")&&r.push("lineHeight"),o.style.lineHeight="",t.fn.autosize=function(i){return this.length?(i=t.extend({},n,i||{}),o.parentNode!==document.body&&t(document.body).append(o),this.each(function(){function n(){var e,n=window.getComputedStyle?window.getComputedStyle(d,null):null;n?(e=parseFloat(n.width),("border-box"===n.boxSizing||"border-box"===n.webkitBoxSizing||"border-box"===n.mozBoxSizing)&&t.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(t,i){e-=parseFloat(n[i])})):e=h.width(),o.style.width=Math.max(e,0)+"px"}function s(){var s={};if(e=d,o.className=i.className,o.id=i.id,u=parseFloat(h.css("maxHeight")),t.each(r,function(t,e){s[e]=h.css(e)}),t(o).css(s).attr("wrap",h.attr("wrap")),n(),window.chrome){var a=d.style.width;d.style.width="0px",d.offsetWidth,d.style.width=a}}function a(){var t,r;e!==d?s():n(),o.value=!d.value&&i.placeholder?h.attr("placeholder")||"":d.value,o.value+=i.append||"",o.style.overflowY=d.style.overflowY,r=parseFloat(d.style.height)||0,o.scrollTop=0,o.scrollTop=9e4,t=o.scrollTop,u&&t>u?(d.style.overflowY="scroll",t=u):(d.style.overflowY="hidden",c>t&&(t=c)),t+=f,Math.abs(r-t)>.01&&(d.style.height=t+"px",o.className=o.className,m&&i.callback.call(d,d),h.trigger("autosize.resized"))}function l(){clearTimeout(p),p=setTimeout(function(){var t=h.width();t!==_&&(_=t,a())},parseInt(i.resizeDelay,10))}var u,c,p,d=this,h=t(d),f=0,m=t.isFunction(i.callback),g={height:d.style.height,overflow:d.style.overflow,overflowY:d.style.overflowY,wordWrap:d.style.wordWrap,resize:d.style.resize},_=h.width(),v=h.css("resize");h.data("autosize")||(h.data("autosize",!0),("border-box"===h.css("box-sizing")||"border-box"===h.css("-moz-box-sizing")||"border-box"===h.css("-webkit-box-sizing"))&&(f=h.outerHeight()-h.height()),c=Math.max(parseFloat(h.css("minHeight"))-f||0,h.height()),h.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"}),"vertical"===v?h.css("resize","none"):"both"===v&&h.css("resize","horizontal"),"onpropertychange"in d?"oninput"in d?h.on("input.autosize keyup.autosize",a):h.on("propertychange.autosize",function(){"value"===event.propertyName&&a()}):h.on("input.autosize",a),i.resizeDelay!==!1&&t(window).on("resize.autosize",l),h.on("autosize.resize",a),h.on("autosize.resizeIncludeStyle",function(){e=null,a()}),h.on("autosize.destroy",function(){e=null,clearTimeout(p),t(window).off("resize",l),h.off("autosize").off(".autosize").css(g).removeData("autosize")}),a())})):this}}(jQuery||$),jQuery.fn.autosize}.apply(t,arguments)})}(this),function(){define("global/autosize",["jquery","jquery.autosize"],function(t){return{init:function(){return t(document).on("focus","textarea",function(){return t(this).is(".autogrow")?t(this).autosize():void 0})}}})}.call(this),function(){define("global/event_queue",["require"],function(t){return{init:function(){if(null==window._eventQueueClear)throw new Error("Expected _eventQueueClear to be initialized in the document head");return window._eventQueueClear(t)}}})}.call(this),define("require-css/css!facybox/facybox",[],function(){}),define("require-css/css!coffeescripts/plugins/facybox",[],function(){}),function(){define("global/facybox",["jquery","css!facybox/facybox","css!coffeescripts/plugins/facybox"],function(){return{init:function(){}}})}.call(this),!function(t){"function"==typeof define&&define.amd?define("jquery.form",["jquery"],t):t("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(t){function e(e){var n=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(n))}function n(e){var n=e.target,i=t(n);if(!i.is("[type=submit],[type=image]")){var r=i.closest("[type=submit]");if(0===r.length)return;n=r[0]}var o=this;if(o.clk=n,"image"==n.type)if(void 0!==e.offsetX)o.clk_x=e.offsetX,o.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var s=i.offset();o.clk_x=e.pageX-s.left,o.clk_y=e.pageY-s.top}else o.clk_x=e.pageX-n.offsetLeft,o.clk_y=e.pageY-n.offsetTop;setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function i(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var r={};r.fileapi=void 0!==t("<input type='file'/>").get(0).files,r.formdata=void 0!==window.FormData;var o=!!t.fn.prop;t.fn.attr2=function(){if(!o)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e){function n(n){var i,r,o=t.param(n,e.traditional).split("&"),s=o.length,a=[];for(i=0;s>i;i++)o[i]=o[i].replace(/\+/g," "),r=o[i].split("="),a.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return a}function s(i){for(var r=new FormData,o=0;o<i.length;o++)r.append(i[o].name,i[o].value);if(e.extraData){var s=n(e.extraData);for(o=0;o<s.length;o++)s[o]&&r.append(s[o][0],s[o][1])}e.data=null;var a=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});e.uploadProgress&&(a.xhr=function(){var n=t.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",function(t){var n=0,i=t.loaded||t.position,r=t.total;t.lengthComputable&&(n=Math.ceil(i/r*100)),e.uploadProgress(t,i,r,n)},!1),n}),a.data=null;var u=a.beforeSend;return a.beforeSend=function(t,n){n.data=e.formData?e.formData:r,u&&u.call(this,t,n)},t.ajax(a)}function a(n){function r(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(n){i("cannot get iframe.contentWindow document: "+n)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(n){i("cannot get iframe.contentDocument: "+n),e=t.document}return e}function s(){function e(){try{var t=r(_).readyState;i("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(n){i("Server abort: ",n," (",n.name,")"),a(T),x&&clearTimeout(x),x=void 0}}var n=p.attr2("target"),o=p.attr2("action"),s="multipart/form-data",u=p.attr("enctype")||p.attr("encoding")||s;k.setAttribute("target",f),(!l||/post/i.test(l))&&k.setAttribute("method","POST"),o!=d.url&&k.setAttribute("action",d.url),d.skipEncodingOverride||l&&!/post/i.test(l)||p.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(x=setTimeout(function(){w=!0,a($)},d.timeout));var c=[];try{if(d.extraData)for(var h in d.extraData)d.extraData.hasOwnProperty(h)&&c.push(t.isPlainObject(d.extraData[h])&&d.extraData[h].hasOwnProperty("name")&&d.extraData[h].hasOwnProperty("value")?t('<input type="hidden" name="'+d.extraData[h].name+'">').val(d.extraData[h].value).appendTo(k)[0]:t('<input type="hidden" name="'+h+'">').val(d.extraData[h]).appendTo(k)[0]);d.iframeTarget||g.appendTo("body"),_.attachEvent?_.attachEvent("onload",a):_.addEventListener("load",a,!1),setTimeout(e,15);try{k.submit()}catch(m){var v=document.createElement("form").submit;v.apply(k)}}finally{k.setAttribute("action",o),k.setAttribute("enctype",u),n?k.setAttribute("target",n):p.removeAttr("target"),t(c).remove()}}function a(e){if(!v.aborted&&!E){if(S=r(_),S||(i("cannot access response document"),e=T),e===$&&v)return v.abort("timeout"),void C.reject(v,"timeout");if(e==T&&v)return v.abort("server abort"),void C.reject(v,"error","server abort");if(S&&S.location.href!=d.iframeSrc||w){_.detachEvent?_.detachEvent("onload",a):_.removeEventListener("load",a,!1);var n,o="success";try{if(w)throw"timeout";var s="xml"==d.dataType||S.XMLDocument||t.isXMLDoc(S);if(i("isXml="+s),!s&&window.opera&&(null===S.body||!S.body.innerHTML)&&--z)return i("requeing onLoad callback, DOM not available"),void setTimeout(a,250);var l=S.body?S.body:S.documentElement;v.responseText=l?l.innerHTML:null,v.responseXML=S.XMLDocument?S.XMLDocument:S,s&&(d.dataType="xml"),v.getResponseHeader=function(t){var e={"content-type":d.dataType};return e[t.toLowerCase()]},l&&(v.status=Number(l.getAttribute("status"))||v.status,v.statusText=l.getAttribute("statusText")||v.statusText);var u=(d.dataType||"").toLowerCase(),c=/(json|script|text)/.test(u);if(c||d.textarea){var p=S.getElementsByTagName("textarea")[0];if(p)v.responseText=p.value,v.status=Number(p.getAttribute("status"))||v.status,v.statusText=p.getAttribute("statusText")||v.statusText;else if(c){var f=S.getElementsByTagName("pre")[0],m=S.getElementsByTagName("body")[0];f?v.responseText=f.textContent?f.textContent:f.innerText:m&&(v.responseText=m.textContent?m.textContent:m.innerText)}}else"xml"==u&&!v.responseXML&&v.responseText&&(v.responseXML=I(v.responseText));try{j=D(v,u,d)}catch(y){o="parsererror",v.error=n=y||o}}catch(y){i("error caught: ",y),o="error",v.error=n=y||o}v.aborted&&(i("upload aborted"),o=null),v.status&&(o=v.status>=200&&v.status<300||304===v.status?"success":"error"),"success"===o?(d.success&&d.success.call(d.context,j,"success",v),C.resolve(v.responseText,"success",v),h&&t.event.trigger("ajaxSuccess",[v,d])):o&&(void 0===n&&(n=v.statusText),d.error&&d.error.call(d.context,v,o,n),C.reject(v,"error",n),h&&t.event.trigger("ajaxError",[v,d,n])),h&&t.event.trigger("ajaxComplete",[v,d]),h&&!--t.active&&t.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,v,o),E=!0,d.timeout&&clearTimeout(x),setTimeout(function(){d.iframeTarget?g.attr("src",d.iframeSrc):g.remove(),v.responseXML=null},100)}}}var u,c,d,h,f,g,_,v,y,b,w,x,k=p[0],C=t.Deferred();if(C.abort=function(t){v.abort(t)},n)for(c=0;c<m.length;c++)u=t(m[c]),o?u.prop("disabled",!1):u.removeAttr("disabled");if(d=t.extend(!0,{},t.ajaxSettings,e),d.context=d.context||d,f="jqFormIO"+(new Date).getTime(),d.iframeTarget?(g=t(d.iframeTarget),b=g.attr2("name"),b?f=b:g.attr2("name",f)):(g=t('<iframe name="'+f+'" src="'+d.iframeSrc+'" />'),g.css({position:"absolute",top:"-1000px",left:"-1000px"})),_=g[0],v={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var n="timeout"===e?"timeout":"aborted";i("aborting upload... "+n),this.aborted=1;try{_.contentWindow.document.execCommand&&_.contentWindow.document.execCommand("Stop")}catch(r){}g.attr("src",d.iframeSrc),v.error=n,d.error&&d.error.call(d.context,v,n,e),h&&t.event.trigger("ajaxError",[v,d,n]),d.complete&&d.complete.call(d.context,v,n)}},h=d.global,h&&0===t.active++&&t.event.trigger("ajaxStart"),h&&t.event.trigger("ajaxSend",[v,d]),d.beforeSend&&d.beforeSend.call(d.context,v,d)===!1)return d.global&&t.active--,C.reject(),C;if(v.aborted)return C.reject(),C;y=k.clk,y&&(b=y.name,b&&!y.disabled&&(d.extraData=d.extraData||{},d.extraData[b]=y.value,"image"==y.type&&(d.extraData[b+".x"]=k.clk_x,d.extraData[b+".y"]=k.clk_y)));var $=1,T=2,q=t("meta[name=csrf-token]").attr("content"),P=t("meta[name=csrf-param]").attr("content");P&&q&&(d.extraData=d.extraData||{},d.extraData[P]=q),d.forceSync?s():setTimeout(s,10);var j,S,E,z=50,I=t.parseXML||function(t,e){return window.ActiveXObject?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},A=t.parseJSON||function(t){return window.eval("("+t+")")},D=function(e,n,i){var r=e.getResponseHeader("content-type")||"",o="xml"===n||!n&&r.indexOf("xml")>=0,s=o?e.responseXML:e.responseText;return o&&"parsererror"===s.documentElement.nodeName&&t.error&&t.error("parsererror"),i&&i.dataFilter&&(s=i.dataFilter(s,n)),"string"==typeof s&&("json"===n||!n&&r.indexOf("json")>=0?s=A(s):("script"===n||!n&&r.indexOf("javascript")>=0)&&t.globalEval(s)),s};return C}if(!this.length)return i("ajaxSubmit: skipping submit process - no element selected"),this;var l,u,c,p=this;"function"==typeof e?e={success:e}:void 0===e&&(e={}),l=e.type||this.attr2("method"),u=e.url||this.attr2("action"),c="string"==typeof u?t.trim(u):"",c=c||window.location.href||"",c&&(c=(c.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:c,success:t.ajaxSettings.success,type:l||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var d={};if(this.trigger("form-pre-serialize",[this,e,d]),d.veto)return i("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&e.beforeSerialize(this,e)===!1)return i("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var h=e.traditional;void 0===h&&(h=t.ajaxSettings.traditional);var f,m=[],g=this.formToArray(e.semantic,m);if(e.data&&(e.extraData=e.data,f=t.param(e.data,h)),e.beforeSubmit&&e.beforeSubmit(g,this,e)===!1)return i("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[g,this,e,d]),d.veto)return i("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var _=t.param(g,h);f&&(_=_?_+"&"+f:f),"GET"==e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+_,e.data=null):e.data=_;var v=[];if(e.resetForm&&v.push(function(){p.resetForm()}),e.clearForm&&v.push(function(){p.clearForm(e.includeHidden)}),!e.dataType&&e.target){var y=e.success||function(){};v.push(function(n){var i=e.replaceTarget?"replaceWith":"html";t(e.target)[i](n).each(y,arguments)})}else e.success&&v.push(e.success);if(e.success=function(t,n,i){for(var r=e.context||this,o=0,s=v.length;s>o;o++)v[o].apply(r,[t,n,i||p,p])},e.error){var b=e.error;e.error=function(t,n,i){var r=e.context||this;b.apply(r,[t,n,i,p])}}if(e.complete){var w=e.complete;e.complete=function(t,n){var i=e.context||this;w.apply(i,[t,n,p])}}var x=t("input[type=file]:enabled",this).filter(function(){return""!==t(this).val()}),k=x.length>0,C="multipart/form-data",$=p.attr("enctype")==C||p.attr("encoding")==C,T=r.fileapi&&r.formdata;i("fileAPI :"+T);var q,P=(k||$)&&!T;e.iframe!==!1&&(e.iframe||P)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){q=a(g)}):q=a(g):q=(k||$)&&T?s(g):t.ajax(e),p.removeData("jqxhr").data("jqxhr",q);for(var j=0;j<m.length;j++)m[j]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(r){if(r=r||{},r.delegation=r.delegation&&t.isFunction(t.fn.on),!r.delegation&&0===this.length){var o={s:this.selector,c:this.context};return!t.isReady&&o.s?(i("DOM not ready, queuing ajaxForm"),t(function(){t(o.s,o.c).ajaxForm(r)}),this):(i("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return r.delegation?(t(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,n).on("submit.form-plugin",this.selector,r,e).on("click.form-plugin",this.selector,r,n),this):this.ajaxFormUnbind().bind("submit.form-plugin",r,e).bind("click.form-plugin",r,n)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,n){var i=[];if(0===this.length)return i;var o,s=this[0],a=this.attr("id"),l=e?s.getElementsByTagName("*"):s.elements;if(l&&!/MSIE [678]/.test(navigator.userAgent)&&(l=t(l).get()),a&&(o=t(":input[form="+a+"]").get(),o.length&&(l=(l||[]).concat(o))),!l||!l.length)return i;var u,c,p,d,h,f,m;for(u=0,f=l.length;f>u;u++)if(h=l[u],p=h.name,p&&!h.disabled)if(e&&s.clk&&"image"==h.type)s.clk==h&&(i.push({name:p,value:t(h).val(),type:h.type}),i.push({name:p+".x",value:s.clk_x},{name:p+".y",value:s.clk_y}));else if(d=t.fieldValue(h,!0),d&&d.constructor==Array)for(n&&n.push(h),c=0,m=d.length;m>c;c++)i.push({name:p,value:d[c]});else if(r.fileapi&&"file"==h.type){n&&n.push(h);var g=h.files;if(g.length)for(c=0;c<g.length;c++)i.push({name:p,value:g[c],type:h.type});else i.push({name:p,value:"",type:h.type})}else null!==d&&"undefined"!=typeof d&&(n&&n.push(h),i.push({name:p,value:d,type:h.type,required:h.required}));if(!e&&s.clk){var _=t(s.clk),v=_[0];p=v.name,p&&!v.disabled&&"image"==v.type&&(i.push({name:p,value:_.val()}),i.push({name:p+".x",value:s.clk_x},{name:p+".y",value:s.clk_y}))}return i},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var n=[];return this.each(function(){var i=this.name;if(i){var r=t.fieldValue(this,e);if(r&&r.constructor==Array)for(var o=0,s=r.length;s>o;o++)n.push({name:i,value:r[o]});else null!==r&&"undefined"!=typeof r&&n.push({name:this.name,value:r})}}),t.param(n)},t.fn.fieldValue=function(e){for(var n=[],i=0,r=this.length;r>i;i++){var o=this[i],s=t.fieldValue(o,e);null===s||"undefined"==typeof s||s.constructor==Array&&!s.length||(s.constructor==Array?t.merge(n,s):n.push(s))}return n},t.fieldValue=function(e,n){var i=e.name,r=e.type,o=e.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||e.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!e.checked||("submit"==r||"image"==r)&&e.form&&e.form.clk!=e||"select"==o&&-1==e.selectedIndex))return null;if("select"==o){var s=e.selectedIndex;if(0>s)return null;for(var a=[],l=e.options,u="select-one"==r,c=u?s+1:l.length,p=u?s:0;c>p;p++){var d=l[p];if(d.selected){var h=d.value;if(h||(h=d.attributes&&d.attributes.value&&!d.attributes.value.specified?d.text:d.value),u)return h;a.push(h)}}return a}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,r=this.tagName.toLowerCase();n.test(i)||"textarea"==r?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==r?this.selectedIndex=-1:"file"==i?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(e===!0&&/hidden/.test(i)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=e;else if("option"==this.tagName.toLowerCase()){var i=t(this).parent("select");e&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1}),function(){define("global/form",["jquery","jquery.form"],function(t){return{init:function(){return t(function(){return t(document).on("submit","form",function(e){return e.isPropagationStopped()?void 0:t(this).find(":submit").prop("disabled",!0)})})}}})}.call(this),!function(t,e,n){!function(t){"function"==typeof define&&define.amd?define("qtip",["jquery"],t):jQuery&&!jQuery.fn.qtip&&t(jQuery)}(function(i){function r(t,e,n,r){this.id=n,this.target=t,this.tooltip=E,this.elements={target:t},this._id=U+"-"+n,this.timers={img:{}},this.options=e,this.plugins={},this.cache={event:{},target:i(),disabled:S,attr:r,onTooltip:S,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=S
}function o(t){return t===E||"object"!==i.type(t)}function s(t){return!(i.isFunction(t)||t&&t.attr||t.length||"object"===i.type(t)&&(t.jquery||t.then))}function a(t){var e,n,r,a;return o(t)?S:(o(t.metadata)&&(t.metadata={type:t.metadata}),"content"in t&&(e=t.content,o(e)||e.jquery||e.done?e=t.content={text:n=s(e)?S:e}:n=e.text,"ajax"in e&&(r=e.ajax,a=r&&r.once!==S,delete e.ajax,e.text=function(t,e){var o=n||i(this).attr(e.options.content.attr)||"Loading...",s=i.ajax(i.extend({},r,{context:e})).then(r.success,E,r.error).then(function(t){return t&&a&&e.set("content.text",t),t},function(t,n,i){e.destroyed||0===t.status||e.set("content.text",n+": "+i)});return a?o:(e.set("content.text",o),s)}),"title"in e&&(i.isPlainObject(e.title)&&(e.button=e.title.button,e.title=e.title.text),s(e.title||S)&&(e.title=S))),"position"in t&&o(t.position)&&(t.position={my:t.position,at:t.position}),"show"in t&&o(t.show)&&(t.show=t.show.jquery?{target:t.show}:t.show===j?{ready:j}:{event:t.show}),"hide"in t&&o(t.hide)&&(t.hide=t.hide.jquery?{target:t.hide}:{event:t.hide}),"style"in t&&o(t.style)&&(t.style={classes:t.style}),i.each(B,function(){this.sanitize&&this.sanitize(t)}),t)}function l(t,e){for(var n,i=0,r=t,o=e.split(".");r=r[o[i++]];)i<o.length&&(n=r);return[n||t,o.pop()]}function u(t,e){var n,i,r;for(n in this.checks)for(i in this.checks[n])(r=new RegExp(i,"i").exec(t))&&(e.push(r),("builtin"===n||this.plugins[n])&&this.checks[n][i].apply(this.plugins[n]||this,e))}function c(t){return Q.concat("").join(t?"-"+t+" ":" ")}function p(t,e){return e>0?setTimeout(i.proxy(t,this),e):void t.call(this)}function d(t){this.tooltip.hasClass(te)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=p.call(this,function(){this.toggle(j,t)},this.options.show.delay))}function h(t){if(!this.tooltip.hasClass(te)&&!this.destroyed){var e=i(t.relatedTarget),n=e.closest(X)[0]===this.tooltip[0],r=e[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==e[0]&&"mouse"===this.options.position.target&&n||this.options.hide.fixed&&/mouse(out|leave|move)/.test(t.type)&&(n||r))try{t.preventDefault(),t.stopImmediatePropagation()}catch(o){}else this.timers.hide=p.call(this,function(){this.toggle(S,t)},this.options.hide.delay,this)}}function f(t){!this.tooltip.hasClass(te)&&this.options.hide.inactive&&(clearTimeout(this.timers.inactive),this.timers.inactive=p.call(this,function(){this.hide(t)},this.options.hide.inactive))}function m(t){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(t)}function g(t,n,r){i(e.body).delegate(t,(n.split?n:n.join("."+U+" "))+"."+U,function(){var t=C.api[i.attr(this,H)];t&&!t.disabled&&r.apply(t,arguments)})}function _(t,n,o){var s,l,u,c,p,d=i(e.body),h=t[0]===e?d:t,f=t.metadata?t.metadata(o.metadata):E,m="html5"===o.metadata.type&&f?f[o.metadata.name]:E,g=t.data(o.metadata.name||"qtipopts");try{g="string"==typeof g?i.parseJSON(g):g}catch(_){}if(c=i.extend(j,{},C.defaults,o,"object"==typeof g?a(g):E,a(m||f)),l=c.position,c.id=n,"boolean"==typeof c.content.text){if(u=t.attr(c.content.attr),c.content.attr===S||!u)return S;c.content.text=u}if(l.container.length||(l.container=d),l.target===S&&(l.target=h),c.show.target===S&&(c.show.target=h),c.show.solo===j&&(c.show.solo=l.container.closest("body")),c.hide.target===S&&(c.hide.target=h),c.position.viewport===j&&(c.position.viewport=l.container),l.container=l.container.eq(0),l.at=new T(l.at,j),l.my=new T(l.my),t.data(U))if(c.overwrite)t.qtip("destroy",!0);else if(c.overwrite===S)return S;return t.attr(V,n),c.suppress&&(p=t.attr("title"))&&t.removeAttr("title").attr(ne,p).attr("title",""),s=new r(t,c,n,!!u),t.data(U,s),s}function v(t){return t.charAt(0).toUpperCase()+t.slice(1)}function y(t,e){var i,r,o=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+_e.join(o+" ")+o).split(" "),a=0;if(ge[e])return t.css(ge[e]);for(;i=s[a++];)if((r=t.css(i))!==n)return ge[e]=i,r}function b(t,e){return Math.ceil(parseFloat(y(t,e)))}function w(t,e){this._ns="tip",this.options=e,this.offset=e.offset,this.size=[e.width,e.height],this.init(this.qtip=t)}function x(t,e){this.options=e,this._ns="-modal",this.init(this.qtip=t)}function k(t){this._ns="ie6",this.init(this.qtip=t)}var C,$,T,q,P,j=!0,S=!1,E=null,z="x",I="y",A="width",D="height",F="top",O="left",R="bottom",M="right",L="center",N="flipinvert",W="shift",B={},U="qtip",V="data-hasqtip",H="data-qtip-id",Q=["ui-widget","ui-tooltip"],X="."+U,J="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),K=U+"-fixed",Y=U+"-default",G=U+"-focus",Z=U+"-hover",te=U+"-disabled",ee="_replacedByqTip",ne="oldtitle",ie={ie:function(){for(var t=4,n=e.createElement("div");(n.innerHTML="<!--[if gt IE "+t+"]><i></i><![endif]-->")&&n.getElementsByTagName("i")[0];t+=1);return t>4?t:0/0}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||S};$=r.prototype,$._when=function(t){return i.when.apply(i,t)},$.render=function(t){if(this.rendered||this.destroyed)return this;var e,n=this,r=this.options,o=this.cache,s=this.elements,a=r.content.text,l=r.content.title,u=r.content.button,c=r.position,p=("."+this._id+" ",[]);return i.attr(this.target[0],"aria-describedby",this._id),o.posClass=this._createPosClass((this.position={my:c.my,at:c.at}).my),this.tooltip=s.tooltip=e=i("<div/>",{id:this._id,"class":[U,Y,r.style.classes,o.posClass].join(" "),width:r.style.width||"",height:r.style.height||"",tracking:"mouse"===c.target&&c.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":S,"aria-describedby":this._id+"-content","aria-hidden":j}).toggleClass(te,this.disabled).attr(H,this.id).data(U,this).appendTo(c.container).append(s.content=i("<div />",{"class":U+"-content",id:this._id+"-content","aria-atomic":j})),this.rendered=-1,this.positioning=j,l&&(this._createTitle(),i.isFunction(l)||p.push(this._updateTitle(l,S))),u&&this._createButton(),i.isFunction(a)||p.push(this._updateContent(a,S)),this.rendered=j,this._setWidget(),i.each(B,function(t){var e;"render"===this.initialize&&(e=this(n))&&(n.plugins[t]=e)}),this._unassignEvents(),this._assignEvents(),this._when(p).then(function(){n._trigger("render"),n.positioning=S,n.hiddenDuringWait||!r.show.ready&&!t||n.toggle(j,o.event,S),n.hiddenDuringWait=S}),C.api[this.id]=this,this},$.destroy=function(t){function e(){if(!this.destroyed){this.destroyed=j;var t,e=this.target,n=e.attr(ne);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),i.each(this.plugins,function(){this.destroy&&this.destroy()});for(t in this.timers)clearTimeout(this.timers[t]);e.removeData(U).removeAttr(H).removeAttr(V).removeAttr("aria-describedby"),this.options.suppress&&n&&e.attr("title",n).removeAttr(ne),this._unassignEvents(),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=E,delete C.api[this.id]}}return this.destroyed?this.target:(t===j&&"hide"!==this.triggering||!this.rendered?e.call(this):(this.tooltip.one("tooltiphidden",i.proxy(e,this)),!this.triggering&&this.hide()),this.target)},q=$.checks={builtin:{"^id$":function(t,e,n,r){var o=n===j?C.nextid:n,s=U+"-"+o;o!==S&&o.length>0&&!i("#"+s).length?(this._id=s,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):t[e]=r},"^prerender":function(t,e,n){n&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(t,e,n){this._updateContent(n)},"^content.attr$":function(t,e,n,i){this.options.content.text===this.target.attr(i)&&this._updateContent(this.target.attr(n))},"^content.title$":function(t,e,n){return n?(n&&!this.elements.title&&this._createTitle(),void this._updateTitle(n)):this._removeTitle()},"^content.button$":function(t,e,n){this._updateButton(n)},"^content.title.(text|button)$":function(t,e,n){this.set("content."+e,n)},"^position.(my|at)$":function(t,e,n){"string"==typeof n&&(this.position[e]=t[e]=new T(n,"at"===e))},"^position.container$":function(t,e,n){this.rendered&&this.tooltip.appendTo(n)},"^show.ready$":function(t,e,n){n&&(!this.rendered&&this.render(j)||this.toggle(j))},"^style.classes$":function(t,e,n,i){this.rendered&&this.tooltip.removeClass(i).addClass(n)},"^style.(width|height)":function(t,e,n){this.rendered&&this.tooltip.css(e,n)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(t,e,n){this.rendered&&this.tooltip.toggleClass(Y,!!n)},"^events.(render|show|move|hide|focus|blur)$":function(t,e,n){this.rendered&&this.tooltip[(i.isFunction(n)?"":"un")+"bind"]("tooltip"+e,n)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var t=this.options.position;this.tooltip.attr("tracking","mouse"===t.target&&t.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},$.get=function(t){if(this.destroyed)return this;var e=l(this.options,t.toLowerCase()),n=e[0][e[1]];return n.precedance?n.string():n};var re=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,oe=/^prerender|show\.ready/i;$.set=function(t,e){if(this.destroyed)return this;var n,r=this.rendered,o=S,s=this.options;return this.checks,"string"==typeof t?(n=t,t={},t[n]=e):t=i.extend({},t),i.each(t,function(e,n){if(r&&oe.test(e))return void delete t[e];var a,u=l(s,e.toLowerCase());a=u[0][u[1]],u[0][u[1]]=n&&n.nodeType?i(n):n,o=re.test(e)||o,t[e]=[u[0],u[1],n,a]}),a(s),this.positioning=j,i.each(t,i.proxy(u,this)),this.positioning=S,this.rendered&&this.tooltip[0].offsetWidth>0&&o&&this.reposition("mouse"===s.position.target?E:this.cache.event),this},$._update=function(t,e){var n=this,r=this.cache;return this.rendered&&t?(i.isFunction(t)&&(t=t.call(this.elements.target,r.event,this)||""),i.isFunction(t.then)?(r.waiting=j,t.then(function(t){return r.waiting=S,n._update(t,e)},E,function(t){return n._update(t,e)})):t===S||!t&&""!==t?S:(t.jquery&&t.length>0?e.empty().append(t.css({display:"block",visibility:"visible"})):e.html(t),this._waitForContent(e).then(function(t){n.rendered&&n.tooltip[0].offsetWidth>0&&n.reposition(r.event,!t.length)}))):S},$._waitForContent=function(t){var e=this.cache;return e.waiting=j,(i.fn.imagesLoaded?t.imagesLoaded():i.Deferred().resolve([])).done(function(){e.waiting=S}).promise()},$._updateContent=function(t,e){this._update(t,this.elements.content,e)},$._updateTitle=function(t,e){this._update(t,this.elements.title,e)===S&&this._removeTitle(S)},$._createTitle=function(){var t=this.elements,e=this._id+"-title";t.titlebar&&this._removeTitle(),t.titlebar=i("<div />",{"class":U+"-titlebar "+(this.options.style.widget?c("header"):"")}).append(t.title=i("<div />",{id:e,"class":U+"-title","aria-atomic":j})).insertBefore(t.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(t){i(this).toggleClass("ui-state-active ui-state-focus","down"===t.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(t){i(this).toggleClass("ui-state-hover","mouseover"===t.type)}),this.options.content.button&&this._createButton()},$._removeTitle=function(t){var e=this.elements;e.title&&(e.titlebar.remove(),e.titlebar=e.title=e.button=E,t!==S&&this.reposition())},$._createPosClass=function(t){return U+"-pos-"+(t||this.options.position.my).abbrev()},$.reposition=function(n,r){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=j;var o,s,a,l,u=this.cache,c=this.tooltip,p=this.options.position,d=p.target,h=p.my,f=p.at,m=p.viewport,g=p.container,_=p.adjust,v=_.method.split(" "),y=c.outerWidth(S),b=c.outerHeight(S),w=0,x=0,k=c.css("position"),C={left:0,top:0},$=c[0].offsetWidth>0,T=n&&"scroll"===n.type,q=i(t),P=g[0].ownerDocument,E=this.mouse;if(i.isArray(d)&&2===d.length)f={x:O,y:F},C={left:d[0],top:d[1]};else if("mouse"===d)f={x:O,y:F},(!_.mouse||this.options.hide.distance)&&u.origin&&u.origin.pageX?n=u.origin:!n||n&&("resize"===n.type||"scroll"===n.type)?n=u.event:E&&E.pageX&&(n=E),"static"!==k&&(C=g.offset()),P.body.offsetWidth!==(t.innerWidth||P.documentElement.clientWidth)&&(s=i(e.body).offset()),C={left:n.pageX-C.left+(s&&s.left||0),top:n.pageY-C.top+(s&&s.top||0)},_.mouse&&T&&E&&(C.left-=(E.scrollX||0)-q.scrollLeft(),C.top-=(E.scrollY||0)-q.scrollTop());else{if("event"===d?n&&n.target&&"scroll"!==n.type&&"resize"!==n.type?u.target=i(n.target):n.target||(u.target=this.elements.target):"event"!==d&&(u.target=i(d.jquery?d:this.elements.target)),d=u.target,d=i(d).eq(0),0===d.length)return this;d[0]===e||d[0]===t?(w=ie.iOS?t.innerWidth:d.width(),x=ie.iOS?t.innerHeight:d.height(),d[0]===t&&(C={top:(m||d).scrollTop(),left:(m||d).scrollLeft()})):B.imagemap&&d.is("area")?o=B.imagemap(this,d,f,B.viewport?v:S):B.svg&&d&&d[0].ownerSVGElement?o=B.svg(this,d,f,B.viewport?v:S):(w=d.outerWidth(S),x=d.outerHeight(S),C=d.offset()),o&&(w=o.width,x=o.height,s=o.offset,C=o.position),C=this.reposition.offset(d,C,g),(ie.iOS>3.1&&ie.iOS<4.1||ie.iOS>=4.3&&ie.iOS<4.33||!ie.iOS&&"fixed"===k)&&(C.left-=q.scrollLeft(),C.top-=q.scrollTop()),(!o||o&&o.adjustable!==S)&&(C.left+=f.x===M?w:f.x===L?w/2:0,C.top+=f.y===R?x:f.y===L?x/2:0)}return C.left+=_.x+(h.x===M?-y:h.x===L?-y/2:0),C.top+=_.y+(h.y===R?-b:h.y===L?-b/2:0),B.viewport?(a=C.adjusted=B.viewport(this,C,p,w,x,y,b),s&&a.left&&(C.left+=s.left),s&&a.top&&(C.top+=s.top),a.my&&(this.position.my=a.my)):C.adjusted={left:0,top:0},u.posClass!==(l=this._createPosClass(this.position.my))&&c.removeClass(u.posClass).addClass(u.posClass=l),this._trigger("move",[C,m.elem||m],n)?(delete C.adjusted,r===S||!$||isNaN(C.left)||isNaN(C.top)||"mouse"===d||!i.isFunction(p.effect)?c.css(C):i.isFunction(p.effect)&&(p.effect.call(c,this,i.extend({},C)),c.queue(function(t){i(this).css({opacity:"",height:""}),ie.ie&&this.style.removeAttribute("filter"),t()})),this.positioning=S,this):this},$.reposition.offset=function(t,n,r){function o(t,e){n.left+=e*t.scrollLeft(),n.top+=e*t.scrollTop()}if(!r[0])return n;var s,a,l,u,c=i(t[0].ownerDocument),p=!!ie.ie&&"CSS1Compat"!==e.compatMode,d=r[0];do"static"!==(a=i.css(d,"position"))&&("fixed"===a?(l=d.getBoundingClientRect(),o(c,-1)):(l=i(d).position(),l.left+=parseFloat(i.css(d,"borderLeftWidth"))||0,l.top+=parseFloat(i.css(d,"borderTopWidth"))||0),n.left-=l.left+(parseFloat(i.css(d,"marginLeft"))||0),n.top-=l.top+(parseFloat(i.css(d,"marginTop"))||0),s||"hidden"===(u=i.css(d,"overflow"))||"visible"===u||(s=i(d)));while(d=d.offsetParent);return s&&(s[0]!==c[0]||p)&&o(s,1),n};var se=(T=$.reposition.Corner=function(t,e){t=(""+t).replace(/([A-Z])/," $1").replace(/middle/gi,L).toLowerCase(),this.x=(t.match(/left|right/i)||t.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(t.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!e;var n=t.charAt(0);this.precedance="t"===n||"b"===n?I:z}).prototype;se.invert=function(t,e){this[t]=this[t]===O?M:this[t]===M?O:e||this[t]},se.string=function(t){var e=this.x,n=this.y,i=e!==n?"center"===e||"center"!==n&&(this.precedance===I||this.forceY)?[n,e]:[e,n]:[e];return t!==!1?i.join(" "):i},se.abbrev=function(){var t=this.string(!1);return t[0].charAt(0)+(t[1]&&t[1].charAt(0)||"")},se.clone=function(){return new T(this.string(),this.forceY)},$.toggle=function(t,n){var r=this.cache,o=this.options,s=this.tooltip;if(n){if(/over|enter/.test(n.type)&&r.event&&/out|leave/.test(r.event.type)&&o.show.target.add(n.target).length===o.show.target.length&&s.has(n.relatedTarget).length)return this;r.event=i.event.fix(n)}if(this.waiting&&!t&&(this.hiddenDuringWait=j),!this.rendered)return t?this.render(1):this;if(this.destroyed||this.disabled)return this;var a,l,u,c=t?"show":"hide",p=this.options[c],d=(this.options[t?"hide":"show"],this.options.position),h=this.options.content,f=this.tooltip.css("width"),m=this.tooltip.is(":visible"),g=t||1===p.target.length,_=!n||p.target.length<2||r.target[0]===n.target;return(typeof t).search("boolean|number")&&(t=!m),a=!s.is(":animated")&&m===t&&_,l=a?E:!!this._trigger(c,[90]),this.destroyed?this:(l!==S&&t&&this.focus(n),!l||a?this:(i.attr(s[0],"aria-hidden",!t),t?(this.mouse&&(r.origin=i.event.fix(this.mouse)),i.isFunction(h.text)&&this._updateContent(h.text,S),i.isFunction(h.title)&&this._updateTitle(h.title,S),!P&&"mouse"===d.target&&d.adjust.mouse&&(i(e).bind("mousemove."+U,this._storeMouse),P=j),f||s.css("width",s.outerWidth(S)),this.reposition(n,arguments[2]),f||s.css("width",""),p.solo&&("string"==typeof p.solo?i(p.solo):i(X,p.solo)).not(s).not(p.target).qtip("hide",i.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete r.origin,P&&!i(X+'[tracking="true"]:visible',p.solo).not(s).length&&(i(e).unbind("mousemove."+U),P=S),this.blur(n)),u=i.proxy(function(){t?(ie.ie&&s[0].style.removeAttribute("filter"),s.css("overflow",""),"string"==typeof p.autofocus&&i(this.options.show.autofocus,s).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):s.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(t?"visible":"hidden")},this),p.effect===S||g===S?(s[c](),u()):i.isFunction(p.effect)?(s.stop(1,1),p.effect.call(s,this),s.queue("fx",function(t){u(),t()})):s.fadeTo(90,t?1:0,u),t&&p.target.trigger("qtip-"+this.id+"-inactive"),this))},$.show=function(t){return this.toggle(j,t)},$.hide=function(t){return this.toggle(S,t)},$.focus=function(t){if(!this.rendered||this.destroyed)return this;var e=i(X),n=this.tooltip,r=parseInt(n[0].style.zIndex,10),o=C.zindex+e.length;return n.hasClass(G)||this._trigger("focus",[o],t)&&(r!==o&&(e.each(function(){this.style.zIndex>r&&(this.style.zIndex=this.style.zIndex-1)}),e.filter("."+G).qtip("blur",t)),n.addClass(G)[0].style.zIndex=o),this},$.blur=function(t){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(G),this._trigger("blur",[this.tooltip.css("zIndex")],t),this)},$.disable=function(t){return this.destroyed?this:("toggle"===t?t=!(this.rendered?this.tooltip.hasClass(te):this.disabled):"boolean"!=typeof t&&(t=j),this.rendered&&this.tooltip.toggleClass(te,t).attr("aria-disabled",t),this.disabled=!!t,this)},$.enable=function(){return this.disable(S)},$._createButton=function(){var t=this,e=this.elements,n=e.tooltip,r=this.options.content.button,o="string"==typeof r,s=o?r:"Close tooltip";e.button&&e.button.remove(),e.button=r.jquery?r:i("<a />",{"class":"qtip-close "+(this.options.style.widget?"":U+"-icon"),title:s,"aria-label":s}).prepend(i("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),e.button.appendTo(e.titlebar||n).attr("role","button").click(function(e){return n.hasClass(te)||t.hide(e),S})},$._updateButton=function(t){if(!this.rendered)return S;var e=this.elements.button;t?this._createButton():e.remove()},$._setWidget=function(){var t=this.options.style.widget,e=this.elements,n=e.tooltip,i=n.hasClass(te);n.removeClass(te),te=t?"ui-state-disabled":"qtip-disabled",n.toggleClass(te,i),n.toggleClass("ui-helper-reset "+c(),t).toggleClass(Y,this.options.style.def&&!t),e.content&&e.content.toggleClass(c("content"),t),e.titlebar&&e.titlebar.toggleClass(c("header"),t),e.button&&e.button.toggleClass(U+"-icon",!t)},$._storeMouse=function(t){return(this.mouse=i.event.fix(t)).type="mousemove",this},$._bind=function(t,e,n,r,o){if(t&&n&&e.length){var s="."+this._id+(r?"-"+r:"");return i(t).bind((e.split?e:e.join(s+" "))+s,i.proxy(n,o||this)),this}},$._unbind=function(t,e){return t&&i(t).unbind("."+this._id+(e?"-"+e:"")),this},$._trigger=function(t,e,n){var r=i.Event("tooltip"+t);return r.originalEvent=n&&i.extend({},n)||this.cache.event||E,this.triggering=t,this.tooltip.trigger(r,[this].concat(e||[])),this.triggering=S,!r.isDefaultPrevented()},$._bindEvents=function(t,e,n,r,o,s){var a=n.filter(r).add(r.filter(n)),l=[];a.length&&(i.each(e,function(e,n){var r=i.inArray(n,t);r>-1&&l.push(t.splice(r,1)[0])}),l.length&&(this._bind(a,l,function(t){var e=this.rendered?this.tooltip[0].offsetWidth>0:!1;(e?s:o).call(this,t)}),n=n.not(a),r=r.not(a))),this._bind(n,t,o),this._bind(r,e,s)},$._assignInitialEvents=function(t){function e(t){return this.disabled||this.destroyed?S:(this.cache.event=t&&i.event.fix(t),this.cache.target=t&&i(t.target),clearTimeout(this.timers.show),void(this.timers.show=p.call(this,function(){this.render("object"==typeof t||n.show.ready)},n.prerender?0:n.show.delay)))}var n=this.options,r=n.show.target,o=n.hide.target,s=n.show.event?i.trim(""+n.show.event).split(" "):[],a=n.hide.event?i.trim(""+n.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(!0)},"destroy"),/mouse(over|enter)/i.test(n.show.event)&&!/mouse(out|leave)/i.test(n.hide.event)&&a.push("mouseleave"),this._bind(r,"mousemove",function(t){this._storeMouse(t),this.cache.onTarget=j}),this._bindEvents(s,a,r,o,e,function(){return this.timers?void clearTimeout(this.timers.show):S}),(n.show.ready||n.prerender)&&e.call(this,t)},$._assignEvents=function(){var n=this,r=this.options,o=r.position,s=this.tooltip,a=r.show.target,l=r.hide.target,u=o.container,c=o.viewport,p=i(e),g=(i(e.body),i(t)),_=r.show.event?i.trim(""+r.show.event).split(" "):[],v=r.hide.event?i.trim(""+r.hide.event).split(" "):[];i.each(r.events,function(t,e){n._bind(s,"toggle"===t?["tooltipshow","tooltiphide"]:["tooltip"+t],e,null,s)}),/mouse(out|leave)/i.test(r.hide.event)&&"window"===r.hide.leave&&this._bind(p,["mouseout","blur"],function(t){/select|option/.test(t.target.nodeName)||t.relatedTarget||this.hide(t)}),r.hide.fixed?l=l.add(s.addClass(K)):/mouse(over|enter)/i.test(r.show.event)&&this._bind(l,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+r.hide.event).indexOf("unfocus")>-1&&this._bind(u.closest("html"),["mousedown","touchstart"],function(t){var e=i(t.target),n=this.rendered&&!this.tooltip.hasClass(te)&&this.tooltip[0].offsetWidth>0,r=e.parents(X).filter(this.tooltip[0]).length>0;e[0]===this.target[0]||e[0]===this.tooltip[0]||r||this.target.has(e[0]).length||!n||this.hide(t)}),"number"==typeof r.hide.inactive&&(this._bind(a,"qtip-"+this.id+"-inactive",f,"inactive"),this._bind(l.add(s),C.inactiveEvents,f)),this._bindEvents(_,v,a,l,d,h),this._bind(a.add(s),"mousemove",function(t){if("number"==typeof r.hide.distance){var e=this.cache.origin||{},n=this.options.hide.distance,i=Math.abs;(i(t.pageX-e.pageX)>=n||i(t.pageY-e.pageY)>=n)&&this.hide(t)}this._storeMouse(t)}),"mouse"===o.target&&o.adjust.mouse&&(r.hide.event&&this._bind(a,["mouseenter","mouseleave"],function(t){return this.cache?void(this.cache.onTarget="mouseenter"===t.type):S}),this._bind(p,"mousemove",function(t){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(te)&&this.tooltip[0].offsetWidth>0&&this.reposition(t)})),(o.adjust.resize||c.length)&&this._bind(i.event.special.resize?c:g,"resize",m),o.adjust.scroll&&this._bind(g.add(o.container),"scroll",m)},$._unassignEvents=function(){var n=this.options,r=n.show.target,o=n.hide.target,s=i.grep([this.elements.target[0],this.rendered&&this.tooltip[0],n.position.container[0],n.position.viewport[0],n.position.container.closest("html")[0],t,e],function(t){return"object"==typeof t});r&&r.toArray&&(s=s.concat(r.toArray())),o&&o.toArray&&(s=s.concat(o.toArray())),this._unbind(s)._unbind(s,"destroy")._unbind(s,"inactive")},i(function(){g(X,["mouseenter","mouseleave"],function(t){var e="mouseenter"===t.type,n=i(t.currentTarget),r=i(t.relatedTarget||t.target),o=this.options;e?(this.focus(t),n.hasClass(K)&&!n.hasClass(te)&&clearTimeout(this.timers.hide)):"mouse"===o.position.target&&o.position.adjust.mouse&&o.hide.event&&o.show.target&&!r.closest(o.show.target[0]).length&&this.hide(t),n.toggleClass(Z,e)}),g("["+H+"]",J,f)}),C=i.fn.qtip=function(t,e,r){var o=(""+t).toLowerCase(),s=E,l=i.makeArray(arguments).slice(1),u=l[l.length-1],c=this[0]?i.data(this[0],U):E;return!arguments.length&&c||"api"===o?c:"string"==typeof t?(this.each(function(){var t=i.data(this,U);if(!t)return j;if(u&&u.timeStamp&&(t.cache.event=u),!e||"option"!==o&&"options"!==o)t[o]&&t[o].apply(t,l);else{if(r===n&&!i.isPlainObject(e))return s=t.get(e),S;t.set(e,r)}}),s!==E?s:this):"object"!=typeof t&&arguments.length?void 0:(c=a(i.extend(j,{},t)),this.each(function(t){var e,n;return n=i.isArray(c.id)?c.id[t]:c.id,n=!n||n===S||n.length<1||C.api[n]?C.nextid++:n,e=_(i(this),n,c),e===S?j:(C.api[n]=e,i.each(B,function(){"initialize"===this.initialize&&this(e)}),void e._assignInitialEvents(u))}))},i.qtip=r,C.api={},i.each({attr:function(t,e){if(this.length){var n=this[0],r="title",o=i.data(n,"qtip");if(t===r&&o&&"object"==typeof o&&o.options.suppress)return arguments.length<2?i.attr(n,ne):(o&&o.options.content.attr===r&&o.cache.attr&&o.set("content.text",e),this.attr(ne,e))}return i.fn["attr"+ee].apply(this,arguments)},clone:function(t){var e=(i([]),i.fn["clone"+ee].apply(this,arguments));return t||e.filter("["+ne+"]").attr("title",function(){return i.attr(this,ne)}).removeAttr(ne),e}},function(t,e){if(!e||i.fn[t+ee])return j;var n=i.fn[t+ee]=i.fn[t];i.fn[t]=function(){return e.apply(this,arguments)||n.apply(this,arguments)}}),i.ui||(i["cleanData"+ee]=i.cleanData,i.cleanData=function(t){for(var e,n=0;(e=i(t[n])).length;n++)if(e.attr(V))try{e.triggerHandler("removeqtip")}catch(r){}i["cleanData"+ee].apply(this,arguments)}),C.version="2.2.1",C.nextid=0,C.inactiveEvents=J,C.zindex=15e3,C.defaults={prerender:S,id:S,overwrite:j,suppress:j,content:{text:j,attr:"title",title:S,button:S},position:{my:"top left",at:"bottom right",target:S,container:S,viewport:S,adjust:{x:0,y:0,mouse:j,scroll:j,resize:j,method:"flipinvert flipinvert"},effect:function(t,e){i(this).animate(e,{duration:200,queue:S})}},show:{target:S,event:"mouseenter",effect:j,delay:90,solo:S,ready:S,autofocus:S},hide:{target:S,event:"mouseleave",effect:j,delay:0,fixed:S,inactive:S,leave:"window",distance:S},style:{classes:"",widget:S,width:S,height:S,def:j},events:{render:E,move:E,show:E,hide:E,toggle:E,visible:E,hidden:E,focus:E,blur:E}};var ae,le="margin",ue="border",ce="color",pe="background-color",de="transparent",he=" !important",fe=!!e.createElement("canvas").getContext,me=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,ge={},_e=["Webkit","O","Moz","ms"];if(fe)var ve=t.devicePixelRatio||1,ye=function(){var t=e.createElement("canvas").getContext("2d");return t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||1}(),be=ve/ye;else var we=function(t,e,n){return"<qtipvml:"+t+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(e||"")+' style="behavior: url(#default#VML); '+(n||"")+'" />'};i.extend(w.prototype,{init:function(t){var e,n;n=this.element=t.elements.tip=i("<div />",{"class":U+"-tip"}).prependTo(t.tooltip),fe?(e=i("<canvas />").appendTo(this.element)[0].getContext("2d"),e.lineJoin="miter",e.miterLimit=1e5,e.save()):(e=we("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(e+e),t._bind(i("*",n).add(n),["click","mousedown"],function(t){t.stopPropagation()},this._ns)),t._bind(t.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(t){var e=this.qtip.elements.titlebar;return e&&(t.y===F||t.y===L&&this.element.position().top+this.size[1]/2+this.options.offset<e.outerHeight(j))},_parseCorner:function(t){var e=this.qtip.options.position.my;return t===S||e===S?t=S:t===j?t=new T(e.string()):t.string||(t=new T(t),t.fixed=j),t},_parseWidth:function(t,e,n){var i=this.qtip.elements,r=ue+v(e)+"Width";return(n?b(n,r):b(i.content,r)||b(this._useTitle(t)&&i.titlebar||i.content,r)||b(i.tooltip,r))||0},_parseRadius:function(t){var e=this.qtip.elements,n=ue+v(t.y)+v(t.x)+"Radius";return ie.ie<9?0:b(this._useTitle(t)&&e.titlebar||e.content,n)||b(e.tooltip,n)||0},_invalidColour:function(t,e,n){var i=t.css(e);return!i||n&&i===t.css(n)||me.test(i)?S:i},_parseColours:function(t){var e=this.qtip.elements,n=this.element.css("cssText",""),r=ue+v(t[t.precedance])+v(ce),o=this._useTitle(t)&&e.titlebar||e.content,s=this._invalidColour,a=[];return a[0]=s(n,pe)||s(o,pe)||s(e.content,pe)||s(e.tooltip,pe)||n.css(pe),a[1]=s(n,r,ce)||s(o,r,ce)||s(e.content,r,ce)||s(e.tooltip,r,ce)||e.tooltip.css(r),i("*",n).add(n).css("cssText",pe+":"+de+he+";"+ue+":0"+he+";"),a},_calculateSize:function(t){var e,n,i,r=t.precedance===I,o=this.options.width,s=this.options.height,a="c"===t.abbrev(),l=(r?o:s)*(a?.5:1),u=Math.pow,c=Math.round,p=Math.sqrt(u(l,2)+u(s,2)),d=[this.border/l*p,this.border/s*p];return d[2]=Math.sqrt(u(d[0],2)-u(this.border,2)),d[3]=Math.sqrt(u(d[1],2)-u(this.border,2)),e=p+d[2]+d[3]+(a?0:d[0]),n=e/p,i=[c(n*o),c(n*s)],r?i:i.reverse()},_calculateTip:function(t,e,n){n=n||1,e=e||this.size;var i=e[0]*n,r=e[1]*n,o=Math.ceil(i/2),s=Math.ceil(r/2),a={br:[0,0,i,r,i,0],bl:[0,0,i,0,0,r],tr:[0,r,i,0,i,r],tl:[0,0,0,r,i,r],tc:[0,r,o,0,i,r],bc:[0,0,i,0,o,r],rc:[0,0,i,s,0,r],lc:[i,0,i,r,0,s]};return a.lt=a.br,a.rt=a.bl,a.lb=a.tr,a.rb=a.tl,a[t.abbrev()]},_drawCoords:function(t,e){t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[2],e[3]),t.lineTo(e[4],e[5]),t.closePath()},create:function(){var t=this.corner=(fe||ie.ie)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&"c"!==this.corner.abbrev())&&(this.qtip.cache.corner=t.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(e,n){if(!this.enabled)return this;var r,o,s,a,l,u,c,p,d=this.qtip.elements,h=this.element,f=h.children(),m=this.options,g=this.size,_=m.mimic,v=Math.round;e||(e=this.qtip.cache.corner||this.corner),_===S?_=e:(_=new T(_),_.precedance=e.precedance,"inherit"===_.x?_.x=e.x:"inherit"===_.y?_.y=e.y:_.x===_.y&&(_[e.precedance]=e[e.precedance])),o=_.precedance,e.precedance===z?this._swapDimensions():this._resetDimensions(),r=this.color=this._parseColours(e),r[1]!==de?(p=this.border=this._parseWidth(e,e[e.precedance]),m.border&&1>p&&!me.test(r[1])&&(r[0]=r[1]),this.border=p=m.border!==j?m.border:p):this.border=p=0,c=this.size=this._calculateSize(e),h.css({width:c[0],height:c[1],lineHeight:c[1]+"px"}),u=e.precedance===I?[v(_.x===O?p:_.x===M?c[0]-g[0]-p:(c[0]-g[0])/2),v(_.y===F?c[1]-g[1]:0)]:[v(_.x===O?c[0]-g[0]:0),v(_.y===F?p:_.y===R?c[1]-g[1]-p:(c[1]-g[1])/2)],fe?(s=f[0].getContext("2d"),s.restore(),s.save(),s.clearRect(0,0,6e3,6e3),a=this._calculateTip(_,g,be),l=this._calculateTip(_,this.size,be),f.attr(A,c[0]*be).attr(D,c[1]*be),f.css(A,c[0]).css(D,c[1]),this._drawCoords(s,l),s.fillStyle=r[1],s.fill(),s.translate(u[0]*be,u[1]*be),this._drawCoords(s,a),s.fillStyle=r[0],s.fill()):(a=this._calculateTip(_),a="m"+a[0]+","+a[1]+" l"+a[2]+","+a[3]+" "+a[4]+","+a[5]+" xe",u[2]=p&&/^(r|b)/i.test(e.string())?8===ie.ie?2:1:0,f.css({coordsize:c[0]+p+" "+(c[1]+p),antialias:""+(_.string().indexOf(L)>-1),left:u[0]-u[2]*Number(o===z),top:u[1]-u[2]*Number(o===I),width:c[0]+p,height:c[1]+p}).each(function(t){var e=i(this);e[e.prop?"prop":"attr"]({coordsize:c[0]+p+" "+(c[1]+p),path:a,fillcolor:r[0],filled:!!t,stroked:!t}).toggle(!(!p&&!t)),!t&&e.html(we("stroke",'weight="'+2*p+'px" color="'+r[1]+'" miterlimit="1000" joinstyle="miter"'))})),t.opera&&setTimeout(function(){d.tip.css({display:"inline-block",visibility:"visible"})},1),n!==S&&this.calculate(e,c)},calculate:function(t,e){if(!this.enabled)return S;var n,r,o=this,s=this.qtip.elements,a=this.element,l=this.options.offset,u=(s.tooltip.hasClass("ui-widget"),{});return t=t||this.corner,n=t.precedance,e=e||this._calculateSize(t),r=[t.x,t.y],n===z&&r.reverse(),i.each(r,function(i,r){var a,c,p;r===L?(a=n===I?O:F,u[a]="50%",u[le+"-"+a]=-Math.round(e[n===I?0:1]/2)+l):(a=o._parseWidth(t,r,s.tooltip),c=o._parseWidth(t,r,s.content),p=o._parseRadius(t),u[r]=Math.max(-o.border,i?c:l+(p>a?p:-a)))}),u[t[n]]-=e[n===z?0:1],a.css({margin:"",top:"",bottom:"",left:"",right:""}).css(u),u},reposition:function(t,e,i){function r(t,e,n,i,r){t===W&&u.precedance===e&&c[i]&&u[n]!==L?u.precedance=u.precedance===z?I:z:t!==W&&c[i]&&(u[e]=u[e]===L?c[i]>0?i:r:u[e]===i?r:i)
}function o(t,e,r){u[t]===L?m[le+"-"+e]=f[t]=s[le+"-"+e]-c[e]:(a=s[r]!==n?[c[e],-s[e]]:[-c[e],s[e]],(f[t]=Math.max(a[0],a[1]))>a[0]&&(i[e]-=c[e],f[e]=S),m[s[r]!==n?r:e]=f[t])}if(this.enabled){var s,a,l=e.cache,u=this.corner.clone(),c=i.adjusted,p=e.options.position.adjust.method.split(" "),d=p[0],h=p[1]||p[0],f={left:S,top:S,x:0,y:0},m={};this.corner.fixed!==j&&(r(d,z,I,O,M),r(h,I,z,F,R),(u.string()!==l.corner.string()||l.cornerTop!==c.top||l.cornerLeft!==c.left)&&this.update(u,S)),s=this.calculate(u),s.right!==n&&(s.left=-s.right),s.bottom!==n&&(s.top=-s.bottom),s.user=this.offset,(f.left=d===W&&!!c.left)&&o(z,O,M),(f.top=h===W&&!!c.top)&&o(I,F,R),this.element.css(m).toggle(!(f.x&&f.y||u.x===L&&f.y||u.y===L&&f.x)),i.left-=s.left.charAt?s.user:d!==W||f.top||!f.left&&!f.top?s.left+this.border:0,i.top-=s.top.charAt?s.user:h!==W||f.left||!f.left&&!f.top?s.top+this.border:0,l.cornerLeft=c.left,l.cornerTop=c.top,l.corner=u.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),ae=B.tip=function(t){return new w(t,t.options.style.tip)},ae.initialize="render",ae.sanitize=function(t){if(t.style&&"tip"in t.style){var e=t.style.tip;"object"!=typeof e&&(e=t.style.tip={corner:e}),/string|boolean/i.test(typeof e.corner)||(e.corner=j)}},q.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(t){this.size=[t.width,t.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},i.extend(j,C.defaults,{style:{tip:{corner:j,mimic:S,width:6,height:6,border:j,offset:0}}});var xe,ke,Ce="qtip-modal",$e="."+Ce;ke=function(){function t(t){if(i.expr[":"].focusable)return i.expr[":"].focusable;var e,n,r,o=!isNaN(i.attr(t,"tabindex")),s=t.nodeName&&t.nodeName.toLowerCase();return"area"===s?(e=t.parentNode,n=e.name,t.href&&n&&"map"===e.nodeName.toLowerCase()?(r=i("img[usemap=#"+n+"]")[0],!!r&&r.is(":visible")):!1):/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s?t.href||o:o}function n(t){c.length<1&&t.length?t.not("body").blur():c.first().focus()}function r(t){if(l.is(":visible")){var e,r=i(t.target),a=o.tooltip,u=r.closest(X);e=u.length<1?S:parseInt(u[0].style.zIndex,10)>parseInt(a[0].style.zIndex,10),e||r.closest(X)[0]===a[0]||n(r),s=t.target===c[c.length-1]}}var o,s,a,l,u=this,c={};i.extend(u,{init:function(){return l=u.elem=i("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return S}}).hide(),i(e.body).bind("focusin"+$e,r),i(e).bind("keydown"+$e,function(t){o&&o.options.show.modal.escape&&27===t.keyCode&&o.hide(t)}),l.bind("click"+$e,function(t){o&&o.options.show.modal.blur&&o.hide(t)}),u},update:function(e){o=e,c=e.options.show.modal.stealfocus!==S?e.tooltip.find("*").filter(function(){return t(this)}):[]},toggle:function(t,r,s){var c=(i(e.body),t.tooltip),p=t.options.show.modal,d=p.effect,h=r?"show":"hide",f=l.is(":visible"),m=i($e).filter(":visible:not(:animated)").not(c);return u.update(t),r&&p.stealfocus!==S&&n(i(":focus")),l.toggleClass("blurs",p.blur),r&&l.appendTo(e.body),l.is(":animated")&&f===r&&a!==S||!r&&m.length?u:(l.stop(j,S),i.isFunction(d)?d.call(l,r):d===S?l[h]():l.fadeTo(parseInt(s,10)||90,r?1:0,function(){r||l.hide()}),r||l.queue(function(t){l.css({left:"",top:""}),i($e).length||l.detach(),t()}),a=r,o.destroyed&&(o=E),u)}}),u.init()},ke=new ke,i.extend(x.prototype,{init:function(t){var e=t.tooltip;return this.options.on?(t.elements.overlay=ke.elem,e.addClass(Ce).css("z-index",C.modal_zindex+i($e).length),t._bind(e,["tooltipshow","tooltiphide"],function(t,n,r){var o=t.originalEvent;if(t.target===e[0])if(o&&"tooltiphide"===t.type&&/mouse(leave|enter)/.test(o.type)&&i(o.relatedTarget).closest(ke.elem[0]).length)try{t.preventDefault()}catch(s){}else(!o||o&&"tooltipsolo"!==o.type)&&this.toggle(t,"tooltipshow"===t.type,r)},this._ns,this),t._bind(e,"tooltipfocus",function(t,n){if(!t.isDefaultPrevented()&&t.target===e[0]){var r=i($e),o=C.modal_zindex+r.length,s=parseInt(e[0].style.zIndex,10);ke.elem[0].style.zIndex=o-1,r.each(function(){this.style.zIndex>s&&(this.style.zIndex-=1)}),r.filter("."+G).qtip("blur",t.originalEvent),e.addClass(G)[0].style.zIndex=o,ke.update(n);try{t.preventDefault()}catch(a){}}},this._ns,this),void t._bind(e,"tooltiphide",function(t){t.target===e[0]&&i($e).filter(":visible").not(e).last().qtip("focus",t)},this._ns,this)):this},toggle:function(t,e,n){return t&&t.isDefaultPrevented()?this:void ke.toggle(this.qtip,!!e,n)},destroy:function(){this.qtip.tooltip.removeClass(Ce),this.qtip._unbind(this.qtip.tooltip,this._ns),ke.toggle(this.qtip,S),delete this.qtip.elements.overlay}}),xe=B.modal=function(t){return new x(t,t.options.show.modal)},xe.sanitize=function(t){t.show&&("object"!=typeof t.show.modal?t.show.modal={on:!!t.show.modal}:"undefined"==typeof t.show.modal.on&&(t.show.modal.on=j))},C.modal_zindex=C.zindex-200,xe.initialize="render",q.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}},i.extend(j,C.defaults,{show:{modal:{on:S,effect:j,blur:j,stealfocus:j,escape:j}}}),B.viewport=function(n,i,r,o,s,a,l){function u(t,e,n,r,o,s,a,l,u){var c=i[o],v=b[t],y=w[t],x=n===W,k=v===o?u:v===s?-u:-u/2,C=y===o?l:y===s?-l:-l/2,$=g[o]+_[o]-(h?0:d[o]),T=$-c,q=c+u-(a===A?f:m)-$,P=k-(b.precedance===t||v===b[e]?C:0)-(y===L?l/2:0);return x?(P=(v===o?1:-1)*k,i[o]+=T>0?T:q>0?-q:0,i[o]=Math.max(-d[o]+_[o],c-P,Math.min(Math.max(-d[o]+_[o]+(a===A?f:m),c+P),i[o],"center"===v?c-k:1e9))):(r*=n===N?2:0,T>0&&(v!==o||q>0)?(i[o]-=P+r,p.invert(t,o)):q>0&&(v!==s||T>0)&&(i[o]-=(v===L?-P:P)+r,p.invert(t,s)),i[o]<g&&-i[o]>q&&(i[o]=c,p=b.clone())),i[o]-c}var c,p,d,h,f,m,g,_,v=r.target,y=n.elements.tooltip,b=r.my,w=r.at,x=r.adjust,k=x.method.split(" "),C=k[0],$=k[1]||k[0],T=r.viewport,q=r.container,P=(n.cache,{left:0,top:0});return T.jquery&&v[0]!==t&&v[0]!==e.body&&"none"!==x.method?(d=q.offset()||P,h="static"===q.css("position"),c="fixed"===y.css("position"),f=T[0]===t?T.width():T.outerWidth(S),m=T[0]===t?T.height():T.outerHeight(S),g={left:c?0:T.scrollLeft(),top:c?0:T.scrollTop()},_=T.offset()||P,("shift"!==C||"shift"!==$)&&(p=b.clone()),P={left:"none"!==C?u(z,I,C,x.x,O,M,A,o,a):0,top:"none"!==$?u(I,z,$,x.y,F,R,D,s,l):0,my:p}):P},B.polys={polygon:function(t,e){var n,i,r,o={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:S},s=0,a=[],l=1,u=1,c=0,p=0;for(s=t.length;s--;)n=[parseInt(t[--s],10),parseInt(t[s+1],10)],n[0]>o.position.right&&(o.position.right=n[0]),n[0]<o.position.left&&(o.position.left=n[0]),n[1]>o.position.bottom&&(o.position.bottom=n[1]),n[1]<o.position.top&&(o.position.top=n[1]),a.push(n);if(i=o.width=Math.abs(o.position.right-o.position.left),r=o.height=Math.abs(o.position.bottom-o.position.top),"c"===e.abbrev())o.position={left:o.position.left+o.width/2,top:o.position.top+o.height/2};else{for(;i>0&&r>0&&l>0&&u>0;)for(i=Math.floor(i/2),r=Math.floor(r/2),e.x===O?l=i:e.x===M?l=o.width-i:l+=Math.floor(i/2),e.y===F?u=r:e.y===R?u=o.height-r:u+=Math.floor(r/2),s=a.length;s--&&!(a.length<2);)c=a[s][0]-o.position.left,p=a[s][1]-o.position.top,(e.x===O&&c>=l||e.x===M&&l>=c||e.x===L&&(l>c||c>o.width-l)||e.y===F&&p>=u||e.y===R&&u>=p||e.y===L&&(u>p||p>o.height-u))&&a.splice(s,1);o.position={left:a[0][0],top:a[0][1]}}return o},rect:function(t,e,n,i){return{width:Math.abs(n-t),height:Math.abs(i-e),position:{left:Math.min(t,n),top:Math.min(e,i)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(t,e,n,i,r){var o=B.polys._angles[r.abbrev()],s=0===o?0:n*Math.cos(o*Math.PI),a=i*Math.sin(o*Math.PI);return{width:2*n-Math.abs(s),height:2*i-Math.abs(a),position:{left:t+s,top:e+a},adjustable:S}},circle:function(t,e,n,i){return B.polys.ellipse(t,e,n,n,i)}},B.svg=function(t,n,r){for(var o,s,a,l,u,c,p,d,h,f=(i(e),n[0]),m=i(f.ownerSVGElement),g=f.ownerDocument,_=(parseInt(n.css("stroke-width"),10)||0)/2;!f.getBBox;)f=f.parentNode;if(!f.getBBox||!f.parentNode)return S;switch(f.nodeName){case"ellipse":case"circle":d=B.polys.ellipse(f.cx.baseVal.value,f.cy.baseVal.value,(f.rx||f.r).baseVal.value+_,(f.ry||f.r).baseVal.value+_,r);break;case"line":case"polygon":case"polyline":for(p=f.points||[{x:f.x1.baseVal.value,y:f.y1.baseVal.value},{x:f.x2.baseVal.value,y:f.y2.baseVal.value}],d=[],c=-1,l=p.numberOfItems||p.length;++c<l;)u=p.getItem?p.getItem(c):p[c],d.push.apply(d,[u.x,u.y]);d=B.polys.polygon(d,r);break;default:d=f.getBBox(),d={width:d.width,height:d.height,position:{left:d.x,top:d.y}}}return h=d.position,m=m[0],m.createSVGPoint&&(s=f.getScreenCTM(),p=m.createSVGPoint(),p.x=h.left,p.y=h.top,a=p.matrixTransform(s),h.left=a.x,h.top=a.y),g!==e&&"mouse"!==t.position.target&&(o=i((g.defaultView||g.parentWindow).frameElement).offset(),o&&(h.left+=o.left,h.top+=o.top)),g=i(g),h.left+=g.scrollLeft(),h.top+=g.scrollTop(),d},B.imagemap=function(t,e,n){e.jquery||(e=i(e));var r,o,s,a,l,u=(e.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),c=i('img[usemap="#'+e.parent("map").attr("name")+'"]'),p=i.trim(e.attr("coords")),d=p.replace(/,$/,"").split(",");if(!c.length)return S;if("polygon"===u)a=B.polys.polygon(d,n);else{if(!B.polys[u])return S;for(s=-1,l=d.length,o=[];++s<l;)o.push(parseInt(d[s],10));a=B.polys[u].apply(this,o.concat(n))}return r=c.offset(),r.left+=Math.ceil((c.outerWidth(S)-c.width())/2),r.top+=Math.ceil((c.outerHeight(S)-c.height())/2),a.position.left+=r.left,a.position.top+=r.top,a};var Te,qe='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>';i.extend(k.prototype,{_scroll:function(){var e=this.qtip.elements.overlay;e&&(e[0].style.top=i(t).scrollTop()+"px")},init:function(n){var r=n.tooltip;i("select, object").length<1&&(this.bgiframe=n.elements.bgiframe=i(qe).appendTo(r),n._bind(r,"tooltipmove",this.adjustBGIFrame,this._ns,this)),this.redrawContainer=i("<div/>",{id:U+"-rcontainer"}).appendTo(e.body),n.elements.overlay&&n.elements.overlay.addClass("qtipmodal-ie6fix")&&(n._bind(t,["scroll","resize"],this._scroll,this._ns,this),n._bind(r,["tooltipshow"],this._scroll,this._ns,this)),this.redraw()},adjustBGIFrame:function(){var t,e,n=this.qtip.tooltip,i={height:n.outerHeight(S),width:n.outerWidth(S)},r=this.qtip.plugins.tip,o=this.qtip.elements.tip;e=parseInt(n.css("borderLeftWidth"),10)||0,e={left:-e,top:-e},r&&o&&(t="x"===r.corner.precedance?[A,O]:[D,F],e[t[1]]-=o[t[0]]()),this.bgiframe.css(e).css(i)},redraw:function(){if(this.qtip.rendered<1||this.drawing)return this;var t,e,n,i,r=this.qtip.tooltip,o=this.qtip.options.style,s=this.qtip.options.position.container;return this.qtip.drawing=1,o.height&&r.css(D,o.height),o.width?r.css(A,o.width):(r.css(A,"").appendTo(this.redrawContainer),e=r.width(),1>e%2&&(e+=1),n=r.css("maxWidth")||"",i=r.css("minWidth")||"",t=(n+i).indexOf("%")>-1?s.width()/100:0,n=(n.indexOf("%")>-1?t:1)*parseInt(n,10)||e,i=(i.indexOf("%")>-1?t:1)*parseInt(i,10)||0,e=n+i?Math.min(Math.max(e,i),n):e,r.css(A,Math.round(e)).appendTo(s)),this.drawing=0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove(),this.qtip._unbind([t,this.qtip.tooltip],this._ns)}}),Te=B.ie6=function(t){return 6===ie.ie?new k(t):S},Te.initialize="render",q.ie6={"^content|style$":function(){this.redraw()}}})}(window,document),function(){function t(){}function e(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function n(t){return function(){return this[t].apply(this,arguments)}}var i=t.prototype,r=this,o=r.EventEmitter;i.getListeners=function(t){var e,n,i=this._getEvents();if(t instanceof RegExp){e={};for(n in i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n])}else e=i[t]||(i[t]=[]);return e},i.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},i.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},i.addListener=function(t,n){var i,r=this.getListenersAsObject(t),o="object"==typeof n;for(i in r)r.hasOwnProperty(i)&&-1===e(r[i],n)&&r[i].push(o?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(t){return this.getListeners(t),this},i.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},i.removeListener=function(t,n){var i,r,o=this.getListenersAsObject(t);for(r in o)o.hasOwnProperty(r)&&(i=e(o[r],n),-1!==i&&o[r].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},i.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},i.manipulateListeners=function(t,e,n){var i,r,o=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)o.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(r=e[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},i.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if(t instanceof RegExp)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(t,e){var n,i,r,o,s=this.getListenersAsObject(t);for(r in s)if(s.hasOwnProperty(r))for(i=s[r].length;i--;)n=s[r][i],n.once===!0&&this.removeListener(t,n.listener),o=n.listener.apply(this,e||[]),o===this._getOnceReturnValue()&&this.removeListener(t,n.listener);return this},i.trigger=n("emitEvent"),i.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},i.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return r.EventEmitter=o,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:r.EventEmitter=t}.call(this),!function(t){function e(e){var n=t.event;return n.target=n.target||n.srcElement||e,n}var n=document.documentElement,i=function(){};n.addEventListener?i=function(t,e,n){t.addEventListener(e,n,!1)}:n.attachEvent&&(i=function(t,n,i){t[n+i]=i.handleEvent?function(){var n=e(t);i.handleEvent.call(i,n)}:function(){var n=e(t);i.call(t,n)},t.attachEvent("on"+n,t[n+i])});var r=function(){};n.removeEventListener?r=function(t,e,n){t.removeEventListener(e,n,!1)}:n.detachEvent&&(r=function(t,e,n){t.detachEvent("on"+e,t[e+n]);try{delete t[e+n]}catch(i){t[e+n]=void 0}});var o={bind:i,unbind:r};"function"==typeof define&&define.amd?define("eventie/eventie",o):"object"==typeof exports?module.exports=o:t.eventie=o}(this),!function(t,e){"function"==typeof define&&define.amd?define("jquery.imagesloaded",["eventEmitter/EventEmitter","eventie/eventie"],function(n,i){return e(t,n,i)}):"object"==typeof exports?module.exports=e(t,require("wolfy87-eventemitter"),require("eventie")):t.imagesLoaded=e(t,t.EventEmitter,t.eventie)}(window,function(t,e,n){function i(t,e){for(var n in e)t[n]=e[n];return t}function r(t){return"[object Array]"===d.call(t)}function o(t){var e=[];if(r(t))e=t;else if("number"==typeof t.length)for(var n=0,i=t.length;i>n;n++)e.push(t[n]);else e.push(t);return e}function s(t,e,n){if(!(this instanceof s))return new s(t,e);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=o(t),this.options=i({},this.options),"function"==typeof e?n=e:i(this.options,e),n&&this.on("always",n),this.getImages(),u&&(this.jqDeferred=new u.Deferred);var r=this;setTimeout(function(){r.check()})}function a(t){this.img=t}function l(t){this.src=t,h[t]=this}var u=t.jQuery,c=t.console,p="undefined"!=typeof c,d=Object.prototype.toString;s.prototype=new e,s.prototype.options={},s.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;e>t;t++){var n=this.elements[t];"IMG"===n.nodeName&&this.addImage(n);var i=n.nodeType;if(i&&(1===i||9===i||11===i))for(var r=n.querySelectorAll("img"),o=0,s=r.length;s>o;o++){var a=r[o];this.addImage(a)}}},s.prototype.addImage=function(t){var e=new a(t);this.images.push(e)},s.prototype.check=function(){function t(t,r){return e.options.debug&&p&&c.log("confirm",t,r),e.progress(t),n++,n===i&&e.complete(),!0}var e=this,n=0,i=this.images.length;if(this.hasAnyBroken=!1,!i)return void this.complete();for(var r=0;i>r;r++){var o=this.images[r];o.on("confirm",t),o.check()}},s.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded;var e=this;setTimeout(function(){e.emit("progress",e,t),e.jqDeferred&&e.jqDeferred.notify&&e.jqDeferred.notify(e,t)})},s.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var e=this;setTimeout(function(){if(e.emit(t,e),e.emit("always",e),e.jqDeferred){var n=e.hasAnyBroken?"reject":"resolve";e.jqDeferred[n](e)}})},u&&(u.fn.imagesLoaded=function(t,e){var n=new s(this,t,e);return n.jqDeferred.promise(u(this))}),a.prototype=new e,a.prototype.check=function(){var t=h[this.img.src]||new l(this.img.src);if(t.isConfirmed)return void this.confirm(t.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var e=this;t.on("confirm",function(t,n){return e.confirm(t.isLoaded,n),!0}),t.check()},a.prototype.confirm=function(t,e){this.isLoaded=t,this.emit("confirm",this,e)};var h={};return l.prototype=new e,l.prototype.check=function(){if(!this.isChecked){var t=new Image;n.bind(t,"load",this),n.bind(t,"error",this),t.src=this.src,this.isChecked=!0}},l.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.prototype.onload=function(t){this.confirm(!0,"onload"),this.unbindProxyEvents(t)},l.prototype.onerror=function(t){this.confirm(!1,"onerror"),this.unbindProxyEvents(t)},l.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},l.prototype.unbindProxyEvents=function(t){n.unbind(t.target,"load",this),n.unbind(t.target,"error",this)},s}),define("require-css/css!qtip2/jquery.qtip.standard",[],function(){}),define("require-css/css!coffeescripts/plugins/qtip",[],function(){}),function(){var t=[].slice;define("config/qtip",["jquery","qtip","rollbar","jquery.imagesloaded","css!qtip2/jquery.qtip.standard","css!coffeescripts/plugins/qtip"],function(e,n){var i;return i=e.fn.qtip,e.extend(i.defaults.style,{classes:"qtip-tipsy"}),e.extend(i.defaults.style.tip,{width:12,height:6}),e.extend(i.defaults.show,{effect:function(){return e(this).fadeIn(50)}}),e.extend(i.defaults.hide,{effect:function(){return e(this).fadeOut(100)}}),e.extend(i.defaults.position,{my:"bottom center",at:"top center",viewport:e(window)}),e.fn.qtip=function(){var n,r,o,s;if(n=1<=arguments.length?t.call(arguments,0):[],o=n[0],"object"==typeof o){if(null!=o.defaultPosition&&(s=function(){switch(o.defaultPosition){case"top":return{my:"bottom center",at:"top center"};case"bottom":return{my:"top center",at:"bottom center"};case"right":return{my:"center left",at:"center right"};case"left":return{my:"center right",at:"center left"};default:throw new Error("Unrecognized default position: "+o.defaultPosition)}}(),o.position||(o.position={}),e.extend(o.position,s)),null!=o.activation)switch(o.show||(o.show={}),o.hide||(o.hide={}),o.activation){case"focus":o.show.event="focus",o.hide.event="blur";break;default:throw new Error("Unrecognized activation: "+o.activation)}null!=o.maxWidth&&(o.events||(o.events={}),r=o.events.show,o.events.show=function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],e(this).css("max-width",o.maxWidth),null!=r?r.apply(this,n):void 0})}return i.apply(this,n)},e.extend(e.fn.qtip,i),n})}.call(this),function(){define("global/hovercards",["jquery","qtip"],function(t){var e;return e="hovercards_hover",{init:function(){var n,i;return i={},n="a[data-type][data-id], img[data-type][data-id]",t(document).on("mouseenter",n,function(){var n,r,o,s,a;return 0!==t(this).closest(".qtip").length?!0:(a=t(this).data("type"),r=t(this).data("id"),o=function(n){return function(){return t(n).addClass(e)}}(this),s=function(n){return function(){return t(n).removeClass(e)}}(this),t(this).on("mouseenter",o).on("mouseleave",s),o(),i[a]||(i[a]={}),(n=i[a])[r]||(n[r]=t.get("/follows/tooltip",{type:a,id:r},null,"html")),i[a][r].done(function(n){return function(i){return t(n).qtip({overwrite:!1,maxWidth:"300px",position:{target:t(n).is("a")&&t(n).children("img").length>0?t(n).children("img").first():!1,my:"bottom center",at:"top center",adjust:{y:-3}},show:{solo:!0,ready:t(n).hasClass(e),delay:500},hide:{fixed:!0,delay:50,effect:!1},content:i}),s(),t(n).off("mouseenter",o).off("mouseleave",s())}}(this)))})}}})}.call(this),function(){var t=[].slice;define("lib/partials",["require","jquery","module"],function(e,n,i){return{classNames:function(t){var e,n,r,o,s,a,l,u,c,p,d;for(p=t.split("/"),s=p.pop(),n=p.join("/"),o=n.split(/[\/_]/),c="",l=0,u=o.length;u>l;l++)d=o[l],c+=d[0];return e=function(t){var e,n,i,r;for(r=0,e=n=0,i=t.length-1;i>=0?i>=n:n>=i;e=i>=0?++n:--n)r+=t.charAt(e).charCodeAt(0);return r%100},r="d"+c+e(n),a="f"+s.charAt(0)+s.charAt(s.length-1)+e(s),[i.config().root_class,r,a]},selector:function(t){var n;return n=e(i.id),"."+n.classNames(t).join(".")},rootSelector:function(){return"."+i.config().root_class},"with":function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],void e(["initializer"],function(t){return t["with"].apply(void 0,n)})}}})}.call(this),function(){define("global/jquery_migrate",["require","rollbar","jquery","underscore","lib/partials"],function(t,e,n,i){return{init:function(){return setInterval(function(){var t,r,o,s,a;if(null!=n.migrateWarnings){for(s=n.migrateWarnings,r=0,o=s.length;o>r;r++)a=s[r],t=["jQuery.browser is deprecated"],i.contains(t,a)||e.warn("JQMIGRATE: "+a);return"function"==typeof n.migrateReset?n.migrateReset():void 0}},5e3)}}})}.call(this),function(){define("global/media",["require"],function(t){return{init:function(){return t(["jquery","lib/media"],function(t,e){return e.detect(),t(window).resize(function(){return e.detect()})})}}})}.call(this),function(){define("global/tiptip",["jquery","qtip"],function(t){var e;return e={init:function(e){return null==e&&(e=document.body),t(e).find(".tiptip_right").qtip({defaultPosition:"right",maxWidth:"260px"}),t(e).find(".tiptip_left").qtip({defaultPosition:"left",maxWidth:"260px"}),t(e).find(".tiptip_bottom").qtip({defaultPosition:"bottom",maxWidth:"270px"}),t(e).find(".tiptip_top").qtip({defaultPosition:"top",maxWidth:"270px"}),t(e).find(".tiptip").qtip({defaultPosition:"top"}),t(e).find(".fast_tiptip").qtip({defaultPosition:"top",show:{effect:!1,delay:0},hide:{effect:!1}})}},window.TipTip=e,e})}.call(this),function(){define("global/translations",["rollbar","jquery"],function(t,e){return{init:function(){return setInterval(function(){return e("span.translation_missing").each(function(){var n;return e(this).data("translations_logged")?void 0:(n=e(this).attr("title"),t.warn(n),"undefined"!=typeof console&&null!==console&&console.warn(n),e(this).data("translations_logged",!0))})},1e4)}}})}.call(this),function(){define("global/recruiting_easter_egg",["lib/environment"],function(t){return{init:function(){return window.console&&!t.isDevelopment()?window.console.log("Do you have a great idea that would make AngelList better?  Want to implement it?  Were always hiring: https://angel.co/angellist/jobs"):void 0}}})}.call(this),function(){var t=[].slice;define("global/all",["./autosize","./event_queue","./facybox","./form","./hovercards","./jquery_migrate","./media","./tiptip","./translations","./recruiting_easter_egg"],function(){var e;return e=1<=arguments.length?t.call(arguments,0):[]})}.call(this),function(){define("main",["initializer","jquery","global/all"],function(t,e,n){return e(function(){var e,i,r,o;for(i=0,o=n.length;o>i;i++)e=n[i],e.init();return r=t.instance(),r.scan().listen()})})}.call(this),function(){define("lib/elements",["jquery"],function(t){return{loading:{wide:function(){return t('<div class="loader-repl"></div>')}},loading_image:function(){return t('<span class="loading_container"><img src="/images/shared/transparent-ajax-loader.gif" alt="Loading" class="loading" /></span>')},small_loading_image:function(){return t('<img id="dealFeed_loading" class="loading-icon-small" src="/images/shared/loading.gif" width="16" height="16">')}}})}.call(this),function(){var t=[].slice;define("mixpanel",["module","rollbar"],function(e,n){var i,r,o;o={},i=e.config().logging_enabled;for(r in window.mixpanel)"function"==typeof mixpanel[r]&&!function(e){return o[e]=function(){var r,o;r=1<=arguments.length?t.call(arguments,0):[];try{window.mixpanel[e].apply(window.mixpanel,r)}catch(s){throw o=s,n.error("Error in mixpanel."+e,{arguments:r,exception:o.message}),o}return i?("undefined"!=typeof console&&null!==console&&console.log("MP Tracking - "+e+" - "+r[0]),"undefined"!=typeof console&&null!==console?console.log(r):void 0):void 0}}(r);return o.track_with_callback=function(t,e,n){var i,r;return null==e&&(e={}),r=!1,i=function(){return r?void 0:(n(),r=!0)},window.setTimeout(i,3e3),o.track(t,e,i)},o})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("lib/syndicates_helpers",["jquery","backbone","underscore","lib/partials"],function(e,n,i,r){var o;return{SyndicateCarousel:o=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.syndicateModuleHolderClass="featured_syndicate_module_holder",i.prototype.getCarousel=function(){var t;return t=e.Deferred(),r["with"](this.$(r.selector("syndicates/leaderboard/syndicate_carousel")),function(){return function(e){return t.resolve(e)}}(this)),t.promise()},i.prototype.setExtraDataForSubmit=function(t){return this.extraData=t},i.prototype.initialize=function(){return this.getCarousel().done(function(t){return function(n){var i;return i=t.$("."+t.syndicateModuleHolderClass),n.on("selectedSyndicate",function(n){var o;return null==n&&(n={}),o=e.Deferred(),e.ajax({dataType:"json",url:n.featured_syndicate_url,data:t.extraData,success:function(t){return i.hasClass("with_content")?i.fadeOut(100,function(){return i.html(t.html).fadeIn(100,function(){return o.resolve()})}):i.addClass("with_content").hide().html(t.html).slideDown(150,function(){return o.resolve()})}}),o.done(function(){return r["with"](t.$(r.selector("syndicates/leaderboard/syndicate_card")),function(t){return t.featuredSyndicateShown({syndicate_id:n.syndicate_id})})})}),n.on("unselectedSyndicate",function(t){return null==t&&(t={}),i.slideUp(150,function(){return i.removeClass("with_content").html("")})})}}(this))},i}(n.View)}})}.call(this),function(){define("controllers/home",["jquery","lib/elements","google/analytics","mixpanel","global/tiptip","lib/syndicates_helpers","backbone"],function(t,e,n,i,r,o){var s;return s=function(t,e){return/utm_source/.test(t)?t:t+(/\?/.test(t)?"&":"?")+("utm_source="+e)},{index:function(e){var i,r;return t(this).is(".in_header")?(r=t(this).closest(".content_well").find(".home.index.in_content"),e("a.open_post_section").click(function(){return t(this).is(".opened")?(n.push(["_trackEvent","posts","home - clicked on 'cancel post' button"]),t(this).removeClass("opened").html("Add a Post"),r.find("#post_message").blur(),r.find(".post_section").slideUp("fast").find("form#new_post").trigger("reset")):(n.push(["_trackEvent","posts","home - clicked on 'add a post' button"]),t(this).addClass("opened").html("Cancel Post"),r.find(".post_section").slideDown("fast",function(){return r.find("#post_message").focus()}))})):t(this).is(".in_content")?(i=t(this).closest(".content_well").find(".home.index.in_header"),e(".post_section form#new_post").on("reset",function(){return setTimeout(function(e){return function(){return t(e).is(":visible")?i.find("a.open_post_section").click():void 0}}(this),500)})):t(this).is(".in_filters")?!1:void 0},featured:function(n){return t(".more-button").click(function(){var i,o;return i=n(".featured_container").data("page"),o=n(".featured_container").data("per_page"),t(this).html(e.loading_image()),t.ajax({url:"/home/featured",data:{page:i+1,per_page:o},dataType:"json",success:function(e){return function(s){var a,l;return a=t(s.html),l=a.filter(".startup_item").length,a.hide().appendTo(n(".featured_container")).slideDown(),n(".featured_container").data("page",i+1),r.init(a),t(e).html("More"),o>l?t(e).hide():void 0}}(this)})})},counts:function(e){return e(".counter_content").click(function(e){var n;return n=t(this).attr("href"),e.metaKey?open(n):window.location.href=n,!1})},notifications_bar:function(e,n){return null!=i&&i.track_links(".holder","homepage_bar click"),null!=i&&i.track_links(".holder .section a","homepage_bar click"),e(".holder, .holder a").click(function(e){var n;return n=t(e.target).closest(".holder").attr("href"),e.metaKey?open(n):setTimeout(function(){return window.location.href=n},300),!1}),n.data("loaded")||t.ajax({url:"/home/load_notification_bar",success:function(t){return t.html?(n.empty(),n.replaceWith(t.html)):void 0}}),e(".section").length>0?n.slideDown():void 0},uber_promo:function(e,n){return null!=i&&i.track_links("a.uber_logo","techstars promo - logo"),null!=i&&i.track_links("a.uber_cta","techstars promo - learn more button"),e(".dismiss").click(function(){return n.slideUp(200),t.post("/property",{name:"mcf-hide_techstars_promo",value:!0})})},featured_promo:function(){return null!=i&&i.track_links("a.featured_promo_card","featured promo - card"),null!=i?i.track_links("a.learn_more","featured promo - learn more button"):void 0},home_gs:function(e,r){var a;return n.push(["_trackPageview","/PV/home/logged_out"]),null!=i&&i.track_links("a.home_talent_candidates_button","home - post a job button - click"),null!=i&&i.track_links("a.home_talent_jobs_button","home - find a job button - click"),null!=i&&i.track_links("a.home_talent_jobs_link","home - view all jobs - click"),null!=i&&i.track_links("a.home_syndicates_button","home - find syndicates button - click"),null!=i&&i.track_links("a.home_syndicates_link","home - view all syndicates link - click"),null!=i&&i.track_links("a.home_fundraising_invest_button","home - find startups button - click"),null!=i&&i.track_links("a.home_fundraising_raise_button","home - raise funds button - click"),null!=i&&i.track_links("a.home_fundraising_link","home - view all fundraising startups - click"),t(".content_well a").each(function(e,n){return t(n).attr("href",s(t(n).attr("href"),"home_gs"))}),t(".content_well [data-url]").each(function(e,n){return t(n).attr("data-url",s(t(n).data("url"),"home_gs"))}),a=new o.SyndicateCarousel({el:r}),a.setExtraDataForSubmit({klass_for_rendered_partials:"for_home_page"})},headline:function(){return null!=i&&i.track_links("a.headline_raise","home - headline - raise"),null!=i&&i.track_links("a.headline_accelerators","home - headline - accelerators"),null!=i&&i.track_links("a.headline_recruiting","home - headline - recruiting"),null!=i&&i.track_links("a.headline_funds","home - headline - funds"),null!=i&&i.track_links("a.headline_syndicates","home - headline - syndicates"),null!=i&&i.track_links("a.headline_start_a_syndicate","home - headline - start a syndicate"),null!=i&&i.track_links("a.headline_jobs","home - headline - jobs"),null!=i&&i.track_links("a.headline_investors","home - headline - investors"),null!=i?i.track_links("a.headline_trending","home - headline - trending"):void 0
}}})}.call(this),function(){define("controllers/home/home_gs",["jquery"],function(){return{jobs_card:function(t,e){return e.click(function(){return window.location.href=e.data("jobs_url")})}}})}.call(this),function(){var t=[].slice;define("load",["module","require","jquery","underscore"],function(e,n,i,r){return function(o,s,a,l){var u,c;if(!r.isArray(o))throw new Error(e.id+"() only replaces the asynchronous form of require()");return u=i.Deferred(),c=s,r.isFunction(s)&&(c=function(){var e,n;return e=1<=arguments.length?t.call(arguments,0):[],n=s.apply(this,e),u.resolve(n),n}),n(o,c,a,l),u.promise()}})}.call(this),function(){define("modernizr",[],function(){return window.Modernizr})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("lib/dropdown",["jquery","backbone","underscore"],function(e,n,i){var r;return r=function(){function n(n,i,r){var o;this.toggle=n,this.menu=null!=i?i:e(".menu",this.toggle),this.options=null!=r?r:{},this._position_menu=t(this._position_menu,this),this._respond_to_menu_clicked=t(this._respond_to_menu_clicked,this),this._respond_to_toggle_clicked=t(this._respond_to_toggle_clicked,this),this._hide_menu=t(this._hide_menu,this),o={left:!0,opened_class:"opened",top:!1,over:!1,offset_top:0},this.options=e.extend({},o,this.options)}return n.prototype.bind=function(){return this.menu.length&&this.toggle.length?(this.toggle.on("click",this._respond_to_toggle_clicked),this.menu.on("click",this._respond_to_menu_clicked),e(window).on("resize",this._position_menu),this._position_menu(),this):void 0},n.prototype.unbind=function(){return this.prevent_hide_once=!1,this.toggle.off("click",this._respond_to_toggle_clicked),this.menu.off("click",this._respond_to_menu_clicked),e(window).off("resize",this._position_menu),this._hide_menu(),this},n.hideAll=function(){return this.trigger("hide")},n.prototype._hide_menu=function(){return this.prevent_hide_once||(this.menu.hide(),this.toggle.removeClass(this.options.opened_class),e("body").off("click",this._hide_menu),n.off("hide",this._hide_menu)),this.prevent_hide_once=!1,!0},n.prototype._respond_to_toggle_clicked=function(){return this.toggle.hasClass(this.options.opened_class)||(n.hideAll(),this._position_menu(),this.menu.show(),this.toggle.addClass(this.options.opened_class),this.prevent_hide_once=!0,e("body").on("click",this._hide_menu),n.on("hide",this._hide_menu)),!0},n.prototype._respond_to_menu_clicked=function(){return this.prevent_hide_once=!0},n.prototype._position_menu=function(){var t,e,n,i,r;return e=this.toggle.position(),r=this.options.top?e.top-this.menu.outerHeight()+(this.options.over?this.toggle.outerHeight():0):e.top+this.options.offset_top+(this.options.over?0:this.toggle.outerHeight()),t=this.options.left?e.left:e.left-this.menu.outerWidth()+this.toggle.outerWidth(),r+=null!=(n=this.options.adjust_top)?n:0,t+=null!=(i=this.options.adjust_left)?i:0,this.menu.css({position:"absolute",top:r,left:t})},n}(),i.extend(r,n.Events)})}.call(this),function(){define("lib/media",["underscore","backbone"],function(t,e){var n;if(null==window._mediaDependency)throw new Error("Media object must be defined in the document head");return t.extend(window._mediaDependency,e.Events),n=window._mediaDependency.detect,window._mediaDependency.detect=function(){var t;return t=n(),t&&window._mediaDependency.trigger("change"),t},window._mediaDependency})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/new_tagging",["models/base","lib/autocomplete"],function(e,n){var i;return i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.autocomplete=function(t,e){return new n(t,{selectCallback:function(e){return function(n){return t.val(n.item.display_name),e.set("new_tag_id",n.id),e.trigger("autocomplete")}}(this),queryOptions:{new_taggable_field:this.get("new_taggable_field"),new_taggable_type:this.get("new_taggable_type"),tag_type:e},tags:!0})},i}(e("NewTagging"))})}.call(this),define("require-css/css!coffeescripts/lib/transitional_autocomplete",[],function(){}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty,i=[].slice;define("lib/transitional_autocomplete",["jquery","backbone","underscore","models/new_tagging","lib/environment","lib/partials","css!coffeescripts/lib/transitional_autocomplete"],function(n,r,o,s,a,l){var u,c,p,d,h,f,m,g;return f=l.classNames("coffeescripts/lib/transitional_autocomplete"),g=o.template("<div class='"+f.join(" ")+' list_item <%- typeof containing_class === \'undefined\' ? \'\' : containing_class %>\'>\n  <div class="g-lockup small container">\n    <% if (typeof(image) !== \'undefined\' && image) { %>\n    <div class="photo">\n      <img src="<%- image %>" alt="<%- main_text %>"/>\n    </div>\n    <% } %>\n    <div class="text">\n      <div class="main"><%= main_text %></div>\n      <% if (typeof(detail_text) !== \'undefined\' && detail_text) { %>\n      <div class=\'detail\'><%= detail_text %></div>\n      <% } %>\n    </div>\n  </div>\n</div>'),m=function(t){return o.template("<div class='"+f.join(" ")+" add_item'>"+t+" <span class='matched_substring'><%- '\"' + term + '\"'%></span></div>")},u=function(r){function s(){return this.open=t(this.open,this),this.select=t(this.select,this),this.source=t(this.source,this),this.update_model=t(this.update_model,this),s.__super__.constructor.apply(this,arguments)}return e(s,r),s.prototype.request_options=function(){throw new Error("Subclasses must override")},s.prototype.render_item=function(){throw new Error("Subclasses must override")},s.prototype.update_model=function(t){var e,n;return"function"==typeof(null!=(e=this.model)?e.set_autocomplete_data:void 0)&&this.model.set_autocomplete_data(t),null!=(n=this.model)?n.trigger("autocomplete",t,this):void 0},s.prototype.initialize=function(t){return this.options=t},s.prototype.search=function(){return this.$el.autocomplete("search")},s.prototype.events=function(){return{click:"search"}},s.prototype.autocomplete_options=function(){return{autoFocus:!0,html:!0,delay:a.isDevelopment()?300:50,source:this.source,select:this.select,open:this.open,focus:this.focus}},s.prototype.widget_class=function(){return f.join(" ")+" container"},s.prototype.source=function(t,e){var r,o,s,a;return o=this.request_options(t.term),a=this,r=n.extend({},o,{success:function(){var n,r,s;return n=1<=arguments.length?i.call(arguments,0):[],null!=(r=o.success)&&r.apply(this,n),s=n[2],a.$el.is(":focus")&&a.__last_xhr===s&&a.$el.val()===t.term?e(a.process_response(n[0],t.term)):void 0}}),null!=(s=this.__last_xhr)&&s.abort(),this.__last_xhr=n.ajax(r)},s.prototype.focus=function(){return!1},s.prototype.select=function(t,e){return this.update_model(e.item.value),this.trigger("select",e.item.value,this,t),!1},s.prototype.open=function(t,e){return this.$el.autocomplete("widget").find(".ui-menu-item").attr("aria-label"," "),this.trigger("open",this,t,e)},s.prototype.process_response=function(t,e){var n,i;return i=function(){var i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],o.push(function(t){return function(n){return{value:n,label:t.render_item(n,e)}}}(this)(n));return o}.call(this)},s.prototype.delegateEvents=function(t){return s.__super__.delegateEvents.call(this,t),this.$el.autocomplete(this.autocomplete_options()),this.__autocomplete_initialized=!0,n(this.$el.autocomplete("widget")).addClass(this.widget_class())},s.prototype.undelegateEvents=function(t){return s.__super__.undelegateEvents.call(this,t),this.__autocomplete_initialized&&this.$el.autocomplete("destroy"),this.__autocomplete_initialized=!1},s.prototype.highlighted_text=function(t,e){var i,r;return e=o.escape(e),r=RegExp(""+n.ui.autocomplete.escapeRegex(e),"i"),i=r.exec(t),null!=i?t.replace(i[0],"<span class='matched_substring'>"+i[0]+"</span>"):t},s}(r.View),{BaseAutocomplete:u,render_item:g,SearchAutocomplete:p=function(n){function i(){return this.select=t(this.select,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.request_options=function(t){return{url:"/autocomplete/search",data:{query:t},dataType:"json",type:"get"}},i.prototype.select=function(t,e){return i.__super__.select.call(this,t,e),window.location=e.item.value.url,!1},i.prototype.more_template=function(t){return this._more_template||(this._more_template=m("Search for ")),this._more_template({term:t})},i.prototype.process_response=function(t,e){var n;return n=i.__super__.process_response.call(this,t.results,e),n.push({label:this.more_template(e),value:{url:"/search?q="+e}}),n},i.prototype.render_item=function(t,e){return g({image:null!=t.pic&&t.pic.length>0?t.pic:null,main_text:this.highlighted_text(t.name,e),detail_text:t.type,containing_class:"search"})},i}(u),TypedAutocomplete:h=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.more_template=function(t){return this._more_template||(this._more_template=m("Add new ")),this._more_template({term:t})},n.prototype.request_options=function(t){return{url:"/autocomplete/search",data:{query:t,types:this.options.types,include_exact_match:this.options.include_exact_match},dataType:"json",type:"get"}},n.prototype.process_response=function(t,e){var i;return i=n.__super__.process_response.call(this,t.results,e),this.options.canSelectUnmatchedQuery&&i.push({label:this.more_template(e),value:{unmatched:!0,query:e}}),i},n.prototype.render_item=function(t,e){return g({image:null!=t.pic&&t.pic.length>0?t.pic:null,main_text:this.highlighted_text(t.name,e),detail_text:t.type,containing_class:"search"})},n}(u),PeopleAndTagsAutocomplete:c=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.request_options=function(t){return{url:"/autocomplete/people_and_tags",data:{query:t,tag_types:this.options.tag_types},dataType:"json",type:"get"}},n.prototype.widget_class=function(){return n.__super__.widget_class.call(this)+" search"},n.prototype.render_item=function(t,e){return g({image:null!=t.pic&&t.pic.length>0?t.pic:null,main_text:this.highlighted_text(t.name,e),detail_text:t.type,containing_class:"search"})},n}(u),TagAutocomplete:d=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.request_options=function(t){return{url:"/autocomplete/new_tags",data:this.request_data(t),dataType:"json",type:"get"}},i.prototype.render_item=function(t,e){return g({image:null!=t.tag.pic&&t.tag.pic.length>0?t.tag.pic:null,main_text:this.main_text(t,e),detail_text:this.options.hide_detail_text?void 0:this.detail_text(t,e)})},i.prototype.request_data=function(t){var e,i;if(e={query:t},"function"==typeof(null!=(i=this.model)?i.autocomplete_parameters:void 0)&&n.extend(e,this.model.autocomplete_parameters()),null!=this.options.tag_type&&n.extend(e,{tag_type:this.options.tag_type}),null!=this.options.parameters&&n.extend(e,this.options.parameters),null==e.tag_type)throw new Error("Must provide a tag type. This can either come from the model, or be provided as an explicit tag_type parameter");return e},i.prototype.main_text=function(t,e){return this.highlighted_text(t.tag.display_name,e)},i.prototype.detail_text=function(t){return null!=t.tag.description?t.tag.description:null!=t.counts.User?1===t.counts.User?"1 follower":t.counts.User+" followers":null},i}(u),more_template:m}})}.call(this),function(){define("lib/flash",["jquery","lib/partials"],function(t,e){return function(n,i){return e["with"](t(e.selector("layouts/flashes")),function(t){return t.flash(n,i)})}})}.call(this),!function(t){"function"==typeof define&&define.amd?define("jquery.scrollTo",["jquery"],t):t(jQuery)}(function(t){function e(e){return t.isFunction(e)||"object"==typeof e?e:{top:e,left:e}}var n=t.scrollTo=function(e,n,i){return t(window).scrollTo(e,n,i)};return n.defaults={axis:"xy",duration:parseFloat(t.fn.jquery)>=1.3?0:1,limit:!0},n.window=function(){return t(window)._scrollable()},t.fn._scrollable=function(){return this.map(function(){var e=this,n=!e.nodeName||-1!=t.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!n)return e;var i=(e.contentWindow||e).document||e.ownerDocument||e;return/webkit/i.test(navigator.userAgent)||"BackCompat"==i.compatMode?i.body:i.documentElement})},t.fn.scrollTo=function(i,r,o){return"object"==typeof r&&(o=r,r=0),"function"==typeof o&&(o={onAfter:o}),"max"==i&&(i=9e9),o=t.extend({},n.defaults,o),r=r||o.duration,o.queue=o.queue&&o.axis.length>1,o.queue&&(r/=2),o.offset=e(o.offset),o.over=e(o.over),this._scrollable().each(function(){function s(t){u.animate(p,r,o.easing,t&&function(){t.call(this,c,o)})}if(null!=i){var a,l=this,u=t(l),c=i,p={},d=u.is("html,body");switch(typeof c){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(c)){c=e(c);break}if(c=d?t(c):t(c,this),!c.length)return;case"object":(c.is||c.style)&&(a=(c=t(c)).offset())}var h=t.isFunction(o.offset)&&o.offset(l,c)||o.offset;t.each(o.axis.split(""),function(t,e){var i="x"==e?"Left":"Top",r=i.toLowerCase(),f="scroll"+i,m=l[f],g=n.max(l,e);if(a)p[f]=a[r]+(d?0:m-u.offset()[r]),o.margin&&(p[f]-=parseInt(c.css("margin"+i))||0,p[f]-=parseInt(c.css("border"+i+"Width"))||0),p[f]+=h[r]||0,o.over[r]&&(p[f]+=c["x"==e?"width":"height"]()*o.over[r]);else{var _=c[r];p[f]=_.slice&&"%"==_.slice(-1)?parseFloat(_)/100*g:_}o.limit&&/^\d+$/.test(p[f])&&(p[f]=p[f]<=0?0:Math.min(p[f],g)),!t&&o.queue&&(m!=p[f]&&s(o.onAfterFirst),delete p[f])}),s(o.onAfter)}}).end()},n.max=function(e,n){var i="x"==n?"Width":"Height",r="scroll"+i;if(!t(e).is("html,body"))return e[r]-t(e)[i.toLowerCase()]();var o="client"+i,s=e.ownerDocument.documentElement,a=e.ownerDocument.body;return Math.max(s[r],a[r])-Math.min(s[o],a[o])},n}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty,i=[].slice;define("controllers/layouts",["load","modernizr","backbone","underscore","jquery","lib/dropdown","lib/media","lib/partials","lib/transitional_autocomplete","lib/flash","google/analytics","mixpanel","jquery.scrollTo"],function(n,r,o,s,a,l,u,c,p,d,h,f){var m,g,_;return g=function(t){return t>99?"99+":t},_=function(t,e,n){var i;return n>0?(i=g(n),t(".notification_counter."+e).text(i).show(),t("."+e+"_image").addClass("active")):void 0},m=function(n){function i(){return this.unload=t(this.unload,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.initialize=function(t){return this.$navbar=t.$navbar,this.$original=this.$el.children(),this.$spinner=a("<img>").attr("src","/images/shared/loading.gif"),this.tokens=[],this.$navbar.on("click focus",this.unload),this.$navbar.css("min-height",this.$navbar.css("height")),this.blinkTimeout=setTimeout(function(t){return function(){return f.track("a-bar: blinked"),t.$el.effect("pulsate",{times:2},1e3)}}(this),1e4),this.fadeTimeout=setTimeout(function(t){return function(){return f.track("a-bar: timeout"),t.reset(!1)}}(this),2e4),f.track("a-bar: load"),this.next()},i.prototype.events={"click a.a_bar":"submit"},i.prototype.clearTimeouts=function(){return clearTimeout(this.blinkTimeout),clearTimeout(this.fadeTimeout)},i.prototype.unload=function(){return 0===this.tokens.length?this.unloaded=!0:void 0},i.prototype.render=function(t){return f.track("a-bar: show"),this.$el.children().wrapAll('<div class="wrap" />'),this.$el.find(".wrap").fadeOut(200,function(e){return function(){return e.$el.children().detach(),t.hide().appendTo(e.$el).fadeIn(200)}}(this))},i.prototype.submit=function(t){return this.clearTimeouts(),this.$el.find(".notification .inner").fadeOut(200,function(e){return function(){return e.$el.find(".notification").html(e.$spinner.hide()),e.$spinner.fadeIn(200,function(){var n;if(f.track("a-bar: click"),n={url:a(t.target).attr("href"),type:"POST"},a(t.target).hasClass("delete"))n.data={_method:"delete"},f.track("a-bar: click delete");else{if(a(t.target).hasClass("dismiss"))return a.cookie("a-bar-dismiss",1,{expires:5,path:"/"}),f.track("a-bar: dismiss"),a.ajax(n),e.clearTimeouts(),e.reset(!1),!1;f.track("a-bar: click confirm")}return a.ajax(n),e.next()}).css("display","inline-block")}}(this)),!1},i.prototype.reset=function(t){return null==t&&(t=!0),t&&this.$el.find(".notification").html("<span>Thank you!</span>"),setTimeout(function(t){return function(){return t.$el.children().fadeOut(500,function(){return t.$el.html(t.$original),t.$original.hide().fadeIn()})}}(this),t?2e3:5)},i.prototype.next=function(){return a.ajax(this.$el.data("confirmation_url"),{data:{seen:this.tokens.join(" ")},success:function(t){return function(e){return t.unloaded||!a(e).filter("div").data("token")?(f.track("a-bar: unload"),t.clearTimeouts()):(t.tokens.push(a(e).filter("div").data("token")),t.render(a(e).filter("*")))}}(this),error:function(t){return function(){return t.tokens.length>0?(f.track("a-bar: complete"),t.reset()):(f.track("a-bar: empty"),t.clearTimeouts())}}(this)})},i}(o.View),{processing:function(i){var s,l;return s=function(o){function s(){return this.recomputeDimensions=t(this.recomputeDimensions,this),this._$detailsContent=t(this._$detailsContent,this),this._detailsJsp=t(this._detailsJsp,this),this._listJsp=t(this._listJsp,this),this.toggleControls=t(this.toggleControls,this),this.hideControls=t(this.hideControls,this),this.showControls=t(this.showControls,this),this.hideDetails=t(this.hideDetails,this),this.showDetails=t(this.showDetails,this),this.scrollDetailsTo=t(this.scrollDetailsTo,this),this.scrollListTo=t(this.scrollListTo,this),this.scrollListToTop=t(this.scrollListToTop,this),this.detailsSizeChanged=t(this.detailsSizeChanged,this),this.changeDetails=t(this.changeDetails,this),this.canToggleControls=t(this.canToggleControls,this),this.canToggleDetails=t(this.canToggleDetails,this),s.__super__.constructor.apply(this,arguments)}return e(s,o),s.prototype.initialize=function(t){var e;return this.recomputeDimensions(),a(window).on("resize",this.recomputeDimensions),e=function(t){return function(){var e,n,i;return i=null!=t._listJsp()?t._listJsp().getContentPositionY():t.$("> .container > .list > .content").scrollTop(),0>=i&&(i=-parseInt(t.$("> .container > .list").css("margin-top"))),0>=i&&(i=Math.max(a(window).scrollTop()-t.$("> .container").offset().top,0)),t.canToggleDetails()?(null!=(e=t._detailsJsp())&&e.destroy(),null!=(n=t._listJsp())&&n.destroy(),t.hideDetails(),t.hideControls(),t.recomputeDimensions(),a(window).scrollTo(t.$("> .container").offset().top+i)):(t.hideDetails(),t.hideControls(),t._$detailsContent().show())}}(this),e(),u.on("change",e),this.$("> .container > .list").removeClass("loading"),null==t.swipesActive&&(t.swipesActive=!0),r.touch&&n(["jquery.event.swipe"],function(t){return function(){return t.$("> .container > .details > .content").on("movestart",function(t){return t.distX>t.distY&&t.distX<-t.distY||t.distX<t.distY&&t.distX>-t.distY?t.preventDefault():void 0}).on("swiperight",function(){return t.hideDetails()})}}(this)),this.recomputeDimensions()},s.prototype.canToggleDetails=function(){return u.isHandheld()},s.prototype.canToggleControls=function(){return!u.isDesktop()&&this.$el.hasClass("with_controls")},s.prototype.changeDetails=function(t){var e,n,i;return this.$("> .container > .details").removeClass("with_error"),null!=(i=this._lastChangeDetails)&&i.reject(),e=a.Deferred(),this._lastChangeDetails=e,a.when(t).always(function(){return function(){return e.resolve()}}(this)),n=a.Deferred(),this._$detailsContent().fadeOut("fast",function(t){return function(){return t.$("> .container > .details ").addClass("loading"),n.resolve()}}(this)),this.showDetails(),a.when(n,e).done(function(e){return function(){return a.when(t).done(function(t){var n;return e.$("> .container > .details").removeClass("loading"),e._$detailsContent().html(t),e._$detailsContent().fadeIn("fast"),null!=(n=e._detailsJsp())?n.reinitialise():void 0}).fail(function(){return e.$("> .container > .details").removeClass("loading").addClass("with_error")}).always(e.deatilsSizeChanged)}}(this))},s.prototype.detailsSizeChanged=function(){var t;return null!=(t=this._detailsJsp())?t.reinitialise():void 0},s.prototype.scrollListToTop=function(){return null!=this._listJsp()?this._listJsp().scrollToY(0,!0):this.canToggleDetails()?a(window).scrollTo(this.$("> .container > .list")):this.$("> .container > .list > .content").scrollTo(0)},s.prototype.scrollListTo=function(t){return null!=this._listJsp()?this._listJsp().scrollToElement(t,!0,!0):this.canToggleDetails()?a(window).scrollTo(t):this.$("> .container > .list > .content").scrollTo(t)},s.prototype.scrollDetailsTo=function(t){return null!=this._detailsJsp()?this._detailsJsp().scrollToElement(t,!0,!0):this.canToggleDetails()?a(window).scrollTo(t):this.$("> .container > .details > .content").scrollTo(t)},s.prototype.showDetails=function(){var t,e;return this.canToggleDetails()?(this._$detailsContent().show(),e=a(window).scrollTop(),t=this.$("> .container").offset().top-e,0>t&&(this.$("> .container > .list").css("margin-top",t+"px"),a(window).scrollTo(this.$("> .container"))),this.$("> .container > .list").css("max-height",a(window).height()-Math.min(t,0)),this.$el.removeClass("show_controls").addClass("show_details")):void 0},s.prototype.hideDetails=function(){var t;return t=parseInt(this.$("> .container > .list").css("margin-top")),this.$("> .container > .list").css("margin-top",0),this.$("> .container > .list").css("max-height","none"),this.canToggleDetails()&&(this.trigger("hide_details"),this._$detailsContent().fadeOut("fast"),this.$el.removeClass("show_controls").removeClass("show_details"),0>t)?a(window).scrollTo(this.$("> .container").offset().top-t):void 0},s.prototype.showControls=function(){return this.canToggleControls()?(this.canToggleDetails()&&this.$("> .container > .list, > .container > .details").css("max-height",a(window).height()-this.$("> .container").offset().top+"px"),this.$el.removeClass("show_details").addClass("show_controls")):void 0},s.prototype.hideControls=function(){return this.$("> .container > .list, > .container > .details ").css("max-height","none"),this.canToggleControls()?this.$el.removeClass("show_controls").removeClass("show_current"):void 0},s.prototype.toggleControls=function(){return this.$el.hasClass("show_controls")?this.hideControls():this.showControls()},s.prototype._listJsp=function(){return this.$("> .container > .list > .content").data("jsp")},s.prototype._detailsJsp=function(){return this.$("> .container > .details > .content").data("jsp")},s.prototype._$detailsContent=function(){return(null!=this._detailsJsp()?this._detailsJsp().getContentPane():this.$("> .container > .details > .content")).children(".wrapper")},s.prototype.recomputeDimensions=function(){var t,e,n;return this.canToggleDetails()?this.$("> .container > .list > .content, > .container > .details > .content").height("auto"):(t=a("body").height()-this.$("> .container").offset().top-a("#footer").height(),t=Math.max(t,this.$("> .container > .controls").outerHeight()),this.$("> .container > .list > .content, > .container > .details > .content").each(function(){return i(this).height(t+i(this).innerHeight()-i(this).outerHeight())})),null!=(e=this._listJsp())&&e.reinitialise(),null!=(n=this._detailsJsp())?n.reinitialise():void 0},s}(o.View),l=new s({el:this}),i("> .container > .details > .error.default").on("click .back",function(){return function(){return l.hideDetails()}}(this)),l},off_canvas_controls:function(n){var i,r;return i=function(n){function i(){return this.toggleControls=t(this.toggleControls,this),this.hideControls=t(this.hideControls,this),this.showControls=t(this.showControls,this),this.initialize=t(this.initialize,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.initialize=function(){var t;return t=function(t){return function(){var e;return e=t.$("> .container > .controls"),e.hasClass("fixed")?e.removeClass("fixed").css("width","").width(e.width()).addClass("fixed"):e.css("width","")}}(this),a(window).on("resize",t)},i.prototype.canToggleControls=function(){return u.isHandheld()},i.prototype.showControls=function(){return this.canToggleControls()?this.$el.removeClass("controls_hidden").addClass("controls_visible"):void 0},i.prototype.hideControls=function(){return this.canToggleControls()?this.$el.removeClass("controls_visible").addClass("controls_hidden"):void 0},i.prototype.toggleControls=function(){return this.$el.hasClass("controls_visible")?this.hideControls():this.showControls()},i}(o.View),r=new i({el:this}),n("> .glass_container > .glass").on("click",function(){return function(){return r.hideControls()}}(this)),r},off_canvas_controls_toggle:function(t,e){var n;if(n=a(c.selector("layouts/off_canvas_controls")),1!==n.length)throw new Error("Cannot understand DOM");return e.on("click",function(){return c["with"](n,function(t){return t.toggleControls()})})},profile:function(){var t;return new(t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.toggleSidebar=function(t){return t?this.$el.removeClass("hide_sidebar").addClass("show_sidebar"):this.$el.removeClass("show_sidebar").addClass("hide_sidebar")},n.prototype.replaceMain=function(t){var e;return this._replaceMainDeferred=a.Deferred(),e=this._replaceMainDeferred,a.when(t).done(function(t){return function(){var n;return n=1<=arguments.length?i.call(arguments,0):[],e===t._replaceMainDeferred?e.resolveWith(t,n):void 0}}(this)).fail(function(t){return function(){var n;return n=1<=arguments.length?i.call(arguments,0):[],e===t._replaceMainDeferred?e.rejectWith(t,n):void 0}}(this)),this.$("> .content > .panes_container > .panes_grid > .main").addClass("loading"),a.when(e).always(function(t){return function(){return t.$("> .content > .panes_container > .panes_grid > .main").removeClass("loading")}}(this)).done(function(t){return function(e){return t.$("> .content > .panes_container").removeClass("error").addClass("no_error"),t.$("> .content > .panes_container > .panes_grid > .main").empty().append(e)}}(this)).fail(function(t){return function(){return t.$("> .content > .panes_container").addClass("error").removeClass("no_error")}}(this))},n.prototype.replaceSidebar=function(t){return this.$("> .content > .panes_container > .panes_grid > .sidebar").empty().append(t)},n}(o.View))({el:this})},tabbed_layout:function(t,e){return function(){var t,n,i,r,o,s,c;return t=e.children(".content").children(".content_well").children(".content_well_header"),0!==t.length?(r=null,i=e.children(".content").children(".left_bar").children(".convertible_nav"),c=t.find(".more"),0===c.length&&i.length>0&&(s=t.find(".title"),s.length>0&&(c=a('<div class="more">&#9662;</div>'),c=c.insertAfter(s))),n=null,i.length>0&&c.length>0?(o=function(){return function(){return null!=r&&r.unbind(),null!=n&&n.remove(),u.isHandheld()?(n=a('<div class="dropdown"></div>').appendTo(t),i.clone(!0).appendTo(n),r=new l(c,n),r.bind()):void 0}}(this),u.on("change",o),o()):void 0):void 0}()},nav:function(t,e){return t(".searchInput").on("focus",function(){return t(this).closest("form").addClass("focus")}).on("blur",function(){return t(this).closest("form").removeClass("focus")}),new p.SearchAutocomplete({el:t(".searchInput")}),t(".searchInput").autocomplete("option","position",{my:"left top",at:"left bottom",of:t(".searchForm")}),t(".mobileSearchLink").on("click",function(){return t(".mobileSearchContainer").toggle()}),u.on("change",function(){return t(".mobileSearchContainer").hide()}),new p.SearchAutocomplete({el:t(".mobileSearchInput")}),a(document).on("keydown",function(e){return 191===e.which&&(a(":focus").is(":input")||a(":focus").prop("contenteditable")||(t(".searchInput").focus(),a(document).trigger("close.facybox"),e.preventDefault())),!0}),setTimeout(function(){return a.get("/home/counts",function(e){return e.notifications>0&&t(".notificationsCounter").show().text(e.notifications),e.messages>0?t(".messageCounter").show().text(e.messages):void 0})},100),t(".moreDropdown").length>0&&new l(t(".moreLink"),t(".moreDropdown")).bind(),t(".navLinks").length>0&&(new l(t(".userPhoto"),t(".navLinks"),{left:!1,adjust_left:0}).bind(),n(["models/user","models/repository"],function(e,n){var i,r,o,s;if(r=n.get(e),s=t(".navLinks").data("user_id"),null==s)throw new Error("User ID not given");return o=r.bootstrap(s),i=function(){return o.has("slug_url")&&t("a.profile").attr("href",o.get("slug_url")),o.has("avatar")?t(".userPhoto img").attr("src",o.get("avatar")):void 0},i(),o.on("change",i)})),u.isDesktop()&&t("> .primaryContainer").data("confirmation_url")&&!a.cookie("a-bar-dismiss")?new m({el:t("> .primaryContainer"),$navbar:e}):void 0},env_top_panel:function(t,e){var n,i,r,o,s,u;for(u=function(){var e,n;return e=t(".expand").is(":visible"),n=t(".expand").css("width","auto").show().width(),t(".expand").toggle(e),t(".expand").css("width",n+1)},u(),a(window).on("resize",u),t(".set_temp_login").click(function(t){return a(t.target).closest("form").ajaxSubmit({success:function(){return function(){var e;return e=a(t.target).closest(".row"),e.find(".not_temporary").hide(),e.find(".temporary").show()}}(this)})}),t(".environment").click(function(){return t(this).css("margin-right","-1px"),t(".expand").toggle({animation:"fold",horizFirst:!0,size:1},function(e){return function(){return t(e).css("margin-right","0")}}(this)),e.toggleClass("expanded"),t("#sign_in_as_field").focus(),!1}),o=["graph-menu","social-menu","transactions-menu","email-menu","more-menu","devops-menu"],s=[],n=0,i=o.length;i>n;n++)r=o[n],s.push(new l(t("."+r),t("."+r+" .submenu"),{left:!0,adjust_top:-37,adjust_left:-147}).bind());return s},dickbar:function(t,n){var i;return new(i=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.initialize=function(){return this.$el.hasClass("uk_accreditation")&&null!=f&&f.track("dbar - uk_accreditation show"),this.$el.hasClass("angel_profile_cta")&&(null!=f&&f.track("dbar - /apply CTA",{stub_profile:this.$(".inner").data("stub_profile")}),null!=f&&f.track_links(".track_link","dbar - click /apply CTA")),this.$el.hasClass("yearbook")&&null!=f&&f.track_links(".track_link","dbar:yearbook"),this.$el.hasClass("uk_promo")&&null!=f?f.track_links(".track_link","dbar:uk_promo"):void 0},i.prototype.hide=function(){return this.$el.slideUp(200)},i.prototype.events=function(){return{"click .js-acceleratorHide":function(e){return t(e.currentTarget).closest("form").ajaxSubmit(),this.$el.hide()},"click .dbar_hide":function(t){var e;return t.stopPropagation(),null!=f&&f.track("dbar - hide"),this.hide(),e=this.$el.hasClass("kano")?"/people/hide_kano":this.$el.hasClass("angel_profile_cta")?"/people/hide_latent_investor_dbar":this.$el.hasClass("uk_promo")?"/people/hide_uk_promo":this.$el.hasClass("backup-email")?"/people/hide_backup_email_dbar":"/people/hide_dbar",a.ajax({url:e,type:"post"})},"click .in_uk":function(){return null!=f&&f.track("dbar - uk_accreditation:yes"),c["with"](this.$(c.selector("angel_profiles/accreditation_popover")),function(t){return function(e){return e.launchPopover(),e.on("done",function(){return null!=f&&f.track("dbar - uk_accreditation:yes:complete"),e.closePopover(),t.hide(),d("Thank you, we've recorded your U.K. accreditation status")})}}(this))},"click .not_in_uk":function(){return null!=f&&f.track("dbar - uk_accreditation:no"),this.$(".not_uk_form form").ajaxSubmit({dataType:"json",success:function(t){return function(){return null!=f&&f.track("dbar - uk_accreditation:no:complete"),t.hide(),d("Thank you for confirming that your primary residence is not in the U.K.")
}}(this)})}}},i}(o.View))({el:n})},flashes:function(t,e){var n;return t("> .js-popover").length>0?(n=t("> .js-popover"),n.find('[data-modal="true"]').length>0&&(a.facybox.settings.modal=!0),a.facybox.loading(),a.facybox.reveal(n),n.find(".focus").focus()):t("> .js-container").slideDown("fast"),{flash:function(n,i){return null==i&&(i=null),e.removeClass("error").addClass("normal"),t(".flash").remove(),d=a('<div class="notice" />').html(n),t("> .js-container").append(d),d.addClass(e.data("flash_class")).hide(),d.slideDown(),null!=i?s.delay(function(){return d.slideUp("fast",function(){return d.remove()})},i):void 0}}},game:function(t){return t(".navLinks").length>0?new l(t(".username"),t(".navLinks"),{left:!1,adjust_left:0}).bind():void 0},footer_logged_out:function(){return null!=f&&f.track_links(".bf-item.trending","footer - trending"),null!=f&&f.track_links(".bf-item.syndicates","footer - syndicates"),null!=f&&f.track_links(".bf-item.funds","footer - funds"),null!=f&&f.track_links(".bf-item.recruiting","footer - recruiting"),null!=f&&f.track_links(".bf-item.jobs","footer - jobs"),null!=f?f.track_links(".bf-item.raise","footer - raise"):void 0}}})}.call(this),function(){define("lib/string",["module","require","underscore"],function(t,e,n){return{simple_format:function(t){return t=t.replace(/\r\n?/,"\n"),t=$.trim(t),t.length>0&&(t=t.replace(/\n\n+/g,"</p><p>"),t=t.replace(/\n/g,"<br />"),t="<p>"+t+"</p>"),t},auto_link:function(t,e){var i,r,o,s;null==e&&(e={}),o=/(?:([\w+.:-]+:)(?:\/|\&#x2F\;)(?:\/|\&#x2F\;)|(www\.))([^\s<]+)/gi,r="";for(i in e)s=e[i],r+=" "+n.escape(i)+"='"+n.escape(s)+"'";return t.replace(o,function(t,e,n,i){var o,s,a,l;return i=i.replace(/&#x2F;/g,"/"),s=/([^\w]*)$/.exec(i),l=s[0],o=s[1],i=i.substring(0,i.length-o.length),a="/",0===o.indexOf(a)&&(o=o.substring(a.length),i+=a),o=o.replace(/\//g,"&#x2F;"),t=t.substring(0,t.length-o.length),"<a href='"+(e||"http:")+"//"+(n||"")+i+"'"+r+">"+t+"</a>"+o})},link_and_format:function(i){var r;return r=e(t.id),r.auto_link(r.simple_format(n.escape(i)),{target:"_blank"})},truncate_on_word_boundary:function(t,e,n){var i;return null==e&&(e=30),null==n&&(n="..."),t.length>e?(i=e-n.length,i=t.substr(0,i+1).lastIndexOf(" "),0>i&&(i=0),t.substr(0,i)+"..."):t.toString()},number_to_human:function(t,e){var i,r,o,s,a,l;return null==e&&(e={}),i=[12,9,6,3],r={12:"T",9:"B",6:"M",3:"K"},s=0!==t?Math.floor(Math.log(Math.abs(t))/Math.LN10):0,o=n.find(i,function(t){return s>=t})||0,t/=Math.pow(10,o),l=r[o]||"",a=e.precision||0,""+parseFloat(t).toFixed(a)+l},number_with_delimiter:function(t,e){var n;return null==e&&(e={}),n=t.toString().split("."),n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),n.join(".")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/slug",["models/base"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(e("Slug"))})}.call(this),function(){!function(t){return"function"==typeof define&&define.amd?define("jquery.caret",["jquery"],t):t(window.jQuery)}(function(t){var e,n,i,r,o,s,a,l,u,c,p;return c="caret",e=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.setPos=function(){return this.domInputor},e.prototype.getIEPosition=function(){return t.noop()},e.prototype.getPosition=function(){return t.noop()},e.prototype.getOldIEPos=function(){var t,e;return e=a.selection.createRange(),t=a.body.createTextRange(),t.moveToElementText(this.domInputor),t.setEndPoint("EndToEnd",e),t.text.length},e.prototype.getPos=function(){var t,e,n;return(n=this.range())?(t=n.cloneRange(),t.selectNodeContents(this.domInputor),t.setEnd(n.endContainer,n.endOffset),e=t.toString().length,t.detach(),e):a.selection?this.getOldIEPos():void 0},e.prototype.getOldIEOffset=function(){var t,e;return t=a.selection.createRange().duplicate(),t.moveStart("character",-1),e=t.getBoundingClientRect(),{height:e.bottom-e.top,left:e.left,top:e.top}},e.prototype.getOffset=function(){var e,n,i,r;if(u.getSelection&&(i=this.range())){if(i.endOffset-1<0)return null;e=i.cloneRange(),e.setStart(i.endContainer,i.endOffset-1),e.setEnd(i.endContainer,i.endOffset),r=e.getBoundingClientRect(),n={height:r.height,left:r.left+r.width,top:r.top},e.detach()}else a.selection&&(n=this.getOldIEOffset());return n&&!l&&(n.top+=t(u).scrollTop(),n.left+=t(u).scrollLeft()),n},e.prototype.range=function(){var t;return u.getSelection?(t=u.getSelection(),t.rangeCount>0?t.getRangeAt(0):null):void 0},e}(),n=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.getIEPos=function(){var t,e,n,i,r,o,s;return e=this.domInputor,o=a.selection.createRange(),r=0,o&&o.parentElement()===e&&(i=e.value.replace(/\r\n/g,"\n"),n=i.length,s=e.createTextRange(),s.moveToBookmark(o.getBookmark()),t=e.createTextRange(),t.collapse(!1),r=s.compareEndPoints("StartToEnd",t)>-1?n:-s.moveStart("character",-n)),r},e.prototype.getPos=function(){return a.selection?this.getIEPos():this.domInputor.selectionStart},e.prototype.setPos=function(t){var e,n;return e=this.domInputor,a.selection?(n=e.createTextRange(),n.move("character",t),n.select()):e.setSelectionRange&&e.setSelectionRange(t,t),e},e.prototype.getIEOffset=function(t){var e,n,i,r;return n=this.domInputor.createTextRange(),t||(t=this.getPos()),n.move("character",t),i=n.boundingLeft,r=n.boundingTop,e=n.boundingHeight,{left:i,top:r,height:e}},e.prototype.getOffset=function(e){var n,i,r;return n=this.$inputor,a.selection?(i=this.getIEOffset(e),i.top+=t(u).scrollTop()+n.scrollTop(),i.left+=t(u).scrollLeft()+n.scrollLeft(),i):(i=n.offset(),r=this.getPosition(e),i={left:i.left+r.left-n.scrollLeft(),top:i.top+r.top-n.scrollTop(),height:r.height})},e.prototype.getPosition=function(t){var e,n,r,o,s,a;return e=this.$inputor,r=function(t){return t.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},void 0===t&&(t=this.getPos()),a=e.val().slice(0,t),o="<span>"+r(a)+"</span>",o+="<span id='caret'>|</span>",s=new i(e),n=s.create(o).rect()},e.prototype.getIEPosition=function(t){var e,n,i,r,o;return i=this.getIEOffset(t),n=this.$inputor.offset(),r=i.left-n.left,o=i.top-n.top,e=i.height,{left:r,top:o,height:e}},e}(),i=function(){function e(t){this.$inputor=t}return e.prototype.css_attr=["overflowY","height","width","paddingTop","paddingLeft","paddingRight","paddingBottom","marginTop","marginLeft","marginRight","marginBottom","fontFamily","borderStyle","borderWidth","wordWrap","fontSize","lineHeight","overflowX","text-align"],e.prototype.mirrorCss=function(){var e,n=this;return e={position:"absolute",left:-9999,top:0,zIndex:-2e4,"white-space":"pre-wrap"},t.each(this.css_attr,function(t,i){return e[i]=n.$inputor.css(i)}),e},e.prototype.create=function(e){return this.$mirror=t("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(e),this.$inputor.after(this.$mirror),this},e.prototype.rect=function(){var t,e,n;return t=this.$mirror.find("#caret"),e=t.position(),n={left:e.left,top:e.top,height:t.height()},this.$mirror.remove(),n},e}(),r={contentEditable:function(t){return!(!t[0].contentEditable||"true"!==t[0].contentEditable)}},s={pos:function(t){return t||0===t?this.setPos(t):this.getPos()},position:function(t){return a.selection?this.getIEPosition(t):this.getPosition(t)},offset:function(e){var n,i;return i=this.getOffset(e),l&&(n=t(l).offset(),i.top+=n.top,i.left+=n.left),i}},a=null,u=null,l=null,p=function(t){return l=t,u=t.contentWindow,a=t.contentDocument||u.document},o=function(e,n){var i,r;if(t.isPlainObject(n)&&(r=n.iframe))return e.data("caret-iframe",r),p(r);if(r=e.data("caret-iframe"))return p(r);a=e[0].ownerDocument,u=a.defaultView||a.parentWindow;try{return l=u.frameElement}catch(o){i=o}},t.fn.caret=function(i){var a;return"object"==typeof i?(o(this,i),this):s[i]?(o(this),a=r.contentEditable(this)?new e(this):new n(this),s[i].apply(a,Array.prototype.slice.call(arguments,1))):t.error("Method "+i+" does not exist on jQuery.caret")},t.fn.caret.EditableCaret=e,t.fn.caret.InputCaret=n,t.fn.caret.Utils=r,t.fn.caret.apis=s})}.call(this),define("require-css/css!jquery.atwho.styles",[],function(){}),function(){!function(t){return"function"==typeof define&&define.amd?define("jquery.atwho",["jquery"],t):t(window.jQuery)}(function(t){var e,n,i,r,o,s,a,l,u,c=[].slice;i=function(){function e(e){this.current_flag=null,this.controllers={},this.alias_maps={},this.$inputor=t(e),this.iframe=null,this.setIframe(),this.listen()}return e.prototype.setIframe=function(t){var e;if(t)return this.window=t.contentWindow,this.document=t.contentDocument||this.window.document,this.iframe=t,this;this.document=this.$inputor[0].ownerDocument,this.window=this.document.defaultView||this.document.parentWindow;try{return this.iframe=this.window.frameElement}catch(n){e=n}},e.prototype.controller=function(t){var e,n,i,r;if(this.alias_maps[t])n=this.controllers[this.alias_maps[t]];else{r=this.controllers;for(i in r)if(e=r[i],i===t){n=e;break}}return n?n:this.controllers[this.current_flag]},e.prototype.set_context_for=function(t){return this.current_flag=t,this},e.prototype.reg=function(t,e){var n,i;return n=(i=this.controllers)[t]||(i[t]=new o(this,t)),e.alias&&(this.alias_maps[e.alias]=t),n.init(e),this},e.prototype.listen=function(){return this.$inputor.on("keyup.atwhoInner",function(t){return function(e){return t.on_keyup(e)}}(this)).on("keydown.atwhoInner",function(t){return function(e){return t.on_keydown(e)}}(this)).on("scroll.atwhoInner",function(t){return function(e){var n;return null!=(n=t.controller())?n.view.hide(e):void 0}}(this)).on("blur.atwhoInner",function(t){return function(e){var n;return(n=t.controller())?n.view.hide(e,n.get_opt("display_timeout")):void 0}}(this))},e.prototype.shutdown=function(){var t,e,n;n=this.controllers;for(e in n)t=n[e],t.destroy(),delete this.controllers[e];return this.$inputor.off(".atwhoInner")},e.prototype.dispatch=function(){return t.map(this.controllers,function(t){return function(e){var n;return(n=e.get_opt("delay"))?(clearTimeout(t.delayedCallback),t.delayedCallback=setTimeout(function(){return e.look_up()?t.set_context_for(e.at):void 0},n)):e.look_up()?t.set_context_for(e.at):void 0}}(this))},e.prototype.on_keyup=function(e){var n;switch(e.keyCode){case a.ESC:e.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case a.DOWN:case a.UP:case a.CTRL:t.noop();break;case a.P:case a.N:e.ctrlKey||this.dispatch();break;default:this.dispatch()}},e.prototype.on_keydown=function(e){var n,i;if(n=null!=(i=this.controller())?i.view:void 0,n&&n.visible())switch(e.keyCode){case a.ESC:e.preventDefault(),n.hide(e);break;case a.UP:e.preventDefault(),n.prev();break;case a.DOWN:e.preventDefault(),n.next();break;case a.P:if(!e.ctrlKey)return;e.preventDefault(),n.prev();break;case a.N:if(!e.ctrlKey)return;e.preventDefault(),n.next();break;case a.TAB:case a.ENTER:if(!n.visible())return;e.preventDefault(),n.choosing=!0,n.choose(e);break;default:t.noop()}},e}(),o=function(){function n(n,i){this.app=n,this.at=i,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.setting=null,this.query=null,this.pos=0,this.cur_rect=null,this.range=null,e.append(this.$el=t("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new l(this),this.view=new u(this)}return n.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},n.prototype.init=function(e){return this.setting=t.extend({},this.setting||t.fn.atwho["default"],e),this.view.init(),this.model.reload(this.setting.data)},n.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},n.prototype.call_default=function(){var e,n,i;i=arguments[0],e=2<=arguments.length?c.call(arguments,1):[];try{return s[i].apply(this,e)}catch(r){return n=r,t.error(""+n+" Or maybe At.js doesn't have function "+i)}},n.prototype.trigger=function(t,e){var n,i;return null==e&&(e=[]),e.push(this),n=this.get_opt("alias"),i=n?""+t+"-"+n+".atwho":""+t+".atwho",this.$inputor.trigger(i,e)},n.prototype.callbacks=function(t){return this.get_opt("callbacks")[t]||s[t]},n.prototype.get_opt=function(t){var e;try{return this.setting[t]}catch(n){return e=n,null}},n.prototype.content=function(){return this.$inputor.is("textarea, input")?this.$inputor.val():this.$inputor.text()},n.prototype.catch_query=function(){var t,e,n,i,r,o;return e=this.content(),t=this.$inputor.caret("pos"),o=e.slice(0,t),i=this.callbacks("matcher").call(this,this.at,o,this.get_opt("start_with_space")),"string"==typeof i&&i.length<=this.get_opt("max_len",20)?(r=t-i.length,n=r+i.length,this.pos=r,i={text:i,head_pos:r,end_pos:n},this.trigger("matched",[this.at,i.text])):(i=null,this.view.hide()),this.query=i},n.prototype.rect=function(){var t,e;return(t=this.$inputor.caret({iframe:this.app.iframe}).caret("offset",this.pos-1))?("true"===this.$inputor.attr("contentEditable")&&(t=this.cur_rect||(this.cur_rect=t)||t),e=this.app.document.selection?0:2,{left:t.left,top:t.top,bottom:t.top+t.height+e}):void 0},n.prototype.reset_rect=function(){return"true"===this.$inputor.attr("contentEditable")?this.cur_rect=null:void 0},n.prototype.mark_range=function(){return"true"===this.$inputor.attr("contentEditable")&&(this.app.window.getSelection&&(this.range=this.app.window.getSelection().getRangeAt(0)),this.app.document.selection)?this.ie8_range=this.app.document.selection.createRange():void 0},n.prototype.insert_content_for=function(e){var n,i,r;return i=e.data("value"),r=this.get_opt("insert_tpl"),this.$inputor.is("textarea, input")||!r?i:(n=t.extend({},e.data("item-data"),{"atwho-data-value":i,"atwho-at":this.at}),this.callbacks("tpl_eval").call(this,r,n))},n.prototype.insert=function(e,n){var i,r,o,s,a,l,u,c,p,d,h;return i=this.$inputor,"true"===i.attr("contentEditable")&&(o="atwho-view-flag atwho-view-flag-"+(this.get_opt("alias")||this.at),s=""+e+"<span contenteditable='false'>&nbsp;<span>",a="<span contenteditable='false' class='"+o+"'>"+s+"</span>",r=t(a,this.app.document).data("atwho-data-item",n.data("item-data")),this.app.document.selection&&(r=t("<span contenteditable='true'></span>",this.app.document).html(r))),i.is("textarea, input")?(e=this.get_opt("space_after")?e+" ":""+e,p=i.val(),d=p.slice(0,Math.max(this.query.head_pos-this.at.length,0)),h=""+d+e+p.slice(this.query.end_pos||0),i.val(h),i.caret("pos",d.length+e.length)):(u=this.range)?(l=u.startOffset-(this.query.end_pos-this.query.head_pos)-this.at.length,u.setStart(u.endContainer,Math.max(l,0)),u.setEnd(u.endContainer,u.endOffset),u.deleteContents(),u.insertNode(r[0]),u.collapse(!1),c=this.app.window.getSelection(),c.removeAllRanges(),c.addRange(u)):(u=this.ie8_range)&&(u.moveStart("character",this.query.end_pos-this.query.head_pos-this.at.length),u.pasteHTML(s),u.collapse(!1),u.select()),i.is(":focus")||i.focus(),i.change()},n.prototype.render_view=function(t){var e;return e=this.get_opt("search_key"),t=this.callbacks("sorter").call(this,this.query.text,t.slice(0,1001),e),this.view.render(t.slice(0,this.get_opt("limit")))},n.prototype.look_up=function(){var e,n;return(e=this.catch_query())?(n=function(t){return t&&t.length>0?this.render_view(t):this.view.hide()},this.model.query(e.text,t.proxy(n,this)),e):void 0},n}(),l=function(){function e(t){this.context=t,this.at=this.context.at,this.storage=this.context.$inputor}return e.prototype.destroy=function(){return this.storage.data(this.at,null)},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(t,e){var n,i,r;return n=this.fetch(),i=this.context.get_opt("search_key"),n=this.context.callbacks("filter").call(this.context,t,n,i)||[],r=this.context.callbacks("remote_filter"),n.length>0||!r&&0===n.length?e(n):r.call(this.context,t,e)},e.prototype.fetch=function(){return this.storage.data(this.at)||[]},e.prototype.save=function(t){return this.storage.data(this.at,this.context.callbacks("before_save").call(this.context,t||[]))},e.prototype.load=function(t){return!this.saved()&&t?this._load(t):void 0},e.prototype.reload=function(t){return this._load(t)},e.prototype._load=function(e){return"string"==typeof e?t.ajax(e,{dataType:"json"}).done(function(t){return function(e){return t.save(e)}}(this)):this.save(e)},e}(),u=function(){function e(e){this.context=e,this.$el=t("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeout_id=null,this.context.$el.append(this.$el),this.bind_event()}return e.prototype.init=function(){var t;return t=this.context.get_opt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+t})},e.prototype.destroy=function(){return this.$el.remove()},e.prototype.bind_event=function(){var e;return e=this.$el.find("ul"),e.on("mouseenter.atwho-view","li",function(n){return e.find(".cur").removeClass("cur"),t(n.currentTarget).addClass("cur")}).on("click",function(t){return function(e){return t.choose(e),e.preventDefault()}}(this))},e.prototype.visible=function(){return this.$el.is(":visible")},e.prototype.choose=function(t){var e,n;return(e=this.$el.find(".cur")).length?(n=this.context.insert_content_for(e),this.context.insert(this.context.callbacks("before_insert").call(this.context,n,e),e),this.context.trigger("inserted",[e,t]),this.hide(t)):void 0},e.prototype.reposition=function(e){var n,i;return e.bottom+this.$el.height()-t(window).scrollTop()>t(window).height()&&(e.bottom=e.top-this.$el.height()),n={left:e.left,top:e.bottom},null!=(i=this.context.callbacks("before_reposition"))&&i.call(this.context,n),this.$el.offset(n),this.context.trigger("reposition",[n])},e.prototype.next=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),e=t.next(),e.length||(e=this.$el.find("li:first")),e.addClass("cur")},e.prototype.prev=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),e=t.prev(),e.length||(e=this.$el.find("li:last")),e.addClass("cur")},e.prototype.show=function(){var t;return this.choosing?void(this.choosing=!1):(this.context.mark_range(),this.visible()||(this.$el.show(),this.context.trigger("shown")),(t=this.context.rect())?this.reposition(t):void 0)},e.prototype.hide=function(t,e){var n;return this.visible()?isNaN(e)?(this.context.reset_rect(),this.$el.hide(),this.context.trigger("hidden",[t])):(n=function(t){return function(){return t.hide()}}(this),clearTimeout(this.timeout_id),this.timeout_id=setTimeout(n,e)):void 0},e.prototype.render=function(e){var n,i,r,o,s,a,l;if(!(t.isArray(e)&&e.length>0))return void this.hide();for(this.$el.find("ul").empty(),i=this.$el.find("ul"),s=this.context.get_opt("tpl"),a=0,l=e.length;l>a;a++)r=e[a],r=t.extend({},r,{"atwho-at":this.context.at}),o=this.context.callbacks("tpl_eval").call(this.context,s,r),n=t(this.context.callbacks("highlighter").call(this.context,o,this.context.query.text)),n.data("item-data",r),i.append(n);return this.show(),this.context.get_opt("highlight_first")?i.find("li:first").addClass("cur"):void 0},e}(),a={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78},s={before_save:function(e){var n,i,r,o;if(!t.isArray(e))return e;for(o=[],i=0,r=e.length;r>i;i++)n=e[i],o.push(t.isPlainObject(n)?n:{name:n});return o},matcher:function(t,e,n){var i,r;return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(t="(?:^|\\s)"+t),r=new RegExp(t+"([A-Za-z0-9_+-]*)$|"+t+"([^\\x00-\\xff]*)$","gi"),i=r.exec(e),i?i[2]||i[1]:null},filter:function(t,e,n){var i,r,o,s;for(s=[],r=0,o=e.length;o>r;r++)i=e[r],~i[n].toLowerCase().indexOf(t.toLowerCase())&&s.push(i);return s},remote_filter:null,sorter:function(t,e,n){var i,r,o,s;if(!t)return e;for(s=[],r=0,o=e.length;o>r;r++)i=e[r],i.atwho_order=i[n].toLowerCase().indexOf(t.toLowerCase()),i.atwho_order>-1&&s.push(i);return s.sort(function(t,e){return t.atwho_order-e.atwho_order})},tpl_eval:function(t,e){var n;try{return t.replace(/\$\{([^\}]*)\}/g,function(t,n){return e[n]})}catch(i){return n=i,""}},highlighter:function(t,e){var n;return e?(n=new RegExp(">\\s*(\\w*?)("+e.replace("+","\\+")+")(\\w*)\\s*<","ig"),t.replace(n,function(t,e,n,i){return"> "+e+"<strong>"+n+"</strong>"+i+" <"})):t},before_insert:function(t){return t}},n={load:function(t,e){var n;return(n=this.controller(t))?n.model.load(e):void 0},getInsertedItemsWithIDs:function(e){var n,i,r;return(n=this.controller(e))?(e&&(e="-"+(n.get_opt("alias")||n.at)),i=[],r=t.map(this.$inputor.find("span.atwho-view-flag"+(e||"")),function(e){var n;return n=t(e).data("atwho-data-item"),i.indexOf(n.id)>-1?void 0:(n.id&&(i.push=n.id),n)}),[i,r]):[null,null]},getInsertedItems:function(t){return n.getInsertedItemsWithIDs.apply(this,[t])[1]},getInsertedIDs:function(t){return n.getInsertedItemsWithIDs.apply(this,[t])[0]},setIframe:function(t){return this.setIframe(t)},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},r={init:function(e){var n,r;return r=(n=t(this)).data("atwho"),r||n.data("atwho",r=new i(this)),r.reg(e.at,e),this}},e=t("<div id='atwho-container'></div>"),t.fn.atwho=function(i){var o,s;return s=arguments,t("body").append(e),o=null,this.filter("textarea, input, [contenteditable=true]").each(function(){var e;return"object"!=typeof i&&i?n[i]?(e=t(this).data("atwho"))?o=n[i].apply(e,Array.prototype.slice.call(s,1)):void 0:t.error("Method "+i+" does not exist on jQuery.caret"):r.init.apply(this,s)}),o||this},t.fn.atwho["default"]={at:void 0,alias:void 0,space_after:!0,data:null,tpl:"<li data-value='${atwho-at}${name}'>${name}</li>",insert_tpl:"<span>${atwho-data-value}</span>",callbacks:s,search_key:"name",start_with_space:!0,highlight_first:!0,limit:5,max_len:20,display_timeout:300,delay:null}})}.call(this),define("require-css/css!coffeescripts/lib/mentions",[],function(){}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("lib/mentions",["module","require","jquery","backbone","underscore","lib/partials","lib/string","lib/transitional_autocomplete","models/repository","models/slug","jquery.atwho","jquery.autosize","jquery.caret","css!coffeescripts/lib/mentions"],function(n,i,r,o,s,a,l,u,c,p){var d,h,f,m,g,_,v;return m=s.uniqueId("lib_mentions"),h=s.template("<span\nclass='"+a.classNames("coffeescripts/lib/mentions").join(" ")+" autocomplete_mention'>@<%- displayName || slug %></span>"),v=s.template('<a class="at_mention_link" data-type="<%- sluggable_type %>" data-id="<%- sluggable_id %>" href="<%- name %>">\n  <span class="at_mention_symbol">@</span><span class="at_mention_slug"><%- sluggable_to_s %></span>\n</a>'),d={},f=function(t){return d[t]||(d[t]=r.get("/mentions/search",{mention:t},null,"json"),s.delay(function(){return d[t]=null},6e4)),d[t]},_="\\s<>&\\(\\)\\?!,.:;'\"",g=function(t,e,n){var i,r;return i=new RegExp("(?=["+_+"\\"+e+"])","g"),r=s.map(t.split(i),function(){return function(t){return t[0]===e&&t.length>1?n(t.slice(1)):t}}(this)),r.join("")},{Autocomplete:function(n){function i(){return this._search=t(this._search,this),this._transformTokens=t(this._transformTokens,this),this.updateTarget=t(this.updateTarget,this),this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.results=function(t){return 0===t.length?[]:r.when(f(t))},i.prototype.renderMention=function(t){var e,n;if(n=t.get("name"),e=t.get("sluggable_to_s"),null==e)throw new Error("No display name loaded for slug");return h({slug:n,displayName:e})},i.prototype.renderSelect=function(t){return u.render_item({image:t.pic,main_text:t.highlighed_name,detail_text:t.desc})},i.prototype.resultToSlug=function(t){var e;return e=this.collection.findWhere({name:t.slug})||new p,e.set({name:t.slug,sluggable_to_s:s.unescape(t.name),sluggable_id:t.id,sluggable_type:t.type})},i.prototype.initialize=function(t){if(this.collection||(this.collection=c.get(p)),this.$el.is(":input"))throw new Error("Must be applied to a container element, not to an input directly");if(this.$target=r(t.target),!this.$target.is(":input"))throw new Error("Must provide a target input (generally hidden) to contain the value to submit to the server");return this._initializeElement(),this.$editable=this._initializeEditable(),this.$highlighter=this._initializeHighlighter(),this._$intermediary=r('<input type="hidden" value=""/>'),this.render()},i.prototype.render=function(){return this._nestedRender?void 0:(this._nestedRender=!0,this._$intermediary.val(this.$target.val().replace(new RegExp("\\"+this._at+"(?=[^\\s])","g"),this._atReplacement)),this._renderEditable(),this._renderHighlighter(),this._nestedRender=!1)},i.prototype.updateTarget=function(){return this._nestedUpdateTarget?void 0:(this._nestedUpdateTarget=!0,this._$intermediary.val(this.$editable.val().replace(new RegExp("\\"+this._marker+"[^\\"+this._marker+"]+(?=\\"+this._marker+"(["+_+"]|$))","g"),function(t){return function(e){var n,i;return n=e.slice(1),i=(t._slugNamesByRenderedText||{})[n],null!=i?""+t._atReplacement+i:e}}(this)).replace(new RegExp("\\"+this._marker,"g"),"")),this.$target.val(this._$intermediary.val().replace(new RegExp("\\"+this._atReplacement,"g"),this._at)).trigger("change"),this._renderEditable(),this._renderHighlighter(),this._nestedUpdateTarget=!1)},i.prototype.events={change:"updateTarget",input:"updateTarget",keyup:"updateTarget"},i.prototype.delegateEvents=function(){var t,e;return i.__super__.delegateEvents.apply(this,arguments),this.$target.on("change",function(t){return function(){return t._nestedUpdateTarget?void 0:t.render()}}(this)),this.$editable.atwho({at:this._at,alias:"mentions",tpl:function(t){return function(e){var n,i;return n=t.resultToSlug(e),i=r(t._renderMentionWithMetadata(n)).text(),r(t.renderSelect(e)).wrap("<li>").parent().attr("data-value",i).attr("data-"+m+"_slug",JSON.stringify(n.toJSON())).wrap("<p>").parent().html()}}(this),callbacks:{highlighter:function(t){return t},remote_filter:this._search,tpl_eval:function(t,e){return t(e)},sorter:function(t,e){return e},matcher:function(t,e,n){var i,r;return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(t="(?:^|\\s)"+t),r=new RegExp(t+"([ A-Za-z0-9_+-]*)$|"+t+"([^\\x00-\\xff]*)$","gi"),i=r.exec(e),i?i[2]||i[1]:null}}}),t=this.$editable.data("atwho").controllers["@"],e=t.insert,t.insert=function(n){return function(i,r){var o;if(o=r.data(m+"_slug"),null==o.name)throw new Error("Slug name expected in attributes");return n.collection.findWhere({name:o.name})||n.collection.add(o),e.call(t,""+n._marker+i+n._marker,r)}}(this)},i.prototype.undelegateEvents=function(){return i.__super__.undelegateEvents.apply(this,arguments),this.$target.off("change",this.render),this.$editable.atwho("destroy")},i.prototype._at="@",i.prototype._marker=String.fromCharCode(8203),i.prototype._atReplacement=String.fromCharCode(8205),i.prototype._initializeElement=function(){return this.$el.css({position:"relative"}),this.$el.zIndex(this.$el.zIndex()+1)},i.prototype._initializeEditable=function(){var t;return t=this.$("textarea")[0],t||(t=r("<textarea />"),t.appendTo(this.$el)),t=r(t),t.autosize(),t.css("background-color","transparent"),t},i.prototype._initializeHighlighter=function(){var t,e,n,i,o,s,l,u,c;for(e=r("<div class='"+a.classNames("coffeescripts/lib/mentions").join(" ")+" highlighter' />").insertBefore(this.$editable),c=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","lineHeight","minHeight","borderRadius"],l=["Left","Right","Top","Bottom"],n=0,o=l.length;o>n;n++)t=l[n],c.push("padding"+t),c.push("margin"+t),c.push("border"+t+"Width");for(i=0,s=c.length;s>i;i++)u=c[i],e.css(u,this.$editable.css(u));return e},i.prototype._renderEditable=function(){var t,e,n,i,o,s,a,l;if(l=this._transformTokens(!1,function(t){return function(e){var n;return n=t._renderMentionWithMetadata(e),t._marker+r(n).text()+t._marker}}(this)),e=this.$editable.val(),e!==l){if(n=this.$editable.is(":focus"),a=0,n)for(t=this.$editable.caret("pos"),a=0,i=o=0,s=t-1;s>=0?s>=o:o>=s;i=s>=0?++o:--o)l[a]===e[i]&&a++;if(this.$editable.val(l),this.$editable.trigger("autosize.resize"),n)return this.$editable.caret("pos",a)}},i.prototype._renderHighlighter=function(){return this.$highlighter.html(this._transformTokens(!0,function(t){return function(e){return t._renderMentionWithMetadata(e)}}(this)))},i.prototype._transformTokens=function(t,e){var n;return n=this._$intermediary.val(),t&&(n=s.escape(n)),g(n,this._atReplacement,function(t){return function(n){var i;return i=t.collection.findWhere({name:n}),null!=i?e(i):(t._loadData(),""+t._at+n)}}(this))},i.prototype._renderMentionWithMetadata=function(t){var e,n;if(!t.has("name"))throw new Error("Slug name expected in model");if(this._renderedMentions||(this._renderedMentions={}),this._slugNamesByRenderedText||(this._slugNamesByRenderedText={}),!this._renderedMentions[t.get("name")]){for(n=r(this.renderMention(t)).attr("data-marker",this._marker),e=!0;null!=this._slugNamesByRenderedText[n.text()];)n.html(n.html()+(e?"&nbsp;":" ")),e=!e;this._renderedMentions[t.get("name")]=n.wrap("<p>").parent().html(),this._slugNamesByRenderedText[n.text()]=t.get("name")}return this._renderedMentions[t.get("name")]},i.prototype._search=function(t,e){var n;return this._searchId||(this._searchId=0),this._searchId++,n=this._searchId,r.when(this.results(t)).done(function(t){return function(i){return t._searchId===n?e(i):void 0}}(this))},i.prototype._loadData=s.once(function(){return r.get("/mentions/init_mentions",{text:this.$target.val()},function(t){return function(e){var n,i,r,o,s;o=e.active_mentions||{};for(i in o)n=o[i],r=n.slug.replace(/^@/,""),s=t.collection.findWhere({name:r})||new p,s.set({name:r,sluggable_to_s:i.replace(/^@/,""),sluggable_type:n.type,sluggable_id:n.id}),t.collection.add(s);return t.render()}}(this),"json")}),i}(o.View),UpdatingField:function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){if(this.collection||(this.collection=c.get(p)),this.field=t.field,null==this.field)throw new Error("Must provide a field to listen to");return this.listenTo(this.model,"change:"+this.field,this.render)},n.prototype.render=function(){var t,e,n;return e=this._preprocessText(),n=this,t=function(){var e;return r(this).contents().length>0?r(this).contents().each(t):(e=g(r(this).text(),"@",function(){return function(t){var e;return e=n.collection.findWhere({name:t}),null!=e?n.renderMention(e):"@"+t}}(this)),null!=r(this).html()?r(this).html(e):r(this).replaceWith(e))},this.$el.empty().append(r(e).each(t)),this},n.prototype.renderMention=function(t){return v(t.toJSON())},n.prototype._preprocessText=function(){return l.link_and_format(this.model.escape(this.field))},n}(o.View)}})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/profile",["models/base","models/repository","models/user"],function(e,n,i){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.initialize=function(){return r.__super__.initialize.apply(this,arguments),this._listenToUser()},r.prototype.sync=function(){throw new Error("Please fetch/save using the associated user model.")},r.prototype._listenToUser=_.once(function(){var t;return t=_.once(function(t){return function(){var e;return e=n.get(i).bootstrap(t.get("user_id")),e.has("profile_attributes")&&t.set(e.get("profile_attributes")),t.listenTo(e,"change:profile_attributes",function(e,n){return t.set(n)
}),e.has("cover_photo_url")&&t.set("cover_photo_url",e.get("cover_photo_url")),t.listenTo(e,"change:cover_photo_url",function(e,n){return t.set("cover_photo_url",n)})}}(this)),this.has("user_id")?t():this.on("change:user_id",t)}),r}(e("Profile"))})}.call(this),function(){define("controllers/mentions",["load","lib/mentions","models/profile","models/repository","models/slug"],function(t,e,n,i,r){return{updating_mentions_field:function(t,o){var s,a,l,u;if(u=i.get(r),t("a.at_mention_link").filter(function(){return null!=t(this).data("slug_id")}).each(function(){var e,n;return e={id:t(this).data("slug_id"),name:t(this).data("name"),sluggable_type:t(this).data("type"),sluggable_id:t(this).data("id"),sluggable_to_s:t(this).find(".at_mention_slug").text()},null!=(n=u.findWhere({name:e.name}))&&n.set("id",e.id),u.bootstrap(e)}),a={Profile:n},s=a[o.data("object_type")],null==s)throw new Error("Unrecognized object type: "+o.data("object_type"));return l=i.get(s).bootstrap(o.data("object_id")),l.set(o.data("field"),o.data("value")),new e.UpdatingField({field:o.data("field"),model:l,el:o})}}})}.call(this),function(){define("lib/investor_flags",["jquery","lib/flash"],function(t,e){return{init_report_button:function(n,i,r){return t(n).click(function(){return function(o){return o.preventDefault(),t(n).hide(),t.ajax("angel_profiles/"+i+"/flag",{data:{source:r},dataType:"json",type:"get",success:function(n){return n.success&&(e(n.message),n.popover)?t.facybox(n.popover):void 0}})}}(this))}}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("lib/structured_bio",["jquery","backbone","underscore","models/new_tagging","models/repository","google/analytics"],function(e,n,i,r,o,s){return function(){function n(n,i){var a,l,u;this.selector=n,this.initBioTagField=t(this.initBioTagField,this),this.prefillBioRoleField=t(this.prefillBioRoleField,this),this.initBioRoleField=t(this.initBioRoleField,this),this.initBioPeopleFields=t(this.initBioPeopleFields,this),this.updateDefaultMiniBio=t(this.updateDefaultMiniBio,this),this.selector&&(this.$form=e(this.selector)),this.user_id=this.$form.data("user_id"),this.is_admin=this.$form.data("is_admin"),this.initialized=!1,e.extend(this,i),this.populate_bio||(this.populate_bio="structured_bio_fields"),this.$form.find(".bio_role_field,.bio_tag_field").each(this.initBioPeopleFields),this.$form.find(".bio_role_field").each(this.initBioRoleField),this.$form.find(".bio_tag_field").each(this.initBioTagField),this.$form.find('[data-id="profiles_bio_form_mini_resume"]').length>0&&(this.bio_mention_ac=new MentionsAutocomplete(this.user_id,"profiles_bio_form_mini_resume","profiles_bio_form_mini_resume_autocomplete_holder",this.is_admin.toString()),l=this.$form.find('[data-id="profiles_bio_form_mini_resume"]'),l.each(textCounter),a=this.$form.find(".examples.popup"),l.focus(function(){return a.show(),a.css({"margin-left":155+e(this).outerWidth(),"margin-top":-.15*a.outerHeight()})}).blur(function(){return a.hide()})),this.$form.find(".bio_role_field[data-pool_mode=true]").first().each(this.prefillBioRoleField),o.get(r).on("add remove",function(t){return function(e){var n;return"tags_colleges"===(n=e.get("new_taggable_field"))&&t.initialized?setTimeout(function(){return t.$form.find("input[type=text].mini_resume_text, textarea.mini_resume_text").trigger("updateText")},100):void 0}}(this)),u=this,this.$form.find("input[type=text].mini_resume_text, textarea.mini_resume_text").on("updateText",this.updateDefaultMiniBio).each(function(t,n){return e(n).keyup(function(){return e(this).prop("custom",!0),u.$form.find(".mini_resume .generate_section input[type=radio].auto_generate_disable").prop("checked",!0)}),e(n).val().length>0?(u.$form.find(".mini_resume .generate_section input[type=radio].auto_generate_disable").prop("checked",!0),e(n).prop("custom",!0)):u.$form.find(".mini_resume .generate_section input[type=radio].auto_generate_enable").prop("checked",!0)}).trigger("updateText"),this.$form.find(".add_tag_field,.add_role_field",this).each(function(){return e("a.add",this).click(function(t){return function(){var n,i,r,o;return r=e(t).attr("class").replace("add_","bio_"),n=e(t).prev().is("script")?e(t).prev().prev("."+r+":hidden"):e(t).prev("."+r+":hidden"),o=u.$form.find("."+r+":visible span.reference_label").length,i=n.clone().insertBefore(n).show(),i.each(u.initBioPeopleFields),i.filter(".bio_role_field").each(u.initBioRoleField),i.filter(".bio_tag_field").each(u.initBioTagField),i.find("span.reference_label").html("Reference #"+(o+1))}}(this))}),this.$form.find(".bio_line .photo").each(function(){return e("a.toggle_field",this).click(function(t){return function(){return e(".existing",t).hide(),e(".field",t).show().find("input[type=file]").click()}}(this))}),this.$form.find(".mini_resume .generate_section input[type=radio].auto_generate_enable",this).click(function(){var t;return e(this).is(":checked")?(s.push(["_trackEvent","structured bio behavior 3","mini-resume force-generated",window.location.pathname]),t=u.getWhere(this),s.push(["_trackEvent","structured bio behavior 3","mini-resume force-generated on "+t,window.location.pathname]),e(".mini_resume_text").prop("custom",!1).val("").trigger("updateText")):void 0}),this.$form.find(".mini_resume .generate_section input[type=radio].auto_generate_disable",this).click(function(){var t;return e(this).is(":checked")?(s.push(["_trackEvent","structured bio behavior 3","mini-resume disable auto-generation",window.location.pathname]),t=u.getWhere(this),s.push(["_trackEvent","structured bio behavior 3","mini-resume disable auto-generation on "+t,window.location.pathname]),e(".mini_resume_text").prop("custom",!0)):void 0}),this.initialized=!0}return n.prototype.getWhere=function(t){return e(t).closest(".form_section").closest(".startups.add_people").length>0?"startup onboard":e(t).closest(".job_profiles.apply").length>0?"talent apply":e(t).closest(".job_profiles.references").length>0?"talent references":e(t).closest(".profiles.form_header").length>0?"user profile":"unknown"},n.prototype.getShortNameForCollege=function(t){return"Massachusetts Institute of Technology"===t?"MIT":t.replace(/University$/,"").replace(/College$/,"").trim()},n.prototype.updateDefaultMiniBio=function(t){var n,a,l,u,c,p,d,h,f,m,g,_,v,y,b,w,x,k,C,$,T,q,P;if(n=e(t.target),!n.prop("custom")){l=[],o.get(r).each(function(t){return function(e){var n,r;return r=e.get("new_tag"),n=i.all({new_taggable_field:"tags_colleges",new_taggable_type:"User",new_taggable_id:t.user_id},function(t,n){return e.get(n)===t}),r&&n?l.push(r):void 0}}(this)),l.sort(function(t,e){return e.signal-t.signal}),u={},"structured_bio_fields"===this.populate_bio&&this.$form.find(".bio_role_field").each(function(){var t,n;return t=e(this).data("role"),(n=e(this).data("startup_role"))?(u[t]||(u[t]=[]),"founder"===t||(null!=n?n["startup_visible?"]:void 0)&&("employee"===t||"founder"===t||"past_investor"===t)?u[t].push(n):void 0):void 0});for(m in u)q=u[m],q.sort(function(t,e){return e.startup_signal-t.startup_signal});if(_=[],d={},null!=(v=u.founder)?v.length:void 0){for(y=u.founder,h=0,g=y.length;g>h;h++)k=y[h],d[k.startup_company_name]=1;u.founder.length>2&&(u.founder=i.first(u.founder,2)),$="Founder ",p=function(){var t,e,n,i;for(n=u.founder,i=[],t=0,e=n.length;e>t;t++)k=n[t],i.push(k["startup_visible?"]?k.startup_slug_url:k.startup_company_name);return i}(),p=function(){var t,e,n;for(n=[],t=0,e=p.length;e>t;t++)T=p[t],n.push(T.replace(/.*\/([^\/]+)$/,"@$1"));return n}(),$+=p.join(", "),_.push($)}return(null!=(b=u.employee)?b.length:void 0)&&(u.employee=i.reject(u.employee,function(){return function(t){return d[t.startup_company_name]}}(this)),(null!=(w=u.employee)?w.length:void 0)&&(u.employee.length>2&&(u.employee=i.first(u.employee,2)),$="Worked at ",c=function(){var t,e,n,i;for(n=u.employee,i=[],t=0,e=n.length;e>t;t++)k=n[t],i.push(k.startup_slug_url);return i}(),c=function(){var t,e,n;for(n=[],t=0,e=c.length;e>t;t++)T=c[t],n.push(T.replace(/.*\/([^\/]+)$/,"@$1"));return n}(),$+=c.join(", "),_.push($))),(null!=(x=u.past_investor)?x.length:void 0)&&(u.past_investor.length>2&&(u.past_investor=i.first(u.past_investor,2)),$="Investor ",f=function(){var t,e,n,i;for(n=u.past_investor,i=[],t=0,e=n.length;e>t;t++)k=n[t],i.push(k.startup_slug_url);return i}(),f=function(){var t,e,n;for(n=[],t=0,e=f.length;e>t;t++)T=f[t],n.push(T.replace(/.*\/([^\/]+)$/,"@$1"));return n}(),$+=f.join(", "),_.push($)),l.length&&(l.length>2&&(l=i.first(l,2)),$="Studied at ",C=function(){var t,e,n;for(n=[],t=0,e=l.length;e>t;t++)a=l[t],n.push(a.slug_url);return n}(),C=function(){var t,e,n;for(n=[],t=0,e=C.length;e>t;t++)T=C[t],n.push(T.replace(/.*\/([^\/]+)$/,"@$1"));return n}(),$+=C.join(", "),_.push($)),n.val(_.join("  ")),n.trigger("textCounter"),s.push(["_trackEvent","structured bio behavior 3","mini-resume updated",window.location.pathname]),P=this.getWhere(n),s.push(["_trackEvent","structured bio behavior 3","mini-resume updated on "+P,window.location.pathname]),this.bio_mention_ac?this.bio_mention_ac.init_mentions():void 0}},n.prototype.initBioPeopleFields=function(t,n){var i;return i=function(){return function(t){return t&&e(".field.person",n).each(function(){return e("span.tag",this).each(function(){return e(".pic",this).each(function(){return e("img",this).attr("src",t.item.pic)}),e("a",this).each(function(){return e(this).attr("href",t.item.url),e(this).html(t.item.display_name)}),e(this).css("display","inline-block")}),e(this).parent().next(".on_section").show(),e("input.autocomplete",this).nextAll("input:visible").first().focus(),e("input.autocomplete",this).val(t.item.display_name).hide(),e("input.autocomplete",this).next("input[type=hidden].autocomplete_id").val(t.item.name_id),t.item.is_follower?e("input.autocomplete_email",n).focus().closest(".bio_line").hide():void 0}),!1}}(this),e(".field.person",n).each(function(){return e("input.autocomplete",this).keydown(function(t){return function(n){return e(n.target).next("span.validation-error:visible").hide(),13===n.which?(e("input.autocomplete_email",t).focus().closest(".bio_line").focus(),!1):!0}}(this))}),e("input.autocomplete_email",n).keydown(function(){return function(t){return e(t.target).next("span.validation-error:visible").hide()}}(this)),e(".field.person",n).each(function(){var t,r;return e("span.tag .close_tag",this).click(function(){return e(this).closest("span.tag").hide().next("input.autocomplete").show().val("").next("input[type=hidden].autocomplete_id").val(""),e(this).closest(".bio_role_field").find("input.autocomplete_email").closest(".bio_line").show().val("")}),r={tag_type:"PeopleTag",options:{check_following:"true"}},t=new Autocomplete(e("input.autocomplete",this),{user_id:e(n).data("user_id"),selectCallback:i,queryOptions:r,tags:!0,addText:"Add reference"})})},n.prototype.initBioRoleField=function(t,n){var r,o,a,l;return a=this,r=e(n).data("pool_mode"),o=e(n).data("role"),l=e(n).data("user_id"),e(".field.role",n).each(function(){var t,n,u,c,p,d;return d=!1,n=function(t){return function(n){var u,c;return d?void 0:(d=!0,s.push(["_trackEvent","structured bio behavior 3","add role "+o,window.location.pathname]),c=a.getWhere(t),s.push(["_trackEvent","structured bio behavior 3","add role "+o+" on "+c,window.location.pathname]),r?(u={},i.each(n,function(t,e){return u["startup_"+e]=t,"name"===e?u.startup_company_name=t:void 0}),u.role=o,e(t).closest(".bio_role_field").data("startup_role",u),e(".mini_resume_text").trigger("updateText"),e("input.autocomplete",t).nextAll("input.reference_relationship_type").val("StartupRole").nextAll("input.reference_relationship_id").val(u.startup_role_id),e("span.tag",t).each(function(){return e(this).data("company",{name:u.startup_company_name,url:u.startup_slug_url}),e("a",this).each(function(){return e(this).html(u.startup_company_name),e(this).attr("href",u.startup_slug_url)})}),d=!1):e.ajax({url:"/startup_roles",type:"post",data:{startup_role:{role:o,user_id:l,startup_id:n.id,source:"user_profile"},startup:n},dataType:"json",success:function(n){return e(t).closest(".bio_role_field").data("token",n.token),e(t).closest(".bio_role_field").data("startup_role",n.role),e(".mini_resume_text").trigger("updateText"),e("span.tag",t).each(function(){return e(this).data("company",{name:n.role.startup_company_name,url:n.role.startup_slug_url}),e("a",this).each(function(){return e(this).attr("href",n.role.startup_slug_url)})}),d=!1}}))}}(this),c=function(t){return function(){var n;return r?(e(t).closest(".bio_role_field").removeData("token"),e(t).closest(".bio_role_field").removeData("startup_role"),e(t).closest(".bio_role_field").removeAttr("data-token"),e(t).closest(".bio_role_field").removeAttr("data-startup_role"),e(".mini_resume_text").trigger("updateText"),d=!1):(n=e(t).closest(".bio_role_field").data("token"),e.ajax({url:"/startup_roles/"+n,type:"post",data:{_method:"delete"},dataType:"json",success:function(){return e(t).closest(".bio_role_field").removeData("token"),e(t).closest(".bio_role_field").removeData("startup_role"),e(t).closest(".bio_role_field").removeAttr("data-token"),e(t).closest(".bio_role_field").removeAttr("data-startup_role"),e(".mini_resume_text").trigger("updateText"),d=!1}}))}}(this),e(this).on("addRole",function(t){return function(i,r){return e("span.tag",t).each(function(){return e("a",this).each(function(){return e(this).attr("href",r.slug_url),e(this).html(r.company_name)}),e(this).css("display","inline-block")}),e("input.autocomplete",t).nextAll("input:visible").first().focus(),e("input.autocomplete",t).hide(),e(t).closest(".bio_role_field").nextAll(".add_role_field").first().filter(":hidden").show(),n(r)}}(this)),e("span.tag .close_tag",this).click(function(){return d?void 0:(d=!0,e(this).closest("span.tag").hide().next("input.autocomplete").show().val(""),e(this).closest(".field.role").next(".with_section").hide().find("input.autocomplete").show().val("").end().find("span.tag").hide().end().next(".on_section").hide().find("input.autocomplete").show().val("").end().find("span.tag").hide().end(),c())}),p=function(t){return function(i){return d?void 0:(e("span.tag",t).each(function(){return e(".pic",this).each(function(){return e("img",this).attr("src",i.item.pic)}),e("a",this).each(function(){return e(this).attr("href","Startup"===i.model?i.item.profile_url:"javascript:void()"),e(this).html(i.name)}),e(this).css("display","inline-block")}),e("input.autocomplete",t).nextAll("input:visible").first().focus(),e("input.autocomplete",t).hide(),e(t).closest(".bio_role_field").nextAll(".add_role_field").first().filter(":hidden").show(),n("Startup"===i.model?r?i.item:{id:i.id}:{company_name:i.name}))}}(this),u=r?{role:o,user_id:l}:{tag_type:"CompanyTag"},t=new Autocomplete(e("input.autocomplete",this),{user_id:l,selectCallback:p,queryOptions:u,custom_url:r?"/startup_roles/search_within_tagged":null,tags:!0,extra_ac_options:{minLength:r?0:1}}),e("input.autocomplete",this).keyup(function(t){var n;return 13!==t.which?!0:d?!0:(n=e.trim(e(this).val()),""===n?!0:(r||p({name:n}),!1))})})},n.prototype.prefillBioRoleField=function(t,n){var i,r,o,s;return r=e(n).data("role"),s=e(n).data("user_id"),i=this.$form.find("input[type=text].mini_resume_text,textarea.mini_resume_text"),i.length>0?(o=function(){switch(r){case"past_investor":return"Investor";case"employee":return"Worked at";case"founder":return"Founder";default:return""}}(),i.first().each(function(t){return function(n,i){var s,a,l;return l=e(i).val(),(s=l.match(new RegExp(o+" (?:(@[a-z0-9-_]+)(, )?)+(?: )?",["g"])))?(a=s[0],e.ajax({url:"/mentions/init_mentions",type:"get",data:{text:a},dataType:"json",success:function(e){var n,i,o,s,a;i=e.active_mentions,o=[];for(n in i)a=i[n],"Startup"===a.type&&(s={id:a.id,company_name:n.replace("@",""),slug_url:window.location.protocol+"//"+window.location.host+"/"+a.slug.replace("@",""),"visible?":!0},t.$form.find(".bio_role_field[data-role="+r+"]").last().prev(".bio_role_field").find(".field.role").trigger("addRole",s),o.push(t.$form.find(".add_role_field[data-role="+r+"] a").click()));return o}})):void 0}}(this))):void 0},n.prototype.initBioTagField=function(t,n){var i;return i=this,e(".field.tagging",n).each(function(){var t,n,a,l,u,c;return n=function(t){return function(n){var a,l,u;return l=e(t).closest(".bio_tag_field").data("tag_field"),s.push(["_trackEvent","structured bio behavior 3","add tagging "+l,window.location.pathname]),u=i.getWhere(t),s.push(["_trackEvent","structured bio behavior 3","add tagging "+l+" on "+u,window.location.pathname]),a=new r({new_taggable_type:"User",new_taggable_id:e(t).closest(".bio_tag_field").data("user_id"),new_taggable_field:l,new_tag:n}),a.save({},{success:function(){return o.get(r).push(a),e(t).closest(".bio_tag_field").data("tagging",a.attributes)}})}}(this),l=function(t){return function(){var n,i,s;return s=null!=(n=e(t).closest(".bio_tag_field").data("tagging"))?n.id:void 0,s&&(i=o.get(r).get(s))?i.destroy({wait:!0,success:function(){return e(t).closest(".bio_tag_field").removeData("tagging")}}):void 0}}(this),e("span.tag .close_tag",this).click(function(){return e(this).closest("span.tag").hide().next("input.autocomplete").show().val(""),e(this).closest(".field.tagging").next(".with_section").hide().find("input.autocomplete").show().val("").end().find("span.tag").hide().end().next(".on_section").hide().find("input.autocomplete").show().val("").end().find("span.tag").hide().end(),l()}),c=e(this).closest(".bio_tag_field").data("tag_type"),a={tag_type:c,new_taggable_field:e(this).closest(".bio_tag_field").data("tag_field")},u=function(t){return function(i){var r;return e("span.tag",t).each(function(){return e(this).data("tag",i.item),e("a",this).each(function(){return e(this).attr("href",i.item.url),e(this).html(i.item.display_name)}),e(this).css("display","inline-block")}),e("input.autocomplete",t).nextAll("input:visible").first().focus(),e("input.autocomplete",t).hide(),e(t).closest(".bio_tag_field").nextAll(".add_tag_field").first().filter(":hidden").show(),n({id:i.item.id,display_name:i.item.display_name,name:i.item.name,tag_type:null!=(r=i.item.tag_type)?r:c})}}(this),t=new Autocomplete(e("input.autocomplete",this),{user_id:e(this).closest(".bio_tag_field").data("user_id"),selectCallback:u,queryOptions:a,tags:!0})})},n}()})}.call(this),define("require-css/css!coffeescripts/lib/form",[],function(){}),function(){var t=[].slice,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty,i=function(t,e){return function(){return t.apply(e,arguments)}};define("lib/form",["jquery","backbone","underscore","lib/partials","css!coffeescripts/lib/form"],function(n,r,o,s){var a,l,u,c,p,d,h;return u=function(t,e){var i,r;return t=n(t),e=e.toString(),i={},r=":input[name^='"+e+"[']:not(:file)",n.merge(t.find(r),t.filter(r)).each(function(){var t,r,o,s;return!n(this).is(":radio")||n(this).is(":checked")?(t=n(this).attr("name").substr(e.length+1),t=t.substr(0,t.length-1),-1!==t.indexOf("][")?(o=t.split("]["),r=o[0],t=o[1],i[r]||(i[r]={}),s=n(this).is(":checkbox")?n(this).is(":checked"):n(this).val(),i[r][t]=s):(s=n(this).is(":checkbox")?n(this).is(":checked"):n(this).val(),i[t]=s),!0):void 0}),i},h=function(t,e,i){var r,s,a;return null==i&&(i={}),n(t).parent().hasClass("fieldWithErrors")&&n(t).parent().replaceWith(n(t)),null!=e?(a=i.div?"div":"span",r=n("<"+a+" class='fieldWithErrors'></"+a+">").insertBefore(n(t)),n(t).appendTo(r),s=i.do_not_escape_error?e:o.escape(e),n("<span class='validation-error'>"+s+"</span>").appendTo(r)):void 0},c=function(t){return n(t).parent().hasClass("fieldWithErrors")?n(t).parent().replaceWith(n(t)):void 0},p=function(t){return o.each(t,function(t){return c(t)})},d=function(e,i){return null==i&&(i={}),n.extend({},i,{beforeSend:function(){var r,o;return r=1<=arguments.length?t.call(arguments,0):[],n(":submit, .submit",e).addClass("loading").each(function(){return n(this).hasClass("c-button")?n(this).addClass("c-button--loading"):void 0}),null!=(o=i.beforeSend)?o.apply(this,r):void 0},complete:function(){var r,o;return r=1<=arguments.length?t.call(arguments,0):[],n(":submit, .submit",e).removeClass("loading").removeClass("c-button--loading").removeAttr("disabled"),null!=(o=i.complete)?o.apply(this,r):void 0}})},{loadingOptions:d,attributes:u,setInputError:h,clearInputError:c,clearInputErrors:p,CharacterCounter:a=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.template=o.template("<div class='"+s.classNames("coffeescripts/lib/form").join(" ")+" character_counter_template <%- (current > max ? 'above_max' : '') %>'>\n  <span class='current'><%- current %></span>\n  <span class='separator'>/</span>\n  <span class='max'><%- max %></span>\n</div>"),i.prototype.render=function(){return this._$container.html(this.template({current:this.$el.val().length,max:this.max}))},i.prototype.initialize=function(t){if(!this.$el.is(":input"))throw new Error("Must be applied to a form input");if(this.max=t.max,!o.isNumber(this.max))throw new Error("Must provide a maximum character count");return null!=t.container?this._$container=n(t.container):(this._$container=n("<div/>"),this._$container.insertAfter(this.$el)),this.render()},i.prototype.events=function(){var t,e,n,i,r;for(e={},r=["visible","keyup","keydown","change","paste","focus"],n=0,i=r.length;i>n;n++)t=r[n],e[t]="render";return e},i}(r.View),StandardForm:l=function(t){function r(){return this._error=i(this._error,this),this._success=i(this._success,this),this._beforeSubmit=i(this._beforeSubmit,this),this._setErrors=i(this._setErrors,this),this._applySuccessResponse=i(this._applySuccessResponse,this),this._$form=i(this._$form,this),r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.initialize=function(t){var e,n,i;return r.__super__.initialize.call(this,t),this.form_prefix=null!=(e=t.form_prefix)?e:null!=(n=this.model)&&null!=(i=n.constructor)?i.toString():void 0},r.prototype.events=function(){return{submit:function(t){return function(){return t.save(),!1}}(this)}},r.prototype.save=function(t){var e,i,r;if(null==t&&(t={}),r=this,e=n.Deferred(),t=o.clone(t),o.defaults(t,this._defaultOptions()),i={success:function(n,i,o){var s;return r._success(n,i,o),null!=(s=t.success)&&s.call(this,n,i,o),e.resolve(n,i,o)},error:function(n,i,o){var s;return r._error(n,i,o),null!=(s=t.error)&&s.call(this,n,i,o),e.reject(n,i,o)}},1!==this._$form().length)throw new Error("Must provide exactly one form");return this._beforeSubmit()?(this._$form().ajaxSubmit(d(this._$form(),n.extend({},t,i))),e.promise()):void 0},r.prototype._$form=function(){return this.$el.is("form")?this.$el:this.$("form")},r.prototype._applySuccessResponse=function(t){var e;return null!=(e=this.model)?e.set(this.model.parse(t)):void 0},r.prototype._defaultOptions=function(){return{dataType:"json"}},r.prototype._setErrors=function(t){var e,n,i,r,o;p(this._$form().find("label")),t.errors&&(t=t.errors),r=[];for(n in t)e=t[n],e instanceof Array?(o=e[0],i=this.$("label[for='"+this.form_prefix+"_"+n+"']"),r.push((null!=i?i.length:void 0)>0?i.each(function(){return h(this,o)}):"undefined"!=typeof console&&null!==console?console.warn("Error not shown to user: "+n+" "+o):void 0)):r.push("undefined"!=typeof console&&null!==console?console.warn("Unprocessable error: "+e):void 0);return r},r.prototype._beforeSubmit=function(){return this._setErrors([]),this.trigger("request"),!0},r.prototype._success=function(t,e,n){return this._applySuccessResponse(t),this.trigger("sync",t,e,n)},r.prototype._error=function(t,e,i){return this._setErrors(n.parseJSON(t.responseText)),this.trigger("error",t,e,i)},r}(r.View)}})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/startup_role",["jquery","models/base","lib/autocomplete"],function(e,n,i){var r;return r=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.direction="outbound",r.prototype.idAttribute="token",r.prototype.toSyncData=function(t,e,n){var i;return i=r.__super__.toSyncData.call(this,t,e,n),"create"!==e&&"update"!==e&&"patch"!==e?i:(null!=this.get("company_name")&&(i.startup||(i.startup={}),i.startup.company_name=this.get("company_name"),delete i.startup_role.company_name),null!=this.get("metadata_id")&&(i.metadata_id||(i.metadata_id=null),i.metadata_id=this.get("metadata_id"),delete i.startup_role.metadata_id),delete i.startup_role.startup,i.startup_role=_.omit(i.startup_role,_.filter(_.keys(i.startup_role),function(t){return"startup_id"!==t&&0===t.indexOf("startup_")})),delete i.startup_role.token,i)},r.prototype.getName=function(){switch(this.direction){case"outbound":return this.get("company_name");case"inbound":return this.get("invited_name")}},r.prototype.setName=function(t){switch(this.direction){case"outbound":return this.set("company_name",t);case"inbound":return this.set("invited_name",t)}},r.prototype.reset=function(){switch(this.direction){case"outbound":return this.set("startup_id",null);case"inbound":return this.set({tagged_type:null,tagged_id:null})}},r.prototype.confirm=function(){return e.ajax({url:"/startup_roles/approve",method:"POST",data:{token:this.id}})},r.prototype.parse=function(t){return t.role},r.prototype.autocomplete=function(t){return new i(t,{selectCallback:function(e){return function(n){switch(t.val(n.name),e.direction){case"outbound":e.set("company_name",n.name),e.set("startup_id",n.id);break;case"inbound":e.shell=n.shell,e.set("invited_name",n.name),e.set("tagged_id",n.id),e.set("tagged_type",n.model)}return e.trigger(n.id?"autocomplete":"noautocomplete")}}(this),queryOptions:{klasses:t.parent().data("klasses")},roles:!0})},r}(n("StartupRole"))})}.call(this),!function(t){"function"==typeof define&&define.amd?define("jquery.magnific",["jquery"],t):t("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)}(function(t){var e,n,i,r,o,s,a,l="Close",u="BeforeClose",c="AfterClose",p="BeforeAppend",d="MarkupParse",h="Open",f="Change",m="mfp",g="."+m,_="mfp-ready",v="mfp-removing",y="mfp-prevent-close",b=function(){},w=!!window.jQuery,x=t(window),k=function(t,n){e.ev.on(m+t+g,n)},C=function(e,n,i,r){var o=document.createElement("div");return o.className="mfp-"+e,i&&(o.innerHTML=i),r?n&&n.appendChild(o):(o=t(o),n&&o.appendTo(n)),o},$=function(n,i){e.ev.triggerHandler(m+n,i),e.st.callbacks&&(n=n.charAt(0).toLowerCase()+n.slice(1),e.st.callbacks[n]&&e.st.callbacks[n].apply(e,t.isArray(i)?i:[i]))},T=function(n){return n===a&&e.currTemplate.closeBtn||(e.currTemplate.closeBtn=t(e.st.closeMarkup.replace("%title%",e.st.tClose)),a=n),e.currTemplate.closeBtn},q=function(){t.magnificPopup.instance||(e=new b,e.init(),t.magnificPopup.instance=e)},P=function(){var t=document.createElement("p").style,e=["ms","O","Moz","Webkit"];if(void 0!==t.transition)return!0;for(;e.length;)if(e.pop()+"Transition"in t)return!0;return!1};b.prototype={constructor:b,init:function(){var n=navigator.appVersion;e.isIE7=-1!==n.indexOf("MSIE 7."),e.isIE8=-1!==n.indexOf("MSIE 8."),e.isLowIE=e.isIE7||e.isIE8,e.isAndroid=/android/gi.test(n),e.isIOS=/iphone|ipad|ipod/gi.test(n),e.supportsTransition=P(),e.probablyMobile=e.isAndroid||e.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),r=t(document),e.popupsCache={}},open:function(n){i||(i=t(document.body));var o;if(n.isObj===!1){e.items=n.items.toArray(),e.index=0;var a,l=n.items;for(o=0;o<l.length;o++)if(a=l[o],a.parsed&&(a=a.el[0]),a===n.el[0]){e.index=o;break}}else e.items=t.isArray(n.items)?n.items:[n.items],e.index=n.index||0;if(e.isOpen)return void e.updateItemHTML();e.types=[],s="",e.ev=n.mainEl&&n.mainEl.length?n.mainEl.eq(0):r,n.key?(e.popupsCache[n.key]||(e.popupsCache[n.key]={}),e.currTemplate=e.popupsCache[n.key]):e.currTemplate={},e.st=t.extend(!0,{},t.magnificPopup.defaults,n),e.fixedContentPos="auto"===e.st.fixedContentPos?!e.probablyMobile:e.st.fixedContentPos,e.st.modal&&(e.st.closeOnContentClick=!1,e.st.closeOnBgClick=!1,e.st.showCloseBtn=!1,e.st.enableEscapeKey=!1),e.bgOverlay||(e.bgOverlay=C("bg").on("click"+g,function(){e.close()}),e.wrap=C("wrap").attr("tabindex",-1).on("click"+g,function(t){e._checkIfClose(t.target)&&e.close()}),e.container=C("container",e.wrap)),e.contentContainer=C("content"),e.st.preloader&&(e.preloader=C("preloader",e.container,e.st.tLoading));var u=t.magnificPopup.modules;for(o=0;o<u.length;o++){var c=u[o];c=c.charAt(0).toUpperCase()+c.slice(1),e["init"+c].call(e)}$("BeforeOpen"),e.st.showCloseBtn&&(e.st.closeBtnInside?(k(d,function(t,e,n,i){n.close_replaceWith=T(i.type)}),s+=" mfp-close-btn-in"):e.wrap.append(T())),e.st.alignTop&&(s+=" mfp-align-top"),e.wrap.css(e.fixedContentPos?{overflow:e.st.overflowY,overflowX:"hidden",overflowY:e.st.overflowY}:{top:x.scrollTop(),position:"absolute"}),(e.st.fixedBgPos===!1||"auto"===e.st.fixedBgPos&&!e.fixedContentPos)&&e.bgOverlay.css({height:r.height(),position:"absolute"}),e.st.enableEscapeKey&&r.on("keyup"+g,function(t){27===t.keyCode&&e.close()}),x.on("resize"+g,function(){e.updateSize()}),e.st.closeOnContentClick||(s+=" mfp-auto-cursor"),s&&e.wrap.addClass(s);var p=e.wH=x.height(),f={};if(e.fixedContentPos&&e._hasScrollBar(p)){var m=e._getScrollbarSize();m&&(f.marginRight=m)}e.fixedContentPos&&(e.isIE7?t("body, html").css("overflow","hidden"):f.overflow="hidden");var v=e.st.mainClass;return e.isIE7&&(v+=" mfp-ie7"),v&&e._addClassToMFP(v),e.updateItemHTML(),$("BuildControls"),t("html").css(f),e.bgOverlay.add(e.wrap).prependTo(e.st.prependTo||i),e._lastFocusedEl=document.activeElement,setTimeout(function(){e.content?(e._addClassToMFP(_),e._setFocus()):e.bgOverlay.addClass(_),r.on("focusin"+g,e._onFocusIn)},16),e.isOpen=!0,e.updateSize(p),$(h),n},close:function(){e.isOpen&&($(u),e.isOpen=!1,e.st.removalDelay&&!e.isLowIE&&e.supportsTransition?(e._addClassToMFP(v),setTimeout(function(){e._close()},e.st.removalDelay)):e._close())},_close:function(){$(l);var n=v+" "+_+" ";if(e.bgOverlay.detach(),e.wrap.detach(),e.container.empty(),e.st.mainClass&&(n+=e.st.mainClass+" "),e._removeClassFromMFP(n),e.fixedContentPos){var i={marginRight:""};e.isIE7?t("body, html").css("overflow",""):i.overflow="",t("html").css(i)}r.off("keyup"+g+" focusin"+g),e.ev.off(g),e.wrap.attr("class","mfp-wrap").removeAttr("style"),e.bgOverlay.attr("class","mfp-bg"),e.container.attr("class","mfp-container"),!e.st.showCloseBtn||e.st.closeBtnInside&&e.currTemplate[e.currItem.type]!==!0||e.currTemplate.closeBtn&&e.currTemplate.closeBtn.detach(),e._lastFocusedEl&&t(e._lastFocusedEl).focus(),e.currItem=null,e.content=null,e.currTemplate=null,e.prevHeight=0,$(c)},updateSize:function(t){if(e.isIOS){var n=document.documentElement.clientWidth/window.innerWidth,i=window.innerHeight*n;e.wrap.css("height",i),e.wH=i}else e.wH=t||x.height();e.fixedContentPos||e.wrap.css("height",e.wH),$("Resize")},updateItemHTML:function(){var n=e.items[e.index];e.contentContainer.detach(),e.content&&e.content.detach(),n.parsed||(n=e.parseEl(e.index));var i=n.type;if($("BeforeChange",[e.currItem?e.currItem.type:"",i]),e.currItem=n,!e.currTemplate[i]){var r=e.st[i]?e.st[i].markup:!1;$("FirstMarkupParse",r),e.currTemplate[i]=r?t(r):!0}o&&o!==n.type&&e.container.removeClass("mfp-"+o+"-holder");var s=e["get"+i.charAt(0).toUpperCase()+i.slice(1)](n,e.currTemplate[i]);e.appendContent(s,i),n.preloaded=!0,$(f,n),o=n.type,e.container.prepend(e.contentContainer),$("AfterChange")},appendContent:function(t,n){e.content=t,t?e.st.showCloseBtn&&e.st.closeBtnInside&&e.currTemplate[n]===!0?e.content.find(".mfp-close").length||e.content.append(T()):e.content=t:e.content="",$(p),e.container.addClass("mfp-"+n+"-holder"),e.contentContainer.append(e.content)},parseEl:function(n){var i,r=e.items[n];
if(r.tagName?r={el:t(r)}:(i=r.type,r={data:r,src:r.src}),r.el){for(var o=e.types,s=0;s<o.length;s++)if(r.el.hasClass("mfp-"+o[s])){i=o[s];break}r.src=r.el.attr("data-mfp-src"),r.src||(r.src=r.el.attr("href"))}return r.type=i||e.st.type||"inline",r.index=n,r.parsed=!0,e.items[n]=r,$("ElementParse",r),e.items[n]},addGroup:function(t,n){var i=function(i){i.mfpEl=this,e._openClick(i,t,n)};n||(n={});var r="click.magnificPopup";n.mainEl=t,n.items?(n.isObj=!0,t.off(r).on(r,i)):(n.isObj=!1,n.delegate?t.off(r).on(r,n.delegate,i):(n.items=t,t.off(r).on(r,i)))},_openClick:function(n,i,r){var o=void 0!==r.midClick?r.midClick:t.magnificPopup.defaults.midClick;if(o||2!==n.which&&!n.ctrlKey&&!n.metaKey){var s=void 0!==r.disableOn?r.disableOn:t.magnificPopup.defaults.disableOn;if(s)if(t.isFunction(s)){if(!s.call(e))return!0}else if(x.width()<s)return!0;n.type&&(n.preventDefault(),e.isOpen&&n.stopPropagation()),r.el=t(n.mfpEl),r.delegate&&(r.items=i.find(r.delegate)),e.open(r)}},updateStatus:function(t,i){if(e.preloader){n!==t&&e.container.removeClass("mfp-s-"+n),i||"loading"!==t||(i=e.st.tLoading);var r={status:t,text:i};$("UpdateStatus",r),t=r.status,i=r.text,e.preloader.html(i),e.preloader.find("a").on("click",function(t){t.stopImmediatePropagation()}),e.container.addClass("mfp-s-"+t),n=t}},_checkIfClose:function(n){if(!t(n).hasClass(y)){var i=e.st.closeOnContentClick,r=e.st.closeOnBgClick;if(i&&r)return!0;if(!e.content||t(n).hasClass("mfp-close")||e.preloader&&n===e.preloader[0])return!0;if(n===e.content[0]||t.contains(e.content[0],n)){if(i)return!0}else if(r&&t.contains(document,n))return!0;return!1}},_addClassToMFP:function(t){e.bgOverlay.addClass(t),e.wrap.addClass(t)},_removeClassFromMFP:function(t){this.bgOverlay.removeClass(t),e.wrap.removeClass(t)},_hasScrollBar:function(t){return(e.isIE7?r.height():document.body.scrollHeight)>(t||x.height())},_setFocus:function(){(e.st.focus?e.content.find(e.st.focus).eq(0):e.wrap).focus()},_onFocusIn:function(n){return n.target===e.wrap[0]||t.contains(e.wrap[0],n.target)?void 0:(e._setFocus(),!1)},_parseMarkup:function(e,n,i){var r;i.data&&(n=t.extend(i.data,n)),$(d,[e,n,i]),t.each(n,function(t,n){if(void 0===n||n===!1)return!0;if(r=t.split("_"),r.length>1){var i=e.find(g+"-"+r[0]);if(i.length>0){var o=r[1];"replaceWith"===o?i[0]!==n[0]&&i.replaceWith(n):"img"===o?i.is("img")?i.attr("src",n):i.replaceWith('<img src="'+n+'" class="'+i.attr("class")+'" />'):i.attr(r[1],n)}}else e.find(g+"-"+t).html(n)})},_getScrollbarSize:function(){if(void 0===e.scrollbarSize){var t=document.createElement("div");t.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(t),e.scrollbarSize=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return e.scrollbarSize}},t.magnificPopup={instance:null,proto:b.prototype,modules:[],open:function(e,n){return q(),e=e?t.extend(!0,{},e):{},e.isObj=!0,e.index=n||0,this.instance.open(e)},close:function(){return t.magnificPopup.instance&&t.magnificPopup.instance.close()},registerModule:function(e,n){n.options&&(t.magnificPopup.defaults[e]=n.options),t.extend(this.proto,n.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},t.fn.magnificPopup=function(n){q();var i=t(this);if("string"==typeof n)if("open"===n){var r,o=w?i.data("magnificPopup"):i[0].magnificPopup,s=parseInt(arguments[1],10)||0;o.items?r=o.items[s]:(r=i,o.delegate&&(r=r.find(o.delegate)),r=r.eq(s)),e._openClick({mfpEl:r},i,o)}else e.isOpen&&e[n].apply(e,Array.prototype.slice.call(arguments,1));else n=t.extend(!0,{},n),w?i.data("magnificPopup",n):i[0].magnificPopup=n,e.addGroup(i,n);return i};var j,S,E,z="inline",I=function(){E&&(S.after(E.addClass(j)).detach(),E=null)};t.magnificPopup.registerModule(z,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){e.types.push(z),k(l+"."+z,function(){I()})},getInline:function(n,i){if(I(),n.src){var r=e.st.inline,o=t(n.src);if(o.length){var s=o[0].parentNode;s&&s.tagName&&(S||(j=r.hiddenClass,S=C(j),j="mfp-"+j),E=o.after(S).detach().removeClass(j)),e.updateStatus("ready")}else e.updateStatus("error",r.tNotFound),o=t("<div>");return n.inlineElement=o,o}return e.updateStatus("ready"),e._parseMarkup(i,{},n),i}}});var A,D="ajax",F=function(){A&&i.removeClass(A)},O=function(){F(),e.req&&e.req.abort()};t.magnificPopup.registerModule(D,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){e.types.push(D),A=e.st.ajax.cursor,k(l+"."+D,O),k("BeforeChange."+D,O)},getAjax:function(n){A&&i.addClass(A),e.updateStatus("loading");var r=t.extend({url:n.src,success:function(i,r,o){var s={data:i,xhr:o};$("ParseAjax",s),e.appendContent(t(s.data),D),n.finished=!0,F(),e._setFocus(),setTimeout(function(){e.wrap.addClass(_)},16),e.updateStatus("ready"),$("AjaxContentAdded")},error:function(){F(),n.finished=n.loadError=!0,e.updateStatus("error",e.st.ajax.tError.replace("%url%",n.src))}},e.st.ajax.settings);return e.req=t.ajax(r),""}}});var R,M=function(n){if(n.data&&void 0!==n.data.title)return n.data.title;var i=e.st.image.titleSrc;if(i){if(t.isFunction(i))return i.call(e,n);if(n.el)return n.el.attr(i)||""}return""};t.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var t=e.st.image,n=".image";e.types.push("image"),k(h+n,function(){"image"===e.currItem.type&&t.cursor&&i.addClass(t.cursor)}),k(l+n,function(){t.cursor&&i.removeClass(t.cursor),x.off("resize"+g)}),k("Resize"+n,e.resizeImage),e.isLowIE&&k("AfterChange",e.resizeImage)},resizeImage:function(){var t=e.currItem;if(t&&t.img&&e.st.image.verticalFit){var n=0;e.isLowIE&&(n=parseInt(t.img.css("padding-top"),10)+parseInt(t.img.css("padding-bottom"),10)),t.img.css("max-height",e.wH-n)}},_onImageHasSize:function(t){t.img&&(t.hasSize=!0,R&&clearInterval(R),t.isCheckingImgSize=!1,$("ImageHasSize",t),t.imgHidden&&(e.content&&e.content.removeClass("mfp-loading"),t.imgHidden=!1))},findImageSize:function(t){var n=0,i=t.img[0],r=function(o){R&&clearInterval(R),R=setInterval(function(){return i.naturalWidth>0?void e._onImageHasSize(t):(n>200&&clearInterval(R),n++,void(3===n?r(10):40===n?r(50):100===n&&r(500)))},o)};r(1)},getImage:function(n,i){var r=0,o=function(){n&&(n.img[0].complete?(n.img.off(".mfploader"),n===e.currItem&&(e._onImageHasSize(n),e.updateStatus("ready")),n.hasSize=!0,n.loaded=!0,$("ImageLoadComplete")):(r++,200>r?setTimeout(o,100):s()))},s=function(){n&&(n.img.off(".mfploader"),n===e.currItem&&(e._onImageHasSize(n),e.updateStatus("error",a.tError.replace("%url%",n.src))),n.hasSize=!0,n.loaded=!0,n.loadError=!0)},a=e.st.image,l=i.find(".mfp-img");if(l.length){var u=document.createElement("img");u.className="mfp-img",n.el&&n.el.find("img").length&&(u.alt=n.el.find("img").attr("alt")),n.img=t(u).on("load.mfploader",o).on("error.mfploader",s),u.src=n.src,l.is("img")&&(n.img=n.img.clone()),u=n.img[0],u.naturalWidth>0?n.hasSize=!0:u.width||(n.hasSize=!1)}return e._parseMarkup(i,{title:M(n),img_replaceWith:n.img},n),e.resizeImage(),n.hasSize?(R&&clearInterval(R),n.loadError?(i.addClass("mfp-loading"),e.updateStatus("error",a.tError.replace("%url%",n.src))):(i.removeClass("mfp-loading"),e.updateStatus("ready")),i):(e.updateStatus("loading"),n.loading=!0,n.hasSize||(n.imgHidden=!0,i.addClass("mfp-loading"),e.findImageSize(n)),i)}}});var L,N=function(){return void 0===L&&(L=void 0!==document.createElement("p").style.MozTransform),L};t.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(t){return t.is("img")?t:t.find("img")}},proto:{initZoom:function(){var t,n=e.st.zoom,i=".zoom";if(n.enabled&&e.supportsTransition){var r,o,s=n.duration,a=function(t){var e=t.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),i="all "+n.duration/1e3+"s "+n.easing,r={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},o="transition";return r["-webkit-"+o]=r["-moz-"+o]=r["-o-"+o]=r[o]=i,e.css(r),e},c=function(){e.content.css("visibility","visible")};k("BuildControls"+i,function(){if(e._allowZoom()){if(clearTimeout(r),e.content.css("visibility","hidden"),t=e._getItemToZoom(),!t)return void c();o=a(t),o.css(e._getOffset()),e.wrap.append(o),r=setTimeout(function(){o.css(e._getOffset(!0)),r=setTimeout(function(){c(),setTimeout(function(){o.remove(),t=o=null,$("ZoomAnimationEnded")},16)},s)},16)}}),k(u+i,function(){if(e._allowZoom()){if(clearTimeout(r),e.st.removalDelay=s,!t){if(t=e._getItemToZoom(),!t)return;o=a(t)}o.css(e._getOffset(!0)),e.wrap.append(o),e.content.css("visibility","hidden"),setTimeout(function(){o.css(e._getOffset())},16)}}),k(l+i,function(){e._allowZoom()&&(c(),o&&o.remove(),t=null)})}},_allowZoom:function(){return"image"===e.currItem.type},_getItemToZoom:function(){return e.currItem.hasSize?e.currItem.img:!1},_getOffset:function(n){var i;i=n?e.currItem.img:e.st.zoom.opener(e.currItem.el||e.currItem);var r=i.offset(),o=parseInt(i.css("padding-top"),10),s=parseInt(i.css("padding-bottom"),10);r.top-=t(window).scrollTop()-o;var a={width:i.width(),height:(w?i.innerHeight():i[0].offsetHeight)-s-o};return N()?a["-moz-transform"]=a.transform="translate("+r.left+"px,"+r.top+"px)":(a.left=r.left,a.top=r.top),a}}});var W="iframe",B="//about:blank",U=function(t){if(e.currTemplate[W]){var n=e.currTemplate[W].find("iframe");n.length&&(t||(n[0].src=B),e.isIE8&&n.css("display",t?"block":"none"))}};t.magnificPopup.registerModule(W,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){e.types.push(W),k("BeforeChange",function(t,e,n){e!==n&&(e===W?U():n===W&&U(!0))}),k(l+"."+W,function(){U()})},getIframe:function(n,i){var r=n.src,o=e.st.iframe;t.each(o.patterns,function(){return r.indexOf(this.index)>-1?(this.id&&(r="string"==typeof this.id?r.substr(r.lastIndexOf(this.id)+this.id.length,r.length):this.id.call(this,r)),r=this.src.replace("%id%",r),!1):void 0});var s={};return o.srcAction&&(s[o.srcAction]=r),e._parseMarkup(i,s,n),e.updateStatus("ready"),i}}});var V=function(t){var n=e.items.length;return t>n-1?t-n:0>t?n+t:t},H=function(t,e,n){return t.replace(/%curr%/gi,e+1).replace(/%total%/gi,n)};t.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var n=e.st.gallery,i=".mfp-gallery",o=Boolean(t.fn.mfpFastClick);return e.direction=!0,n&&n.enabled?(s+=" mfp-gallery",k(h+i,function(){n.navigateByImgClick&&e.wrap.on("click"+i,".mfp-img",function(){return e.items.length>1?(e.next(),!1):void 0}),r.on("keydown"+i,function(t){37===t.keyCode?e.prev():39===t.keyCode&&e.next()})}),k("UpdateStatus"+i,function(t,n){n.text&&(n.text=H(n.text,e.currItem.index,e.items.length))}),k(d+i,function(t,i,r,o){var s=e.items.length;r.counter=s>1?H(n.tCounter,o.index,s):""}),k("BuildControls"+i,function(){if(e.items.length>1&&n.arrows&&!e.arrowLeft){var i=n.arrowMarkup,r=e.arrowLeft=t(i.replace(/%title%/gi,n.tPrev).replace(/%dir%/gi,"left")).addClass(y),s=e.arrowRight=t(i.replace(/%title%/gi,n.tNext).replace(/%dir%/gi,"right")).addClass(y),a=o?"mfpFastClick":"click";r[a](function(){e.prev()}),s[a](function(){e.next()}),e.isIE7&&(C("b",r[0],!1,!0),C("a",r[0],!1,!0),C("b",s[0],!1,!0),C("a",s[0],!1,!0)),e.container.append(r.add(s))}}),k(f+i,function(){e._preloadTimeout&&clearTimeout(e._preloadTimeout),e._preloadTimeout=setTimeout(function(){e.preloadNearbyImages(),e._preloadTimeout=null},16)}),void k(l+i,function(){r.off(i),e.wrap.off("click"+i),e.arrowLeft&&o&&e.arrowLeft.add(e.arrowRight).destroyMfpFastClick(),e.arrowRight=e.arrowLeft=null})):!1},next:function(){e.direction=!0,e.index=V(e.index+1),e.updateItemHTML()},prev:function(){e.direction=!1,e.index=V(e.index-1),e.updateItemHTML()},goTo:function(t){e.direction=t>=e.index,e.index=t,e.updateItemHTML()},preloadNearbyImages:function(){var t,n=e.st.gallery.preload,i=Math.min(n[0],e.items.length),r=Math.min(n[1],e.items.length);for(t=1;t<=(e.direction?r:i);t++)e._preloadItem(e.index+t);for(t=1;t<=(e.direction?i:r);t++)e._preloadItem(e.index-t)},_preloadItem:function(n){if(n=V(n),!e.items[n].preloaded){var i=e.items[n];i.parsed||(i=e.parseEl(n)),$("LazyLoad",i),"image"===i.type&&(i.img=t('<img class="mfp-img" />').on("load.mfploader",function(){i.hasSize=!0}).on("error.mfploader",function(){i.hasSize=!0,i.loadError=!0,$("LazyLoadError",i)}).attr("src",i.src)),i.preloaded=!0}}}});var Q="retina";t.magnificPopup.registerModule(Q,{options:{replaceSrc:function(t){return t.src.replace(/\.\w+$/,function(t){return"@2x"+t})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var t=e.st.retina,n=t.ratio;n=isNaN(n)?n():n,n>1&&(k("ImageHasSize."+Q,function(t,e){e.img.css({"max-width":e.img[0].naturalWidth/n,width:"100%"})}),k("ElementParse."+Q,function(e,i){i.src=t.replaceSrc(i,n)}))}}}}),function(){var e=1e3,n="ontouchstart"in window,i=function(){x.off("touchmove"+o+" touchend"+o)},r="mfpFastClick",o="."+r;t.fn.mfpFastClick=function(r){return t(this).each(function(){var s,a=t(this);if(n){var l,u,c,p,d,h;a.on("touchstart"+o,function(t){p=!1,h=1,d=t.originalEvent?t.originalEvent.touches[0]:t.touches[0],u=d.clientX,c=d.clientY,x.on("touchmove"+o,function(t){d=t.originalEvent?t.originalEvent.touches:t.touches,h=d.length,d=d[0],(Math.abs(d.clientX-u)>10||Math.abs(d.clientY-c)>10)&&(p=!0,i())}).on("touchend"+o,function(t){i(),p||h>1||(s=!0,t.preventDefault(),clearTimeout(l),l=setTimeout(function(){s=!1},e),r())})})}a.on("click"+o,function(){s||r()})})},t.fn.destroyMfpFastClick=function(){t(this).off("touchstart"+o+" click"+o),n&&x.off("touchmove"+o+" touchend"+o)}}(),q()}),define("require-css/css!magnific-popup/magnific-popup",[],function(){}),define("require-css/css!coffeescripts/plugins/jquery.magnific",[],function(){}),function(){define("config/jquery.magnific",["jquery","jquery.magnific","css!magnific-popup/magnific-popup","css!coffeescripts/plugins/jquery.magnific"],function(t,e){var n;return t.extend(!0,t.magnificPopup.defaults,{mainClass:"theme-standard"}),(n=t.magnificPopup.defaults).callbacks||(n.callbacks={}),t.extend(!0,t.magnificPopup.defaults.callbacks,{parseAjax:function(e){return e.data=t(e.data).filter("*")}}),e})}.call(this),function(){define("controllers/profiles",["require","jquery","underscore","backbone","lib/dropdown","lib/investor_flags","lib/structured_bio","lib/partials","lib/form","models/repository","models/startup_role","global/tiptip","google/analytics","mixpanel","qtip","jquery.magnific"],function(t,e,n,i,r,o,s,a,l,u,c,p,d,h){return{follows:function(t){var n;return t(".navigation_tabs a").on("click",function(t){return t.preventDefault(),a["with"](e(a.selector("profiles/show/social")),function(e){return e.getFollows(t)})}),n=1,t(".more_link").on("click",function(){return n++,t(this).addClass("loading"),e.get(t(this).attr("href"),{page:n},function(n){return function(i){var r,o,s,a;for(s=i.rendered_items,r=0,o=s.length;o>r;r++)a=s[r],e("<li>").appendTo(t(".items")).append(e(a));return t(n).removeClass("loading"),0===i.rendered_items.length?t(n).remove():void 0}}(this),"json"),!1})},claim_form:function(t,e){var n,i;return n=t("form"),i=l.loadingOptions(n,{dataType:"json",beforeSend:function(){return t(".errors").addClass("hidden")},success:function(n){return n.success?(e.children("p, form").filter(":not(.success)").hide(),t("p.success").removeClass("hidden")):t(".errors").removeClass("hidden").effect("pulsate",{times:2},1e3)}}),n.ajaxForm(i)},dealflow:function(t){return t(".more").on("click",function(){return t(this).hide(),t(this).siblings("li").show()})},quality_score:function(){return TipTip.init(),null!=h&&h.track_links(".tip_link","user profile completeness: rank tip_click"),e("a").click(function(){return e(this).attr("href").indexOf("#")>=0&&e.facybox.close(),!0})},profile_tips:function(){return TipTip.init(),null!=h&&h.track_links(".tip_link","user profile completeness: tips tip_click"),e("a").click(function(){return e(this).attr("href").indexOf("#")>=0&&e.facybox.close(),!0})},back_syndicate_button:function(t,n){var i,r;return r=.5,n.hasClass("hidden")&&(r=0),i=function(){var t;return n.hasClass("force_show")?void 0:("#syndicates"===window.location.hash||window.location.href.match(/[\/#]syndicate$/)||window.location.href.match(/syndicate\?open/)?n.fadeTo("fast",r):n.fadeTo("fast",1),t=!1)},i(),e(window).on("hashchange",function(){return i(),!0}),t("a").click(function(){return h.track("Backer: Clicked back button",{identifier:e(this).data("identifier")},function(t){return function(){return window.location=e(t).attr("href")}}(this)),!1})},show_new:function(t,n){return d.push(["_trackPageview","/PV/user_profile"]),t(".reviews > .more").on("click",function(){return t(this).hide(),t(".reviews > .review").removeClass("extra")}),n.on("click",".links a",function(t){return a["with"](e(a.selector("startup_roles/portfolio")),function(e){return null!=e?e.controlsClick(t):void 0})})}}})}.call(this),!function(t){function e(t){throw RangeError(S[t])}function n(t,e){for(var n=t.length;n--;)t[n]=e(t[n]);return t}function i(t,e){return n(t.split(j),e).join(".")}function r(t){for(var e,n,i=[],r=0,o=t.length;o>r;)e=t.charCodeAt(r++),e>=55296&&56319>=e&&o>r?(n=t.charCodeAt(r++),56320==(64512&n)?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--)):i.push(e);return i}function o(t){return n(t,function(t){var e="";return t>65535&&(t-=65536,e+=I(t>>>10&1023|55296),t=56320|1023&t),e+=I(t)}).join("")}function s(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:y}function a(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function l(t,e,n){var i=0;for(t=n?z(t/k):t>>1,t+=z(t/e);t>E*w>>1;i+=y)t=z(t/E);return z(i+(E+1)*t/(t+x))}function u(t){var n,i,r,a,u,c,p,d,h,f,m=[],g=t.length,_=0,x=$,k=C;for(i=t.lastIndexOf(T),0>i&&(i=0),r=0;i>r;++r)t.charCodeAt(r)>=128&&e("not-basic"),m.push(t.charCodeAt(r));for(a=i>0?i+1:0;g>a;){for(u=_,c=1,p=y;a>=g&&e("invalid-input"),d=s(t.charCodeAt(a++)),(d>=y||d>z((v-_)/c))&&e("overflow"),_+=d*c,h=k>=p?b:p>=k+w?w:p-k,!(h>d);p+=y)f=y-h,c>z(v/f)&&e("overflow"),c*=f;n=m.length+1,k=l(_-u,n,0==u),z(_/n)>v-x&&e("overflow"),x+=z(_/n),_%=n,m.splice(_++,0,x)}return o(m)}function c(t){var n,i,o,s,u,c,p,d,h,f,m,g,_,x,k,q=[];for(t=r(t),g=t.length,n=$,i=0,u=C,c=0;g>c;++c)m=t[c],128>m&&q.push(I(m));for(o=s=q.length,s&&q.push(T);g>o;){for(p=v,c=0;g>c;++c)m=t[c],m>=n&&p>m&&(p=m);for(_=o+1,p-n>z((v-i)/_)&&e("overflow"),i+=(p-n)*_,n=p,c=0;g>c;++c)if(m=t[c],n>m&&++i>v&&e("overflow"),m==n){for(d=i,h=y;f=u>=h?b:h>=u+w?w:h-u,!(f>d);h+=y)k=d-f,x=y-f,q.push(I(a(f+k%x,0))),d=z(k/x);q.push(I(a(d,0))),u=l(i,_,o==s),i=0,++o}++i,++n}return q.join("")}function p(t){return i(t,function(t){return q.test(t)?u(t.slice(4).toLowerCase()):t})}function d(t){return i(t,function(t){return P.test(t)?"xn--"+c(t):t})}var h="object"==typeof exports&&exports,f="object"==typeof module&&module&&module.exports==h&&module,m="object"==typeof global&&global;(m.global===m||m.window===m)&&(t=m);var g,_,v=2147483647,y=36,b=1,w=26,x=38,k=700,C=72,$=128,T="-",q=/^xn--/,P=/[^ -~]/,j=/\x2E|\u3002|\uFF0E|\uFF61/g,S={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=y-b,z=Math.floor,I=String.fromCharCode;if(g={version:"1.2.3",ucs2:{decode:r,encode:o},decode:u,encode:c,toASCII:d,toUnicode:p},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("uri/punycode",[],function(){return g});else if(h&&!h.nodeType)if(f)f.exports=g;else for(_ in g)g.hasOwnProperty(_)&&(h[_]=g[_]);else t.punycode=g}(this),!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("uri/IPv6",e):t.IPv6=e(t)}(this,function(t){function e(t){var e=t.toLowerCase(),n=e.split(":"),i=n.length,r=8;""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[i-1]&&""===n[i-2]&&n.pop(),i=n.length,-1!==n[i-1].indexOf(".")&&(r=7);var o;for(o=0;i>o&&""!==n[o];o++);if(r>o){for(n.splice(o,1,"0000");n.length<r;)n.splice(o,0,"0000");i=n.length}for(var s,a=0;r>a;a++){s=n[a].split("");for(var l=0;3>l&&"0"===s[0]&&s.length>1;l++)s.splice(0,1);n[a]=s.join("")}var u=-1,c=0,p=0,d=-1,h=!1;for(a=0;r>a;a++)h?"0"===n[a]?p+=1:(h=!1,p>c&&(u=d,c=p)):"0"===n[a]&&(h=!0,d=a,p=1);p>c&&(u=d,c=p),c>1&&n.splice(u,c,""),i=n.length;var f="";for(""===n[0]&&(f=":"),a=0;i>a&&(f+=n[a],a!==i-1);a++)f+=":";return""===n[i-1]&&(f+=":"),f}function n(){return t.IPv6===this&&(t.IPv6=i),this}var i=t&&t.IPv6;return{best:e,noConflict:n}}),!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("uri/SecondLevelDomains",e):t.SecondLevelDomains=e(t)}(this,function(t){var e=t&&t.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ","do":" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ","in":" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(t){var e=t.lastIndexOf(".");if(0>=e||e>=t.length-1)return!1;var i=t.lastIndexOf(".",e-1);if(0>=i||i>=e-1)return!1;var r=n.list[t.slice(e+1)];return r?r.indexOf(" "+t.slice(i+1,e)+" ")>=0:!1},is:function(t){var e=t.lastIndexOf(".");if(0>=e||e>=t.length-1)return!1;var i=t.lastIndexOf(".",e-1);if(i>=0)return!1;var r=n.list[t.slice(e+1)];return r?r.indexOf(" "+t.slice(0,e)+" ")>=0:!1},get:function(t){var e=t.lastIndexOf(".");if(0>=e||e>=t.length-1)return null;var i=t.lastIndexOf(".",e-1);if(0>=i||i>=e-1)return null;var r=n.list[t.slice(e+1)];return r?r.indexOf(" "+t.slice(i+1,e)+" ")<0?null:t.slice(i+1):null},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this}};return n}),!function(t,e){"object"==typeof exports?module.exports=e(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define("uri/URI",["./punycode","./IPv6","./SecondLevelDomains"],e):t.URI=e(t.punycode,t.IPv6,t.SecondLevelDomains,t)}(this,function(t,e,n,i){function r(t,e){return this instanceof r?(void 0===t&&(t="undefined"!=typeof location?location.href+"":""),this.href(t),void 0!==e?this.absoluteTo(e):this):new r(t,e)}function o(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function s(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function a(t){return"Array"===s(t)}function l(t,e){var n,i,r={};if(a(e))for(n=0,i=e.length;i>n;n++)r[e[n]]=!0;else r[e]=!0;for(n=0,i=t.length;i>n;n++)void 0!==r[t[n]]&&(t.splice(n,1),i--,n--);return t}function u(t,e){var n,i;if(a(e)){for(n=0,i=e.length;i>n;n++)if(!u(t,e[n]))return!1;return!0}var r=s(e);for(n=0,i=t.length;i>n;n++)if("RegExp"===r){if("string"==typeof t[n]&&t[n].match(e))return!0}else if(t[n]===e)return!0;return!1}function c(t,e){if(!a(t)||!a(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var n=0,i=t.length;i>n;n++)if(t[n]!==e[n])return!1;return!0}function p(t){return escape(t)}function d(t){return encodeURIComponent(t).replace(/[!'()*]/g,p).replace(/\*/g,"%2A")}function h(t){return function(e,n){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!n),this)}}function f(t,e){return function(n,i){return void 0===n?this._parts[t]||"":(null!==n&&(n+="",n.charAt(0)===e&&(n=n.substring(1))),this._parts[t]=n,this.build(!i),this)}}var m=i&&i.URI;r.version="1.14.1";var g=r.prototype,_=Object.prototype.hasOwnProperty;r._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:r.duplicateQueryParameters,escapeQuerySpace:r.escapeQuerySpace}},r.duplicateQueryParameters=!1,r.escapeQuerySpace=!0,r.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,r.idn_expression=/[^a-z0-9\.-]/i,r.punycode_expression=/(xn--)/i,r.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/gi,r.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u201e\u2018\u2019]+$/},r.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},r.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,r.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},r.getDomAttribute=function(t){if(!t||!t.nodeName)return void 0;
var e=t.nodeName.toLowerCase();return"input"===e&&"image"!==t.type?void 0:r.domAttributes[e]},r.encode=d,r.decode=decodeURIComponent,r.iso8859=function(){r.encode=escape,r.decode=unescape},r.unicode=function(){r.encode=d,r.decode=decodeURIComponent},r.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},r.encodeQuery=function(t,e){var n=r.encode(t+"");return void 0===e&&(e=r.escapeQuerySpace),e?n.replace(/%20/g,"+"):n},r.decodeQuery=function(t,e){t+="",void 0===e&&(e=r.escapeQuerySpace);try{return r.decode(e?t.replace(/\+/g,"%20"):t)}catch(n){return t}},r.recodePath=function(t){for(var e=(t+"").split("/"),n=0,i=e.length;i>n;n++)e[n]=r.encodePathSegment(r.decode(e[n]));return e.join("/")},r.decodePath=function(t){for(var e=(t+"").split("/"),n=0,i=e.length;i>n;n++)e[n]=r.decodePathSegment(e[n]);return e.join("/")};var v,y={encode:"encode",decode:"decode"},b=function(t,e){return function(n){try{return r[e](n+"").replace(r.characters[t][e].expression,function(n){return r.characters[t][e].map[n]})}catch(i){return n}}};for(v in y)r[v+"PathSegment"]=b("pathname",y[v]);r.encodeReserved=b("reserved","encode"),r.parse=function(t,e){var n;return e||(e={}),n=t.indexOf("#"),n>-1&&(e.fragment=t.substring(n+1)||null,t=t.substring(0,n)),n=t.indexOf("?"),n>-1&&(e.query=t.substring(n+1)||null,t=t.substring(0,n)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=r.parseAuthority(t,e)):(n=t.indexOf(":"),n>-1&&(e.protocol=t.substring(0,n)||null,e.protocol&&!e.protocol.match(r.protocol_expression)?e.protocol=void 0:"//"===t.substring(n+1,n+3)?(t=t.substring(n+3),t=r.parseAuthority(t,e)):(t=t.substring(n+1),e.urn=!0))),e.path=t,e},r.parseHost=function(t,e){var n,i,r=t.indexOf("/");return-1===r&&(r=t.length),"["===t.charAt(0)?(n=t.indexOf("]"),e.hostname=t.substring(1,n)||null,e.port=t.substring(n+2,r)||null,"/"===e.port&&(e.port=null)):t.indexOf(":")!==t.lastIndexOf(":")?(e.hostname=t.substring(0,r)||null,e.port=null):(i=t.substring(0,r).split(":"),e.hostname=i[0]||null,e.port=i[1]||null),e.hostname&&"/"!==t.substring(r).charAt(0)&&(r++,t="/"+t),t.substring(r)||"/"},r.parseAuthority=function(t,e){return t=r.parseUserinfo(t,e),r.parseHost(t,e)},r.parseUserinfo=function(t,e){var n,i=t.indexOf("/"),o=t.lastIndexOf("@",i>-1?i:t.length-1);return o>-1&&(-1===i||i>o)?(n=t.substring(0,o).split(":"),e.username=n[0]?r.decode(n[0]):null,n.shift(),e.password=n[0]?r.decode(n.join(":")):null,t=t.substring(o+1)):(e.username=null,e.password=null),t},r.parseQuery=function(t,e){if(!t)return{};if(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!t)return{};for(var n,i,o,s={},a=t.split("&"),l=a.length,u=0;l>u;u++)n=a[u].split("="),i=r.decodeQuery(n.shift(),e),o=n.length?r.decodeQuery(n.join("="),e):null,_.call(s,i)?("string"==typeof s[i]&&(s[i]=[s[i]]),s[i].push(o)):s[i]=o;return s},r.build=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//"),e+=r.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},r.buildHost=function(t){var e="";return t.hostname?(e+=r.ip6_expression.test(t.hostname)?"["+t.hostname+"]":t.hostname,t.port&&(e+=":"+t.port),e):""},r.buildAuthority=function(t){return r.buildUserinfo(t)+r.buildHost(t)},r.buildUserinfo=function(t){var e="";return t.username&&(e+=r.encode(t.username),t.password&&(e+=":"+r.encode(t.password)),e+="@"),e},r.buildQuery=function(t,e,n){var i,o,s,l,u="";for(o in t)if(_.call(t,o)&&o)if(a(t[o]))for(i={},s=0,l=t[o].length;l>s;s++)void 0!==t[o][s]&&void 0===i[t[o][s]+""]&&(u+="&"+r.buildQueryParameter(o,t[o][s],n),e!==!0&&(i[t[o][s]+""]=!0));else void 0!==t[o]&&(u+="&"+r.buildQueryParameter(o,t[o],n));return u.substring(1)},r.buildQueryParameter=function(t,e,n){return r.encodeQuery(t,n)+(null!==e?"="+r.encodeQuery(e,n):"")},r.addQuery=function(t,e,n){if("object"==typeof e)for(var i in e)_.call(e,i)&&r.addQuery(t,i,e[i]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=n);"string"==typeof t[e]&&(t[e]=[t[e]]),a(n)||(n=[n]),t[e]=(t[e]||[]).concat(n)}},r.removeQuery=function(t,e,n){var i,o,s;if(a(e))for(i=0,o=e.length;o>i;i++)t[e[i]]=void 0;else if("object"==typeof e)for(s in e)_.call(e,s)&&r.removeQuery(t,s,e[s]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==n?t[e]===n?t[e]=void 0:a(t[e])&&(t[e]=l(t[e],n)):t[e]=void 0}},r.hasQuery=function(t,e,n,i){if("object"==typeof e){for(var o in e)if(_.call(e,o)&&!r.hasQuery(t,o,e[o]))return!1;return!0}if("string"!=typeof e)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(s(n)){case"Undefined":return e in t;case"Boolean":var l=Boolean(a(t[e])?t[e].length:t[e]);return n===l;case"Function":return!!n(t[e],e,t);case"Array":if(!a(t[e]))return!1;var p=i?u:c;return p(t[e],n);case"RegExp":return a(t[e])?i?u(t[e],n):!1:Boolean(t[e]&&t[e].match(n));case"Number":n=String(n);case"String":return a(t[e])?i?u(t[e],n):!1:t[e]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},r.commonPath=function(t,e){var n,i=Math.min(t.length,e.length);for(n=0;i>n;n++)if(t.charAt(n)!==e.charAt(n)){n--;break}return 1>n?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":(("/"!==t.charAt(n)||"/"!==e.charAt(n))&&(n=t.substring(0,n).lastIndexOf("/")),t.substring(0,n+1))},r.withinString=function(t,e,n){n||(n={});var i=n.start||r.findUri.start,o=n.end||r.findUri.end,s=n.trim||r.findUri.trim,a=/[a-z0-9-]=["']?$/i;for(i.lastIndex=0;;){var l=i.exec(t);if(!l)break;var u=l.index;if(n.ignoreHtml){var c=t.slice(Math.max(u-3,0),u);if(c&&a.test(c))continue}var p=u+t.slice(u).search(o),d=t.slice(u,p).replace(s,"");if(!n.ignore||!n.ignore.test(d)){p=u+d.length;var h=e(d,u,p,t);t=t.slice(0,u)+h+t.slice(p),i.lastIndex=u+h.length}}return i.lastIndex=0,t},r.ensureValidHostname=function(e){if(e.match(r.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(t.toASCII(e).match(r.invalid_hostname_characters))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]')}},r.noConflict=function(t){if(t){var e={URI:this.noConflict()};return i.URITemplate&&"function"==typeof i.URITemplate.noConflict&&(e.URITemplate=i.URITemplate.noConflict()),i.IPv6&&"function"==typeof i.IPv6.noConflict&&(e.IPv6=i.IPv6.noConflict()),i.SecondLevelDomains&&"function"==typeof i.SecondLevelDomains.noConflict&&(e.SecondLevelDomains=i.SecondLevelDomains.noConflict()),e}return i.URI===this&&(i.URI=m),this},g.build=function(t){return t===!0?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=r.build(this._parts),this._deferred_build=!1),this},g.clone=function(){return new r(this)},g.valueOf=g.toString=function(){return this.build(!1)._string},g.protocol=h("protocol"),g.username=h("username"),g.password=h("password"),g.hostname=h("hostname"),g.port=h("port"),g.query=f("query","?"),g.fragment=f("fragment","#"),g.search=function(t,e){var n=this.query(t,e);return"string"==typeof n&&n.length?"?"+n:n},g.hash=function(t,e){var n=this.fragment(t,e);return"string"==typeof n&&n.length?"#"+n:n},g.pathname=function(t,e){if(void 0===t||t===!0){var n=this._parts.path||(this._parts.hostname?"/":"");return t?r.decodePath(n):n}return this._parts.path=t?r.recodePath(t):"/",this.build(!e),this},g.path=g.pathname,g.href=function(t,e){var n;if(void 0===t)return this.toString();this._string="",this._parts=r._parts();var i=t instanceof r,o="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName){var s=r.getDomAttribute(t);t=t[s]||"",o=!1}if(!i&&o&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this._parts=r.parse(String(t),this._parts);else{if(!i&&!o)throw new TypeError("invalid input");var a=i?t._parts:t;for(n in a)_.call(this._parts,n)&&(this._parts[n]=a[n])}return this.build(!e),this},g.is=function(t){var e=!1,i=!1,o=!1,s=!1,a=!1,l=!1,u=!1,c=!this._parts.urn;switch(this._parts.hostname&&(c=!1,i=r.ip4_expression.test(this._parts.hostname),o=r.ip6_expression.test(this._parts.hostname),e=i||o,s=!e,a=s&&n&&n.has(this._parts.hostname),l=s&&r.idn_expression.test(this._parts.hostname),u=s&&r.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return s;case"sld":return a;case"ip":return e;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return o;case"idn":return l;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return u}return null};var w=g.protocol,x=g.port,k=g.hostname;g.protocol=function(t,e){if(void 0!==t&&t&&(t=t.replace(/:(\/\/)?$/,""),!t.match(r.protocol_expression)))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return w.call(this,t,e)},g.scheme=g.protocol,g.port=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(t+="",":"===t.charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError('Port "'+t+'" contains characters other than [0-9]');return x.call(this,t,e)},g.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var n={};r.parseHost(t,n),t=n.hostname}return k.call(this,t,e)},g.host=function(t,e){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?r.buildHost(this._parts):"":(r.parseHost(t,this._parts),this.build(!e),this)},g.authority=function(t,e){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?r.buildAuthority(this._parts):"":(r.parseAuthority(t,this._parts),this.build(!e),this)},g.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.username)return"";var n=r.buildUserinfo(this._parts);return n.substring(0,n.length-1)}return"@"!==t[t.length-1]&&(t+="@"),r.parseUserinfo(t,this._parts),this.build(!e),this},g.resource=function(t,e){var n;return void 0===t?this.path()+this.search()+this.hash():(n=r.parse(t),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!e),this)},g.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var i=this._parts.hostname.length-this.domain().length,s=this._parts.hostname.substring(0,i),a=new RegExp("^"+o(s));return t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&r.ensureValidHostname(t),this._parts.hostname=this._parts.hostname.replace(a,t),this.build(!e),this},g.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var i=this._parts.hostname.length-this.tld(e).length-1;return i=this._parts.hostname.lastIndexOf(".",i-1)+1,this._parts.hostname.substring(i)||""}if(!t)throw new TypeError("cannot set domain empty");if(r.ensureValidHostname(t),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var s=new RegExp(o(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(s,t)}return this.build(!e),this},g.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.lastIndexOf("."),r=this._parts.hostname.substring(i+1);return e!==!0&&n&&n.list[r.toLowerCase()]?n.get(this._parts.hostname)||r:r}var s;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');s=new RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");s=new RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,t)}return this.build(!e),this},g.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return t?r.decodePath(i):i}var s=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,s),l=new RegExp("^"+o(a));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=r.recodePath(t),this._parts.path=this._parts.path.replace(l,t),this.build(!e),this},g.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),i=this._parts.path.substring(n+1);return t?r.decodePathSegment(i):i}var s=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(s=!0);var a=new RegExp(o(this.filename())+"$");return t=r.recodePath(t),this._parts.path=this._parts.path.replace(a,t),s?this.normalizePath(e):this.build(!e),this},g.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path||"/"===this._parts.path)return"";var n,i,s=this.filename(),a=s.lastIndexOf(".");return-1===a?"":(n=s.substring(a+1),i=/^[a-z0-9%]+$/i.test(n)?n:"",t?r.decodePathSegment(i):i)}"."===t.charAt(0)&&(t=t.substring(1));var l,u=this.suffix();if(u)l=new RegExp(t?o(u)+"$":o("."+u)+"$");else{if(!t)return this;this._parts.path+="."+r.recodePath(t)}return l&&(t=r.recodePath(t),this._parts.path=this._parts.path.replace(l,t)),this.build(!e),this},g.segment=function(t,e,n){var i=this._parts.urn?":":"/",r=this.path(),o="/"===r.substring(0,1),s=r.split(i);if(void 0!==t&&"number"!=typeof t&&(n=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(o&&s.shift(),0>t&&(t=Math.max(s.length+t,0)),void 0===e)return void 0===t?s:s[t];if(null===t||void 0===s[t])if(a(e)){s=[];for(var l=0,u=e.length;u>l;l++)(e[l].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(e[l]))}else(e||"string"==typeof e)&&(""===s[s.length-1]?s[s.length-1]=e:s.push(e));else e?s[t]=e:s.splice(t,1);return o&&s.unshift(""),this.path(s.join(i),n)},g.segmentCoded=function(t,e,n){var i,o,s;if("number"!=typeof t&&(n=e,e=t,t=void 0),void 0===e){if(i=this.segment(t,e,n),a(i))for(o=0,s=i.length;s>o;o++)i[o]=r.decode(i[o]);else i=void 0!==i?r.decode(i):void 0;return i}if(a(e))for(o=0,s=e.length;s>o;o++)e[o]=r.decode(e[o]);else e="string"==typeof e||e instanceof String?r.encode(e):e;return this.segment(t,e,n)};var C=g.query;return g.query=function(t,e){if(t===!0)return r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var n=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace),i=t.call(this,n);return this._parts.query=r.buildQuery(i||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=r.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):C.call(this,t,e)},g.setQuery=function(t,e,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof t||t instanceof String)i[t]=void 0!==e?e:null;else{if("object"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var o in t)_.call(t,o)&&(i[o]=t[o])}return this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},g.addQuery=function(t,e,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.addQuery(i,t,void 0===e?null:e),this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},g.removeQuery=function(t,e,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.removeQuery(i,t,e),this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},g.hasQuery=function(t,e,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.hasQuery(i,t,e,n)},g.setSearch=g.setQuery,g.addSearch=g.addQuery,g.removeSearch=g.removeQuery,g.hasSearch=g.hasQuery,g.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},g.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},g.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},g.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===r.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},g.normalizePath=function(t){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var e,n,i,o=this._parts.path,s="";for("/"!==o.charAt(0)&&(e=!0,o="/"+o),o=o.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(s=o.substring(1).match(/^(\.\.\/)+/)||"",s&&(s=s[0]));n=o.indexOf("/.."),-1!==n;)0!==n?(i=o.substring(0,n).lastIndexOf("/"),-1===i&&(i=n),o=o.substring(0,i)+o.substring(n+3)):o=o.substring(3);return e&&this.is("relative")&&(o=s+o.substring(1)),o=r.recodePath(o),this._parts.path=o,this.build(!t),this},g.normalizePathname=g.normalizePath,g.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(r.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},g.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},g.normalizeSearch=g.normalizeQuery,g.normalizeHash=g.normalizeFragment,g.iso8859=function(){var t=r.encode,e=r.decode;return r.encode=escape,r.decode=decodeURIComponent,this.normalize(),r.encode=t,r.decode=e,this},g.unicode=function(){var t=r.encode,e=r.decode;return r.encode=d,r.decode=unescape,this.normalize(),r.encode=t,r.decode=e,this},g.readable=function(){var e=this.clone();e.username("").password("").normalize();var n="";if(e._parts.protocol&&(n+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(n+=t.toUnicode(e._parts.hostname),e._parts.port&&(n+=":"+e._parts.port)):n+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(n+="/"),n+=e.path(!0),e._parts.query){for(var i="",o=0,s=e._parts.query.split("&"),a=s.length;a>o;o++){var l=(s[o]||"").split("=");i+="&"+r.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==l[1]&&(i+="="+r.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+i.substring(1)}return n+=r.decodeQuery(e.hash(),!0)},g.absoluteTo=function(t){var e,n,i,o=this.clone(),s=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof r||(t=new r(t)),o._parts.protocol||(o._parts.protocol=t._parts.protocol),this._parts.hostname)return o;for(n=0;i=s[n];n++)o._parts[i]=t._parts[i];return o._parts.path?".."===o._parts.path.substring(-2)&&(o._parts.path+="/"):(o._parts.path=t._parts.path,o._parts.query||(o._parts.query=t._parts.query)),"/"!==o.path().charAt(0)&&(e=t.directory(),o._parts.path=(e?e+"/":"")+o._parts.path,o.normalizePath()),o.build(),o},g.relativeTo=function(t){var e,n,i,o,s,a=this.clone().normalize();if(a._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new r(t).normalize(),e=a._parts,n=t._parts,o=a.path(),s=t.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==s.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===n.protocol&&(e.protocol=null),e.username!==n.username||e.password!==n.password)return a.build();if(null!==e.protocol||null!==e.username||null!==e.password)return a.build();if(e.hostname!==n.hostname||e.port!==n.port)return a.build();if(e.hostname=null,e.port=null,o===s)return e.path="",a.build();if(i=r.commonPath(a.path(),t.path()),!i)return a.build();var l=n.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=l+e.path.substring(i.length),a.build()},g.equals=function(t){var e,n,i,o=this.clone(),s=new r(t),l={},u={},p={};if(o.normalize(),s.normalize(),o.toString()===s.toString())return!0;if(e=o.query(),n=s.query(),o.query(""),s.query(""),o.toString()!==s.toString())return!1;if(e.length!==n.length)return!1;l=r.parseQuery(e,this._parts.escapeQuerySpace),u=r.parseQuery(n,this._parts.escapeQuerySpace);for(i in l)if(_.call(l,i)){if(a(l[i])){if(!c(l[i],u[i]))return!1}else if(l[i]!==u[i])return!1;p[i]=!0}for(i in u)if(_.call(u,i)&&!p[i])return!1;return!0},g.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},g.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},r}),define("uri",["uri/URI"],function(t){return t}),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/new_tag",["models/base"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.autocomplete_parameters=function(){return{tag_type:this.get("tag_type")}},n.prototype.set_autocomplete_data=function(t){return this.set(t.tag)},n}(e("NewTag"))})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/project",["models/base","load"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.screenshots=function(t,e){var n,i,r,o,s,a,l,u,c,p;for(null==e&&(e={}),l=[],this.has(e.locationProperty)&&(l=this.get(e.locationProperty).split(",")),p=[],i=0,s=l.length;s>i;i++)r=l[i],c=t.get(r),null!=c&&p.push(c);for(u=t.where({model_id:this.id}),o=0,a=u.length;a>o;o++)n=u[o],_.contains(l,""+n.id)||p.push(n);return p},n}(e("Project"))})}.call(this),function(){define("models/screenshot",["models/base"],function(t){return t("Screenshot")})}.call(this),function(){define("models/collaborator_tagging",["models/base"],function(t){return t("CollaboratorTagging")})}.call(this),function(){define("models/job_listing",["models/base"],function(t){return t("JobListing")})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/office_space",["models/base","load"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.screenshots=function(t,e){var n,i,r,o,s,a,l,u,c,p;for(null==e&&(e={}),l=[],this.has(e.locationProperty)&&(l=this.get(e.locationProperty).split(",")),p=[],i=0,s=l.length;s>i;i++)r=l[i],c=t.get(r),null!=c&&p.push(c);for(u=t.where({model_id:this.id}),o=0,a=u.length;a>o;o++)n=u[o],_.contains(l,""+n.id)||p.push(n);return p},n}(e("OfficeSpace"))})}.call(this),function(){define("models/office_space_tenant",["models/base"],function(t){return t("OfficeSpaceTenant")})}.call(this),function(){define("config/moment",["moment","underscore"],function(t,e){var n;return n={h:"about 1 hour"},t.locale("en.custom",{relativeTime:e.defaults(n,t.localeData()._relativeTime)}),t})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/startup",["require","underscore","moment","models/base"],function(e,n,i,r){var o;return o=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.initialize=function(){var t;return r.__super__.initialize.apply(this,arguments),t=function(t){return function(){var e,r;return n.all(["1i","2i","3i"],function(e){return t.has("fixed_traction_launched_at("+e+")")})?(e={year:t.get("fixed_traction_launched_at(1i)"),month:t.get("fixed_traction_launched_at(2i)")-1,day:t.get("fixed_traction_launched_at(3i)")},r=i(e),n.each(["1i","2i","3i"],function(e){return t.unset("fixed_traction_launched_at("+e+")")}),t.set("fixed_traction_launched_at",r.isValid()?r.toISOString():null)):void 0}}(this),this.listenTo(this,"change",t),t()},r.prototype.screenshots=function(t,e){var i,r,o,s,a,l,u,c,p,d;for(null==e&&(e={}),u=[],this.has(e.locationProperty)&&(u=this.get(e.locationProperty).split(",")),d=[],r=0,a=u.length;a>r;r++)o=u[r],p=t.get(o),null!=p&&d.push(p);for(c=t.where({startup_id:this.id}),s=0,l=c.length;l>s;s++)i=c[s],n.contains(u,""+i.id)||d.push(i);return d},r.prototype.toSyncData=function(t,e,i){var o;return o=r.__super__.toSyncData.call(this,t,e,i),n.extend({},o,{new_startup_profile:1})},r.prototype.autocomplete_parameters=function(){return{tag_type:"CompanyTag"}},r.prototype.set_autocomplete_data=function(t){return this.set({id:t.tag.follower_id,company_name:t.tag.display_name,logo_url:t.tag.pic,slug_url:t.tag.slug_url})},r}(r("Startup"))})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/startup_round",["models/base"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.toJSON=function(){return _.omit(n.__super__.toJSON.apply(this,arguments),["html"])},n}(e("StartupRound"))})}.call(this),function(){define("models/startup_round_participant",["models/base"],function(t){return t("StartupRoundParticipant")})}.call(this),define("require-css/css!coffeescripts/lib/associations",[],function(){}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty,i=[].slice;define("lib/associations",["jquery","backbone","underscore","lib/flash","lib/partials","lib/transitional_autocomplete","models/new_tagging","models/new_tag","models/project","models/screenshot","models/collaborator_tagging","models/job_listing","models/office_space","models/office_space_tenant","models/repository","models/user","models/startup","models/startup_role","models/startup_round","models/startup_round_participant","css!coffeescripts/lib/associations"],function(n,r,o,s,a,l,u,c,p,d,h,f,m,g,_,v,y,b,w,x){var k,C,$,T,q,P,j,S,E,z,I;return z=o.template("<div class='"+a.classNames("coffeescripts/lib/associations").join(" ")+" association'>\n  <% if (typeof url === 'undefined') { %>\n    <span class='association_name'><%- name %></span>\n  <% } else { %>\n    <a class='association_name' href='<%- url %>' target='_blank'><%- name %></a>\n  <% } %>\n  <% if (typeof allowDelete === 'undefined' || allowDelete) { %>\n    <span class='destroy'>&times;</span>\n  <% } %>\n</div>"),I=o.template("<div class='g-lockup medium'>\n  <div class='photo'><img src='<%- photo %>' /></div>\n    <div class='text'>\n      <div class='name'>\n        <a href='<%- url %>' target='_blank'><%- name %></a>\n        <% if (typeof allowDelete === 'undefined' || allowDelete) { %>\n          <span class='destroy'>&times;</span>\n        <% } %>\n      </div>\n    </div>\n  </div>\n</div>"),{AssociationField:k=function(r){function s(){return this.associations=t(this.associations,this),this._submit=t(this._submit,this),this._keypress=t(this._keypress,this),this._click_destroy=t(this._click_destroy,this),this._select=t(this._select,this),s.__super__.constructor.apply(this,arguments)}return e(s,r),s.prototype.associationFromSelect=function(){throw new Error("Subclasses must override")},s.prototype.associationFromSubmit=function(){throw new Error("Subclasses must override")},s.prototype.renderInnerContainer=function(){return n("<div class='"+a.classNames("coffeescripts/lib/associations").join(" ")+" container' />")},s.prototype.renderAssociation=function(){throw new Error("Subclasses must override")},s.prototype.renderEmpty=function(t){return this.$container.toggle(!t)},s.prototype.initializeAutocomplete=function(){throw new Error("Subclasses must override")},s.prototype.destroySelector=".destroy",s.prototype.submitSelector=".submit",s.prototype.input=function(){return this.$("input[type=text]")[0]},s.prototype.isEditable=function(){return this._editable||(this._editable=null!=this.input()),this._editable},s.prototype.render=function(){var t,e,i;return e=this.$container,null==this.$container?this:(t=this.associations(),e.empty(),this.renderEmpty(0===t.length),t.length>0?(i=this.renderInnerContainer(),e.append(i),o.each(t,function(t){return function(e){var r;return r=n(t.renderAssociation(e)),r.data("association",e),r.addClass("association_parent",!0),r.appendTo(i)}}(this))):void 0)},s.prototype.initialize=function(t){if(this.options=t,null==this.collection)throw new Error("Collection must be provided");if(null==t.container)throw new Error("Association container must be provided, (or you can pass container: false if no container exists)");return this.$container=t.container?n(t.container):null,this.listenTo(this.collection,"add remove change",o.throttle(function(t){return function(){return t.render(),t.trigger("change",t)}}(this),100)),this.autocomplete=this.initializeAutocomplete(),this.listenTo(this.autocomplete,"select",this._select),this.render()},s.prototype.events=function(){var t;return t={},t["click "+o.result(this,"destroySelector")]="_click_destroy",t["click "+o.result(this,"submitSelector")]="_submit",t.keypress="_keypress",t},s.prototype._select=function(){var t,e;return t=1<=arguments.length?i.call(arguments,0):[],e=this.associationFromSelect.apply(this,t),this.addAssociation(e),n(this.input()).val(""),!0},s.prototype._click_destroy=function(t){var e;return e=n(t.currentTarget).closest(".association_parent"),e.fadeOut("fast",function(t){return function(){return t.removeAssociation(e.data("association"))}}(this)),!0},s.prototype._keypress=function(t){return 13===t.keyCode&&n(this.input()).is(t.srcElement)&&this._submit(t),!0},s.prototype._submit=function(t){var e;return t.preventDefault(),e=this.associationFromSubmit(n(this.input()).val(),t),e&&(this.addAssociation(e),n(this.input()).val("")),!0
},s.prototype.associations=function(){return this.collection.models},s.prototype.addAssociation=function(t){return t.save(),this.collection.add(t)},s.prototype.removeAssociation=function(t){return t.destroy()},s}(r.View),StartupField:P=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){return this.collection||(this.collection=t.collection||_.get(y)),n.__super__.initialize.apply(this,arguments)},n.prototype.associationFromSubmit=function(){return null},n.prototype.associationFromSelect=function(t,e){return e.model},n.prototype.renderAssociation=function(t){return I({name:t.get("company_name"),url:t.get("slug_url"),photo:t.get("logo_url"),allowDelete:this.isEditable()})},n.prototype.addAssociation=function(t){return this.collection.add(t)},n.prototype.removeAssociation=function(t){return this.collection.remove(t)},n.prototype.initializeAutocomplete=function(){var t;return t={el:this.input(),model:new y},new l.TagAutocomplete(t)},n}(k),UserField:E=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){return this.collection||(this.collection=t.collection||_.get(v)),n.__super__.initialize.apply(this,arguments)},n.prototype.associationFromSubmit=function(){return null},n.prototype.associationFromSelect=function(t){return new v({id:t.id,display_name:t.name,slug_url:t.url})},n.prototype.renderAssociation=function(t){return z({name:t.get("display_name"),url:t.get("slug_url"),allowDelete:this.isEditable()})},n.prototype.addAssociation=function(t){return this.collection.add(t)},n.prototype.removeAssociation=function(t){return this.collection.remove(t)},n}(k),NewTaggingField:T=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(){return this.collection||(this.collection=_.get(u)),i.__super__.initialize.apply(this,arguments)},i.prototype.associations=function(){return this.collection.where({new_taggable_type:this.options.new_taggable_type,new_taggable_id:this.options.new_taggable_id,new_taggable_field:this.options.new_taggable_field})},i.prototype.baseAttributes=function(){var t,e,n,i,r;for(t={},r=["new_taggable_field","new_taggable_type","new_taggable_id"],n=0,i=r.length;i>n;n++){if(e=r[n],null==this.options[e])throw new Error("Option '"+e+"' is required");t[e]=this.options[e]}return t},i.prototype.associationFromSelect=function(t,e,i){return t.new_tagging_field_unmatched?this.associationFromSubmit(t.term,i):new u(n.extend({},this.baseAttributes(),{new_tag_id:e.model.id,new_tag:e.model.toJSON()}))},i.prototype.associationFromSubmit=function(t){return new u(n.extend({},this.baseAttributes(),{new_tag:{name:t,tag_type:this.options.tag_type,display_name:t.toTitleCase()}}))},i.prototype.renderAssociation=function(t){return z({name:t.get("new_tag").display_name,url:t.get("new_tag").slug_url,allowDelete:this.isEditable()})},i.prototype.initializeAutocomplete=function(){var t,n;return n={el:this.input(),parameters:{tag_type:this.options.tag_type||function(){throw new Error("Option 'tag_type' is required")}(),new_taggable_field:this.options.new_taggable_field||function(){throw new Error("Option 'new_taggable_field' is required")}(),new_taggable_type:this.options.new_taggable_type||function(){throw new Error("Option 'new_taggable_type' is required")}(),new_taggable_id:this.options.new_taggable_id},model:new c({tag_type:this.options.tag_type})},t=this.options.allowUnmatched,new(function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.process_response=function(e,n){var r;return r=i.__super__.process_response.apply(this,arguments),t&&r.push({value:{new_tagging_field_unmatched:!0,term:n},label:l.more_template("Add")({term:n})}),r},i}(l.TagAutocomplete))(n)},i.prototype.addAssociation=function(t){return t.save(null,{error:function(e){return function(i,r){var a;return a=n.parseJSON(r.responseText),a.errors&&s(o.values(a.errors).join("; "),4e3),e.collection.remove(t)}}(this)}),this.collection.add(t)},i}(k),NewTagField:$=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.associationFromSubmit=function(){return null},n.prototype.associationFromSelect=function(t){return new c(t.tag)},n.prototype.initialize=function(t){if(this.tagType||(this.tagType=null!=t?t.tagType:void 0),null==this.tagType)throw new Error("Tag type is required");return n.__super__.initialize.apply(this,arguments)},n.prototype.renderAssociation=function(t){return z({name:t.get("display_name"),url:t.get("slug_url"),allowDelete:this.isEditable()})},n.prototype.addAssociation=function(t){return this.collection.add(t)},n.prototype.removeAssociation=function(t){return this.collection.remove(t)},n.prototype.initializeAutocomplete=function(){var t;return t={el:this.input(),tag_type:this.tagType},new l.TagAutocomplete(t)},n}(k),StartupRoleField:j=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(){return this.collection||(this.collection=_.get(b)),i.__super__.initialize.apply(this,arguments)},i.prototype.associations=function(){return this.collection.where({tagged_id:this.options.tagged_id,tagged_type:this.options.tagged_type,role:this._role()})},i.prototype.baseAttributes=function(){var t,e,n,i,r;for(t={},r=["tagged_id","tagged_type"],n=0,i=r.length;i>n;n++){if(e=r[n],null==this.options[e])throw new Error("Option '"+e+" is required");t[e]=this.options[e]}return t.role=this._role(),t},i.prototype._role=function(){if(null==this.options.role)throw new Error("Option 'role' is required");return this.options.role},i.prototype.initializeAutocomplete=function(){return new l.TagAutocomplete({el:this.input(),model:new y})},i.prototype.associationFromSelect=function(t,e){return new b(n.extend({},this.baseAttributes(),{startup_id:e.model.id,startup_company_name:e.model.get("company_name"),startup_slug_url:e.model.get("slug_url"),startup_avatar:e.model.get("avatar"),startup_high_concept:e.model.get("high_concept")}))},i.prototype.associationFromSubmit=function(t){return t?new b(n.extend({},this.baseAttributes(),{company_name:t,startup_company_name:t})):void 0},i.prototype.renderAssociation=function(t){return z({name:t.get("startup_company_name"),url:t.get("startup_slug_url")})},i}(k),StartupRoundParticipantField:S=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){if(!(null!=this.model&&this.model instanceof w))throw new Error("Must provide a StartupRound model");if(!this.model.has("startup_id"))throw new Error("Must provide a startup ID");return n.__super__.initialize.apply(this,arguments)},n.prototype.renderAssociation=function(t){return z({url:t.get("participant_slug_url"),name:t.get("participant_to_s")})},n.prototype.initializeAutocomplete=function(){return new l.TagAutocomplete({el:this.input(),tag_type:["User","Startup"]})},n.prototype.associationFromSubmit=function(){return!1},n.prototype.associationFromSelect=function(t){return new x({participant_id:t.tag.id,participant_type:t.tag.model,startup_round_id:this.model.id,participant_slug_url:t.tag.slug_url,participant_to_s:t.tag.display_name})},n.prototype.addAssociation=function(t){return this.collection.add(t)},n.prototype.associations=function(){return this.model.isNew()?this.collection.models:this.collection.where({startup_round_id:this.model.id})},n}(k),CollaboratorTaggingField:C=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(){if(null==this.model)throw new Error("Must provide a model");return i.__super__.initialize.apply(this,arguments)},i.prototype.collaborationType=function(){switch(!1){case!(this.model instanceof p):return"Project";case!(this.model instanceof d):return"ProductScreenshot";case!(this.model instanceof f):return"JobListing";default:throw new Error("Model must be a Project, Screenshot, or JobListing")}},i.prototype.renderAssociation=function(t){return z({url:t.get("collaborator_slug_url")||void 0,name:t.get("collaborator_to_s")})},i.prototype.initializeAutocomplete=function(){return new l.TypedAutocomplete({el:this.input(),types:["User"],canSelectUnmatchedQuery:this.options.unmatched})},i.prototype.associationFromSubmit=function(t){return new h({collaboration_id:this.model.id,collaboration_type:this.collaborationType(),invited_name:t,collaborator_to_s:t})},i.prototype.associationFromSelect=function(t){return new h({collaboration_id:this.model.id,collaboration_type:this.collaborationType(),collaborator_id:t.id,collaborator_type:"User",collaborator_slug_url:t.url,collaborator_to_s:t.name})},i.prototype.addAssociation=function(t){return t.save(null,{error:function(e){return function(i,r){var s;return s=n.parseJSON(r.responseText),s.errors&&e.$(".error").html(o.values(s.errors)[0]).fadeIn().delay(4e3).fadeOut(),e.collection.remove(t)}}(this)}),this.collection.add(t)},i.prototype.associations=function(){return this.model.isNew()?this.collection.models:this.collection.where({collaboration_id:this.model.id})},i}(k),OfficeSpaceTenantField:q=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(){if(!(null!=this.model&&this.model instanceof m))throw new Error("Must provide a OfficeSpace model");return i.__super__.initialize.apply(this,arguments)},i.prototype.renderAssociation=function(t){return z({url:t.get("tenant_slug_url"),name:t.get("tenant_to_s")})},i.prototype.initializeAutocomplete=function(){return new l.TypedAutocomplete({el:this.input(),types:["User","Startup"],canSelectUnmatchedQuery:this.options.unmatched})},i.prototype.associationFromSelect=function(t){return new g({office_space_id:this.model.id,tenant_id:t.id,tenant_type:"User",tenant_slug_url:t.url,tenant_to_s:t.name})},i.prototype.addAssociation=function(t){return t.save(null,{error:function(e){return function(i,r){var s;return s=n.parseJSON(r.responseText),s.errors&&n(e.el).find(".error").html(o.values(s.errors)[0]).fadeIn().delay(4e3).fadeOut(),e.collection.remove(t)}}(this)}),this.collection.add(t)},i.prototype.associations=function(){return this.model.isNew()?this.collection.models:this.collection.where({office_space_id:this.model.id})},i}(k)}})}.call(this),function(){define("lib/history",["backbone","underscore"],function(t,e){var n;return n=null,{start:function(i){if(null==i&&(i={}),n||(n=i),!e.isEqual(i,n))throw new Error("Backbone.History tried to start with conflicting options");return t.History.started?void 0:t.history.start(i)}}})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/follow",["models/base"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.idAttribute="token",n.prototype.parse=function(t){return{followed_type:t.type,followed_token:t.token,token:t.follow_token,error:t.error}},n.prototype.toSyncData=function(t,e){var i,r,o,s,a;if(i=n.__super__.toSyncData.apply(this,arguments),"create"===e)for(a=["followed_token","followed_type"],o=0,s=a.length;s>o;o++){if(r=a[o],!this.has(r))throw new Error("follow#create requires field "+r);i[r]=""+this.get(r)}return i},n}(e("Follow"))})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("lib/follows",["backbone","underscore","models/follow","models/repository"],function(e,n,i,r){var o;return{FollowToggleView:o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.REQUIRED_ATTRIBUTES=["follower_id","followed_type","followed_token"],n.prototype.renderCreated=function(){throw new Error("Subclasses must override")},n.prototype.renderDestroyed=function(){throw new Error("Subclasses must override")},n.prototype.render=function(){return null!=this.model?this.renderCreated():this.renderDestroyed()},n.prototype.initialize=function(t){var e,o,s,a,l;if(this.attributes=t.attributes,null==this.attributes)throw new Error("Must provide base follow attributes");for(a=n.REQUIRED_ATTRIBUTES,o=0,s=a.length;s>o;o++)if(e=a[o],!this.attributes[e])throw new Error("Missing required attribute: "+e);return this.collection||(this.collection=r.get(i)),l=function(t){return function(){return null!=t.model&&t.stopListening(t.model),t.model=t.collection.findWhere(t.attributes),null!=t.model&&t.listenTo(t.model,"request",function(e,n,i){var r;return r=function(){return t._destroyModel(t.model)},t._currentXhr=n,n.always(function(){return t._currentXhr===n?t._currentXhr=null:void 0}),n.done(function(t){return t.success?void 0:r()}),n.error(r),t.trigger("request",e,n,i)}),t.render()}}(this),this.listenTo(this.collection,"add remove",l),l()},n.prototype.currentXhr=function(){return this._currentXhr},n.prototype.click=function(){var t;return null!=this.currentXhr()?!0:null!=this.model?this._destroyModel(this.model):(t=this.collection.add(new i(this.attributes)),this._saveModel(t))},n.prototype.events={click:"click"},n.prototype._destroyModel=function(t){return t.destroy()},n.prototype._saveModel=function(t){return t.save()},n}(e.View)}})}.call(this),function(){var t=[].slice;define("lib/navigator",["backbone","underscore"],function(e,n){var i,r;return r=function(t){return t.toString().replace(new RegExp("^"+window.location.origin,"g"),"")},i=function(){function i(t){this.router=t,this._lastNavigation={interrupted:!1,finished:!0,xhr:null,url:window.location.href},this.listenTo(this.router,"route",function(t){return function(){return t.startNavigating(window.location.href)}}(this))}return i.prototype.startNavigating=function(i){var o,s,a,l,u,c,p,d,h,f;i=r(i),a=e.history.getFragment(i),f=null,p=this.router.routes;for(l in p)if(u=p[l],h=n.isRegExp(l)?l:this.router._routeToRegExp(l),h.test(a)){f=u;break}if(null==f)throw new Error("Unrecognized navigator URL: "+i);return s=function(e){var n;return n=$.Deferred(),e.xhr.done(function(){var i;return i=1<=arguments.length?t.call(arguments,0):[],e.interrupted?void 0:n.resolveWith(this,i)}).fail(function(){var i;return i=1<=arguments.length?t.call(arguments,0):[],e.interrupted||0===e.xhr.readyState?void 0:n.rejectWith(this,i)}).progress(function(){var i;return i=1<=arguments.length?t.call(arguments,0):[],e.interrupted?void 0:n.notifyWith(this,i)}),n},o=null,c={interrupted:!1,finished:!1,xhr:null,url:i},this._isMatching(c.url,this._lastNavigation.url)?(c.xhr=this._lastNavigation.xhr,this._lastNavigation.finished||(this._lastNavigation.interrupted=!0,o=s(c))):(this._lastNavigation.interrupted=!0,null!=(d=this._lastNavigation.xhr)&&d.abort(),c.xhr=this._xhr(i),o=s(c)),$.when(c.xhr).always(function(){return c.finished=!0}),this._lastNavigation=c,null!=o&&this.trigger("start",f,o.promise(),i),$.when(o).done(function(t){return function(){return t.router.navigate(i,{trigger:!1})}}(this)),(null!=o?o.promise():void 0)||o},i.prototype._xhr=function(){throw new Error("Subclasses must override.")},i.prototype._isMatching=function(t,e){var n;return n=function(t){return r(t.toString().replace(/#.*$/,""))},n(t)===n(e)},i}(),n.extend(i.prototype,e.Events),i})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty,n=[].slice,i=function(t,e){return function(){return t.apply(e,arguments)}};define("lib/profile",["require","module","jquery","underscore","backbone","lib/form","lib/partials","jquery.autosize","qtip"],function(e,r,o,s,a,l){var u,c,p;return{initializeEditableRegions:function(t,n){return n.each(function(){return t("> .edit",this).each(function(){var n;return n=t(this).is(":visible"),t(this).show(),e(r.id).initializeInputs(t(":input",this)),t(this).toggle(n)})})},initializeInputs:function(t){return o(t).each(function(){var t;return o(this).is("textarea")&&o(this).autosize(),s.isUndefined(o(this).attr("title"))||o(this).qtip({defaultPosition:"right",activation:"focus"}),null!=o(this).data("max")?(t=o('<div class="character_counter"/>'),t.insertAfter(o(this)),new l.CharacterCounter({el:this,container:t,max:parseInt(o(this).data("max"))})):void 0})},EditableRegion:u=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(){return this.listenTo(this,"error",function(t){return function(){return t.edit()}}(this)),this.listenTo(this,"edit",function(t){return function(e,n){return n.done(function(){return o(t.$("> .edit :input")[0]).focus()})}}(this))},i.prototype.edit=function(){var t;return t=o.when(this._transition(this.$("> .show"),this.$("> .edit"))),this.trigger("edit",this,t),t},i.prototype.show=function(){var t;return t=o.when(this._transition(this.$("> .edit"),this.$("> .show"))),this.trigger("show",this,t),t},i.prototype.error=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],this.trigger.apply(this,["error",this].concat(t)),this.edit()},i.prototype.save=function(){throw new Error("Subclasses must override")},i.prototype._transition=function(t,e){var n;return n=o.Deferred(),t.fadeOut("fast",function(){return function(){return e.fadeIn("fast"),n.resolve()}}(this)),n.promise()},i}(a.View),ModelEditableRegion:p=function(e){function n(){return this._inputForErrorAttribute=i(this._inputForErrorAttribute,this),this._handleErrorResponse=i(this._handleErrorResponse,this),n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.events=function(){return{"submit .edit form":"_submitForm","input .edit form :input":"_changeInput"}},n.prototype.error=function(t){var e,i,r;for(e in t)r=t[e],i=this._inputForErrorAttribute(e),l.setInputError(i,r);return n.__super__.error.apply(this,arguments)},n.prototype.matchesErrors=function(t){var e,n,i;n=!1;for(e in t)i=t[e],this._inputForErrorAttribute(e).length>0&&(n=!0);return n},n.prototype.save=function(){var t;return this.$("> .edit :input").each(function(){return l.setInputError(this,null)}),t=o.Deferred(),this.model.save(l.attributes(this.$("> .edit"),this.model.prefix()),{patch:!0,wait:!0,success:function(e,n,i){return t.resolve(e,n,i)},error:function(e){return function(n,i,r){return e._handleErrorResponse(n,i,r),t.reject(n,i,r)}}(this)}),t.promise()},n.prototype._submitForm=function(t){return t.preventDefault(),this.save()},n.prototype._changeInput=function(t){return l.setInputError(t.currentTarget,null),o(t.currentTarget).focus()},n.prototype._handleErrorResponse=function(t,e){return this.error(o.parseJSON(e.responseText).errors)},n.prototype._inputForErrorAttribute=function(t){return t=t.replace(/\./,"_attributes]["),this.$("> .edit").find(":input[name='"+s.result(this.model,"prefix")+"["+t+"]']")},n}(u),EditableRegionControls:c=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(t){var e,n,i,r,o,a;for(this.editableRegion=t.editableRegion,a=["edit","show","save"],r=0,o=a.length;o>r;r++)if(i=a[r],!this.editableRegion||!s.isFunction(this.editableRegion[i]))throw new Error("Must provide an EditableRegion, or something which implements the same API");return n=t.hideEditParent?this.$(this.editSelector()).parent():this.$(this.editSelector()),e=this.$(this.controlSelector()),this.listenTo(this.editableRegion,"edit",function(t){return function(){return t._transition(n,e)}}(this)),this.listenTo(this.editableRegion,"show",function(t){return function(){return t._transition(e,n)}}(this))},n.prototype.editSelector=function(){return".edit"},n.prototype.cancelSelector=function(){return".cancel"},n.prototype.saveSelector=function(){return".save"},n.prototype.controlSelector=function(){return".control"},n.prototype.events=function(){var t;return t={},t["click "+this.editSelector()]=function(){return this.editableRegion.edit()},t["click "+this.cancelSelector()]=function(){return this.editableRegion.show()},t["click "+this.saveSelector()]=function(){var t;return t=this.$(this.saveSelector()),t.addClass("loading"),o.when(this.editableRegion.save()).done(function(t){return function(){return t.editableRegion.show()}}(this)).always(function(){return function(){return t.removeClass("loading")}}(this))},t},n.prototype._transition=function(t,e){return t.fadeOut("fast",function(){return function(){return e.fadeIn("fast")}}(this))},n}(a.View)}})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/reference",["models/base"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(e("reference"))})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/review",["models/base"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(e("Review"))})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/status_update",["models/base","underscore","models/repository","models/startup"],function(e,n,i,r){var o;return o=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.toJSON=function(){return n.pick(o.__super__.toJSON.apply(this,arguments),["owner_type","owner_id","owner_fundraising_public","message","source"])},o.prototype.check=function(){var t;if(!this.has("owner_type")||!this.has("owner_id"))throw new Error("Can only check if owner has been set");if("Startup"!==this.get("owner_type"))return!0;if(t=i.get(r).get(this.get("owner_id")),!(null!=t?t.has("gs_flag"):void 0))throw new Error("Can only check if the startup gs_flag has been explicitly set");return o.check(this.get("message"),t.get("gs_flag"))},o.check=function(t,e){var i,r;return t=t.toLowerCase().replace("angel.co","link"),i=["invest","fund","raise","raising","money","\\bround\\b","series","close","closing","angel(?!list)","commit","capital","venture","angle","VC","seed","financing"],e?!0:(r=!n.some(i,function(e){return new RegExp(e,"i").test(t)}),r||confirm("It looks like you may be discussing an ongoing financing in this public status message. This is forbidden by U.S. law.\n\nYou can still post this message, but we will review it, and you may be banned from AngelList if you are discussing an ongoing financing.\n\nIt's okay to post information about a closed round.\n\nDo you want to publish this status update?"))},o}(e("StatusUpdate"))})}.call(this),!function(t,e){"function"==typeof define&&define.amd?define("jquery.panzoom",["jquery"],function(n){return e(t,n)}):"object"==typeof exports?e(t,require("jquery")):e(t,t.jQuery)}("undefined"!=typeof window?window:this,function(t,e){function n(t,e){for(var n=t.length;--n;)if(+t[n]!==+e[n])return!1;return!0}function i(t){var n={range:!0,animate:!0};return"boolean"==typeof t?n.animate=t:e.extend(n,t),n}function r(t,n,i,r,o,s,a,l,u){this.elements="array"===e.type(t)?[+t[0],+t[2],+t[4],+t[1],+t[3],+t[5],0,0,1]:[t,n,i,r,o,s,a||0,l||0,u||1]}function o(t,e,n){this.elements=[t,e,n]}function s(t,n){if(!(this instanceof s))return new s(t,n);1!==t.nodeType&&e.error("Panzoom called on non-Element node"),e.contains(document,t)||e.error("Panzoom element must be attached to the document");var i=e.data(t,p);if(i)return i;this.options=n=e.extend({},s.defaults,n),this.elem=t;var r=this.$elem=e(t);this.$set=n.$set&&n.$set.length?n.$set:r,this.$doc=e(t.ownerDocument||document),this.$parent=r.parent(),this.isSVG=m.test(t.namespaceURI)&&"svg"!==t.nodeName.toLowerCase(),this.panning=!1,this._buildTransform(),this._transform=!this.isSVG&&e.cssProps.transform.replace(f,"-$1").toLowerCase(),this._buildTransition(),this.resetDimensions();var o=e(),a=this;e.each(["$zoomIn","$zoomOut","$zoomRange","$reset"],function(t,e){a[e]=n[e]||o}),this.enable(),e.data(t,p,this)}var a="over out down up move enter leave cancel".split(" "),l=e.extend({},e.event.mouseHooks),u={};if(t.PointerEvent)e.each(a,function(t,n){e.event.fixHooks[u[n]="pointer"+n]=l});else{var c=l.props;l.props=c.concat(["touches","changedTouches","targetTouches","altKey","ctrlKey","metaKey","shiftKey"]),l.filter=function(t,e){var n,i=c.length;if(!e.pageX&&e.touches&&(n=e.touches[0]))for(;i--;)t[c[i]]=n[c[i]];return t},e.each(a,function(t,n){if(2>t)u[n]="mouse"+n;else{var i="touch"+("down"===n?"start":"up"===n?"end":n);e.event.fixHooks[i]=l,u[n]=i+" mouse"+n}})}e.pointertouch=u;var p="__pz__",d=Array.prototype.slice,h=!!t.PointerEvent,f=/([A-Z])/g,m=/^http:[\w\.\/]+svg$/,g=/^inline/,_="(\\-?[\\d\\.e]+)",v="\\,?\\s*",y=new RegExp("^matrix\\("+_+v+_+v+_+v+_+v+_+v+_+"\\)$");return r.prototype={x:function(t){var e=t instanceof o,n=this.elements,i=t.elements;return e&&3===i.length?new o(n[0]*i[0]+n[1]*i[1]+n[2]*i[2],n[3]*i[0]+n[4]*i[1]+n[5]*i[2],n[6]*i[0]+n[7]*i[1]+n[8]*i[2]):i.length===n.length?new r(n[0]*i[0]+n[1]*i[3]+n[2]*i[6],n[0]*i[1]+n[1]*i[4]+n[2]*i[7],n[0]*i[2]+n[1]*i[5]+n[2]*i[8],n[3]*i[0]+n[4]*i[3]+n[5]*i[6],n[3]*i[1]+n[4]*i[4]+n[5]*i[7],n[3]*i[2]+n[4]*i[5]+n[5]*i[8],n[6]*i[0]+n[7]*i[3]+n[8]*i[6],n[6]*i[1]+n[7]*i[4]+n[8]*i[7],n[6]*i[2]+n[7]*i[5]+n[8]*i[8]):!1},inverse:function(){var t=1/this.determinant(),e=this.elements;return new r(t*(e[8]*e[4]-e[7]*e[5]),t*-(e[8]*e[1]-e[7]*e[2]),t*(e[5]*e[1]-e[4]*e[2]),t*-(e[8]*e[3]-e[6]*e[5]),t*(e[8]*e[0]-e[6]*e[2]),t*-(e[5]*e[0]-e[3]*e[2]),t*(e[7]*e[3]-e[6]*e[4]),t*-(e[7]*e[0]-e[6]*e[1]),t*(e[4]*e[0]-e[3]*e[1]))},determinant:function(){var t=this.elements;return t[0]*(t[8]*t[4]-t[7]*t[5])-t[3]*(t[8]*t[1]-t[7]*t[2])+t[6]*(t[5]*t[1]-t[4]*t[2])}},o.prototype.e=r.prototype.e=function(t){return this.elements[t]},s.rmatrix=y,s.events=e.pointertouch,s.defaults={eventNamespace:".panzoom",transition:!0,cursor:"move",disablePan:!1,disableZoom:!1,increment:.3,minScale:.4,maxScale:5,rangeStep:.05,duration:200,easing:"ease-in-out",contain:!1},s.prototype={constructor:s,instance:function(){return this},enable:function(){this._initStyle(),this._bind(),this.disabled=!1},disable:function(){this.disabled=!0,this._resetStyle(),this._unbind()},isDisabled:function(){return this.disabled},destroy:function(){this.disable(),e.removeData(this.elem,p)},resetDimensions:function(){var t=this.$parent;this.container={width:t.innerWidth(),height:t.innerHeight()};var n,i=t.offset(),r=this.elem,o=this.$elem;this.isSVG?(n=r.getBoundingClientRect(),n={left:n.left-i.left,top:n.top-i.top,width:n.width,height:n.height,margin:{left:0,top:0}}):n={left:e.css(r,"left",!0)||0,top:e.css(r,"top",!0)||0,width:o.innerWidth(),height:o.innerHeight(),margin:{top:e.css(r,"marginTop",!0)||0,left:e.css(r,"marginLeft",!0)||0}},n.widthBorder=e.css(r,"borderLeftWidth",!0)+e.css(r,"borderRightWidth",!0)||0,n.heightBorder=e.css(r,"borderTopWidth",!0)+e.css(r,"borderBottomWidth",!0)||0,this.dimensions=n},reset:function(t){t=i(t);var e=this.setMatrix(this._origTransform,t);t.silent||this._trigger("reset",e)},resetZoom:function(t){t=i(t);var e=this.getMatrix(this._origTransform);t.dValue=e[3],this.zoom(e[0],t)},resetPan:function(t){var e=this.getMatrix(this._origTransform);this.pan(e[4],e[5],i(t))},setTransform:function(t){for(var n=this.isSVG?"attr":"style",i=this.$set,r=i.length;r--;)e[n](i[r],"transform",t)},getTransform:function(t){var n=this.$set,i=n[0];return t?this.setTransform(t):t=e[this.isSVG?"attr":"style"](i,"transform"),"none"===t||y.test(t)||this.setTransform(t=e.css(i,"transform")),t||"none"},getMatrix:function(t){var e=y.exec(t||this.getTransform());return e&&e.shift(),e||[1,0,0,1,0,0]},setMatrix:function(t,n){if(!this.disabled){n||(n={}),"string"==typeof t&&(t=this.getMatrix(t));var i,r,o,s,a,l,u,c,p,d,h=+t[0],f=this.$parent,m="undefined"!=typeof n.contain?n.contain:this.options.contain;return m&&(i=this._checkDims(),r=this.container,p=i.width+i.widthBorder,d=i.height+i.heightBorder,o=(p*Math.abs(h)-r.width)/2,s=(d*Math.abs(h)-r.height)/2,u=i.left+i.margin.left,c=i.top+i.margin.top,"invert"===m?(a=p>r.width?p-r.width:0,l=d>r.height?d-r.height:0,o+=(r.width-p)/2,s+=(r.height-d)/2,t[4]=Math.max(Math.min(t[4],o-u),-o-u-a),t[5]=Math.max(Math.min(t[5],s-c),-s-c-l+i.heightBorder)):(s+=i.heightBorder/2,a=r.width>p?r.width-p:0,l=r.height>d?r.height-d:0,"center"===f.css("textAlign")&&g.test(e.css(this.elem,"display"))?a=0:o=s=0,t[4]=Math.min(Math.max(t[4],o-u),-o-u+a),t[5]=Math.min(Math.max(t[5],s-c),-s-c+l))),"skip"!==n.animate&&this.transition(!n.animate),n.range&&this.$zoomRange.val(h),this.setTransform("matrix("+t.join(",")+")"),n.silent||this._trigger("change",t),t}},isPanning:function(){return this.panning},transition:function(t){if(this._transition)for(var n=t||!this.options.transition?"none":this._transition,i=this.$set,r=i.length;r--;)e.style(i[r],"transition")!==n&&e.style(i[r],"transition",n)},pan:function(t,e,n){if(!this.options.disablePan){n||(n={});var i=n.matrix;i||(i=this.getMatrix()),n.relative&&(t+=+i[4],e+=+i[5]),i[4]=t,i[5]=e,this.setMatrix(i,n),n.silent||this._trigger("pan",i[4],i[5])}},zoom:function(t,n){"object"==typeof t?(n=t,t=null):n||(n={});var i=e.extend({},this.options,n);if(!i.disableZoom){var s=!1,a=i.matrix||this.getMatrix();"number"!=typeof t&&(t=+a[0]+i.increment*(t?-1:1),s=!0),t>i.maxScale?t=i.maxScale:t<i.minScale&&(t=i.minScale);var l=i.focal;if(l&&!i.disablePan){var u=this._checkDims(),c=l.clientX,p=l.clientY;this.isSVG||(c-=(u.width+u.widthBorder)/2,p-=(u.height+u.heightBorder)/2);var d=new o(c,p,1),h=new r(a),f=this.parentOffset||this.$parent.offset(),m=new r(1,0,f.left-this.$doc.scrollLeft(),0,1,f.top-this.$doc.scrollTop()),g=h.inverse().x(m.inverse().x(d)),_=t/a[0];h=h.x(new r([_,0,0,_,0,0])),d=m.x(h.x(g)),a[4]=+a[4]+(c-d.e(0)),a[5]=+a[5]+(p-d.e(1))}a[0]=t,a[3]="number"==typeof i.dValue?i.dValue:t,this.setMatrix(a,{animate:"boolean"==typeof i.animate?i.animate:s,range:!i.noSetRange}),i.silent||this._trigger("zoom",a[0],i)}},option:function(t,n){var i;if(!t)return e.extend({},this.options);if("string"==typeof t){if(1===arguments.length)return void 0!==this.options[t]?this.options[t]:null;i={},i[t]=n}else i=t;this._setOptions(i)},_setOptions:function(t){e.each(t,e.proxy(function(t,n){switch(t){case"disablePan":this._resetStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._unbind()}switch(this.options[t]=n,t){case"disablePan":this._initStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":this[t]=n;case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._bind();break;case"cursor":e.style(this.elem,"cursor",n);break;case"minScale":this.$zoomRange.attr("min",n);break;case"maxScale":this.$zoomRange.attr("max",n);break;case"rangeStep":this.$zoomRange.attr("step",n);break;case"startTransform":this._buildTransform();break;case"duration":case"easing":this._buildTransition();case"transition":this.transition();break;case"$set":n instanceof e&&n.length&&(this.$set=n,this._initStyle(),this._buildTransform())}},this))},_initStyle:function(){var t={"backface-visibility":"hidden","transform-origin":this.isSVG?"0 0":"50% 50%"};this.options.disablePan||(t.cursor=this.options.cursor),this.$set.css(t);var n=this.$parent;n.length&&!e.nodeName(n[0],"body")&&(t={overflow:"hidden"},"static"===n.css("position")&&(t.position="relative"),n.css(t))
},_resetStyle:function(){this.$elem.css({cursor:"",transition:""}),this.$parent.css({overflow:"",position:""})},_bind:function(){var t=this,n=this.options,i=n.eventNamespace,r=h?"pointerdown"+i:"touchstart"+i+" mousedown"+i,o=h?"pointerup"+i:"touchend"+i+" click"+i,a={},l=this.$reset,u=this.$zoomRange;if(e.each(["Start","Change","Zoom","Pan","End","Reset"],function(){var t=n["on"+this];e.isFunction(t)&&(a["panzoom"+this.toLowerCase()+i]=t)}),n.disablePan&&n.disableZoom||(a[r]=function(e){var i;("touchstart"===e.type?!(i=e.touches)||(1!==i.length||n.disablePan)&&2!==i.length:n.disablePan||1!==e.which)||(e.preventDefault(),e.stopPropagation(),t._startMove(e,i))}),this.$elem.on(a),l.length&&l.on(o,function(e){e.preventDefault(),t.reset()}),u.length&&u.attr({step:n.rangeStep===s.defaults.rangeStep&&u.attr("step")||n.rangeStep,min:n.minScale,max:n.maxScale}).prop({value:this.getMatrix()[0]}),!n.disableZoom){var c=this.$zoomIn,p=this.$zoomOut;c.length&&p.length&&(c.on(o,function(e){e.preventDefault(),t.zoom()}),p.on(o,function(e){e.preventDefault(),t.zoom(!0)})),u.length&&(a={},a[(h?"pointerdown":"mousedown")+i]=function(){t.transition(!0)},a["change"+i]=function(){t.zoom(+this.value,{noSetRange:!0})},u.on(a))}},_unbind:function(){this.$elem.add(this.$zoomIn).add(this.$zoomOut).add(this.$reset).off(this.options.eventNamespace)},_buildTransform:function(){return this._origTransform=this.getTransform(this.options.startTransform)},_buildTransition:function(){if(this._transform){var t=this.options;this._transition=this._transform+" "+t.duration+"ms "+t.easing}},_checkDims:function(){var t=this.dimensions;return t.width&&t.height||this.resetDimensions(),this.dimensions},_getDistance:function(t){var e=t[0],n=t[1];return Math.sqrt(Math.pow(Math.abs(n.clientX-e.clientX),2)+Math.pow(Math.abs(n.clientY-e.clientY),2))},_getMiddle:function(t){var e=t[0],n=t[1];return{clientX:(n.clientX-e.clientX)/2+e.clientX,clientY:(n.clientY-e.clientY)/2+e.clientY}},_trigger:function(t){"string"==typeof t&&(t="panzoom"+t),this.$elem.triggerHandler(t,[this].concat(d.call(arguments,1)))},_startMove:function(t,i){var r,o,s,a,l,u,c,p,d=this,f=this.options,m=f.eventNamespace,g=this.getMatrix(),_=g.slice(0),v=+_[4],y=+_[5],b={matrix:g,animate:"skip"};h?(o="pointermove",s="pointerup"):"touchstart"===t.type?(o="touchmove",s="touchend"):(o="mousemove",s="mouseup"),o+=m,s+=m,this.transition(!0),this.panning=!0,this._trigger("start",t,i),i&&2===i.length?(a=this._getDistance(i),l=+g[0],u=this._getMiddle(i),r=function(t){t.preventDefault();var e=d._getMiddle(i=t.touches),n=d._getDistance(i)-a;d.zoom(n*(f.increment/100)+l,{focal:e,matrix:g,animate:!1}),d.pan(+g[4]+e.clientX-u.clientX,+g[5]+e.clientY-u.clientY,b),u=e}):(c=t.pageX,p=t.pageY,r=function(t){t.preventDefault(),d.pan(v+t.pageX-c,y+t.pageY-p,b)}),e(document).off(m).on(o,r).on(s,function(t){t.preventDefault(),e(this).off(m),d.panning=!1,t.type="panzoomend",d._trigger(t,g,!n(g,_))})}},e.Panzoom=s,e.fn.panzoom=function(t){var n,i,r,o;return"string"==typeof t?(o=[],i=d.call(arguments,1),this.each(function(){n=e.data(this,p),n?"_"!==t.charAt(0)&&"function"==typeof(r=n[t])&&void 0!==(r=r.apply(n,i))&&o.push(r):o.push(void 0)}),o.length?1===o.length?o[0]:o:this):this.each(function(){new s(this,t)})},s}),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty,n=function(t,e){return function(){return t.apply(e,arguments)}},i=[].slice;define("controllers/profiles/show",["load","backbone","jquery","mixpanel","modernizr","underscore","uri","lib/associations","lib/dropdown","lib/history","lib/flash","lib/follows","lib/form","lib/mentions","lib/navigator","lib/partials","lib/profile","lib/string","models/reference","models/follow","models/new_tagging","models/profile","models/repository","models/review","models/startup_role","models/status_update","models/user","jquery.imagesloaded","jquery.magnific","jquery.panzoom","jquery.scrollTo","qtip"],function(e,r,o,s,a,l,u,c,p,d,h,f,m,g,_,v,y,b,w,x,k,C,$,T,q,P,j){var S,E,z;return E=function(t,e){var n;if(!e.data("user_id"))throw new Error("Must provide a user ID");return n=new y.ModelEditableRegion({el:t("> .content"),model:$.get(j).bootstrap(e.data("user_id"))}),t(".title .controls").each(function(){return new y.EditableRegionControls({editableRegion:n,el:this})}),t("> .content > .edit").each(function(){return t(this).show(),t("textarea",this).autosize().each(function(){return t(this).qtip({defaultPosition:"right",activation:"focus"}),new m.CharacterCounter({el:this,container:t(this).closest(".item").find(".character_counter"),max:parseInt(t(this).data("max"))})}),t(this).hide()}),v["with"](t(v.selector("profiles/show/module_taggings")),function(){return function(e){return e.on("edit",function(){return o.when(n.edit()).done(function(){return v["with"](t(v.selector("profiles/show/module_taggings_edit")),function(t){return t.field===e.field?t.focus():void 0})})})}}(this)),n},S=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.render=function(){return this.model.has(this.field)&&o.trim(this.model.get(this.field)).length>0?(this.$(".value").html(b.link_and_format(this.model.get(this.field))),this.$el.removeClass("empty")):(this.$(".value").empty(),this.$el.addClass("empty"))},n.prototype.events=function(){return{"click .filler":function(t){return function(){return t.trigger("edit")}}(this)}},n.prototype.initialize=function(t){return this.field=t.field,this.listenTo(this.model,"change:"+this.field,this.render,this)},n}(r.View),z=function(t){return t.find(".module_placeholder").each(function(){var e,n;return n=o(this).data("url"),e="profiles/modules/"+o(this).data("module"),o.getJSON(n,{render:[e]},function(n){return o.trim(n[e]||"").length>0?t.find(".show").removeClass(".loading").html(n[e]):t.fadeOut("fast")})})},{investment_vitals:function(t){return t(".tooltip").qtip({defaultPosition:"top"})},about:function(t,e){var n,i,r,s,a,l,u;for(n=E(t,e),l=$.get(C).bootstrap({id:e.data("profile_id"),user_id:e.data("user_id")}),u=["summary","what_ive_built","criteria"],r=function(e){return t(".content."+e).each(function(){var i;return i=new S({el:this,field:e,model:l}),i.on("edit",function(){return o.when(n.edit()).done(function(){return function(){return t("> .content > .edit ."+e+" :input").focus()}}(this))})})},s=0,a=u.length;a>s;s++)i=u[s],r(i);return v["with"](t(v.selector("profiles/show/module_taggings")),function(){return function(t){return t.on("edit",function(){return n.edit()})}}(this))},status:function(e,n){var i,r;return r=function(){return function(){return v["with"](e(v.selector("status_updates/update")),function(t){return t.once("remove",function(){return e(".current_status_update").hide()})})}}(this),r(),i=new(function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype._defaultOptions=function(){return l.extend(i.__super__._defaultOptions.apply(this,arguments),{beforeSend:function(){return e(".new form .errors").hide()},success:function(){return function(t){var n,i,o,s;if(null!=t.errors){i=t.errors,o=[];for(n in i)s=i[n],o.push(e(".new form .errors").show().text(s[0]));return o}return e(".new form .message_target").val("").trigger("change"),null!=t["status_updates/update"]?(e(".current_status_update").show().empty().html(t["status_updates/update"]),r()):void 0}}(this)})},i}(m.StandardForm))({el:e(".new form")}),e(".mentions_container .message").one("focus",function(){return new g.Autocomplete({el:e(".mentions_container"),target:e(":input.message_target")}),new m.CharacterCounter({el:e(".mentions_container .message"),container:e(".character_counter"),max:n.data("max_length")}),e(".action_bar").show()})},module_taggings:function(e,n){return e(".tag").each(function(){return $.get(k).bootstrap({id:e(this).data("id"),new_taggable_field:n.data("field"),new_taggable_type:"User",new_taggable_id:n.data("id"),new_tag:{slug_url:e("a",this).attr("href"),display_name:e(this).text()}})}),new(function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,i),r.prototype.template=l.template('<span class="tag"><% if (typeof slug_url != "undefined") { %><a href="<%- slug_url %>"><% } %><%- display_name %><% if (typeof slug_url != "undefined") { %></a><% } %></span>'),r.prototype.field=n.data("field"),r.prototype.events=function(){return{"click .filler":function(t){return function(){return t.trigger("edit")}}(this)}},r.prototype.render=function(){var t;return t=this.relevantTaggings(),n.toggleClass("empty",0===t.length),l.each(t,function(t){return function(n){var i;return e(".tag").filter(function(){return e(this).data("id")===n.id}).length>0?void 0:(i=o(t.template(n.get("new_tag"))),i.data("id",n.id),e(".value").append(i))}}(this)),e(".tag").each(function(){return l.any(t,function(t){return function(n){return n.id===e(t).data("id")}}(this))?void 0:e(this).remove()})},r.prototype.initialize=function(){return this.listenTo(this.collection,"add remove change",function(t){return function(e){return e.get("new_taggable_field")===n.data("field")?t.render():void 0}}(this))},r.prototype.relevantTaggings=function(){return this.collection.where({new_taggable_field:n.data("field"),new_taggable_type:"User",new_taggable_id:n.data("id")})},r}(r.View))({el:this,collection:$.get(k)})},module_taggings_edit:function(e,n){var i;return $.get(k).bootstrap(n.data("newTaggings")),i=b.capitalize(/_([^_]*)s$/.exec(n.data("field"))[1])+"Tag",new c.NewTaggingField({el:this,container:e(".association_container"),new_taggable_id:n.data("userId"),new_taggable_type:"User",new_taggable_field:n.data("field"),tag_type:i,allowUnmatched:l.contains(["tags_colleges","tags_roles","tags_skills","tags_needs"],n.data("field"))}),new(function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.field=n.data("field"),i.prototype.focus=function(){return this.$(":input").focus()},i}(r.View))({el:this})},cover_photo:function(i,r){var s;return s=[],i("> .edit").length>0&&(s=["draggabilly/draggabilly","jquery.imagesloaded"]),e(s,function(e){return function(s){var u,c,p,d;return p=$.get(j).bootstrap({id:r.data("user_id"),cover_photo_url:r.data("cover_photo_url")}),c=$.get(C).bootstrap({id:r.data("id"),user_id:r.data("user_id"),cover_photo_url:r.data("cover_photo_url"),cover_photo_vertical_offset:r.data("cover_photo_vertical_offset")}),u=function(r){function u(){return e.save=n(e.save,this),u.__super__.constructor.apply(this,arguments)}return t(u,r),u.prototype.events=function(){return{"click .cancel":"show","click .save":"save","click .change":"_openFileDialog","click .remove":function(t){return function(){return t.setRemoving(!0)}}(this),"click .undo":function(t){return function(){return t.setRemoving(!1)}}(this),"submit form":function(t){return function(e){return e.preventDefault(),t.save()}}(this),"change :file":function(t){return function(e){var n,r,o;if(!a.filereader)throw new Error("File API not supported for cover photo");return t._fileProcessId||(t._fileProcessId=0),t._fileProcessId++,e.target.files.length>0?(t.edit(),o=new FileReader,r=e.target.files[0],r.type.match("image.*")?(n=t._fileProcessId,o.onload=function(){return(t._fileProcessId=n)?(i(".cover_draggable").attr("src",o.result),t.currentVerticalOffset=.5,t.resetDimensions()):void 0},o.readAsDataURL(r)):t.$(".error").show()):void 0}}(this)}},u.prototype.render=function(){var t,e;return t=Number(this.model.get("cover_photo_vertical_offset")),e=100*t+"%",this.$(".cover").css({"background-image":this.model.has("cover_photo_url")?"url("+this.model.escape("cover_photo_url")+")":"","background-position":"50% "+100*t+"%"}),this._resetDraggableImage(),this.resetDimensions()},u.prototype.setRemoving=function(t){return i(".links").toggle(!t),i(".removing").toggle(t),i(".remove_cover_photo").val(t)},u.prototype.editOrAdd=function(){return this.model.has("cover_photo_url")?this.edit():this._openFileDialog()},u.prototype.show=function(){return this.currentVerticalOffset=Number(this.model.get("cover_photo_vertical_offset")),this.setRemoving(!1),this.$(":file").replaceWith(this.$fileClone.clone()),this.$(".error").hide(),this._resetDraggableImage(),this.resetDimensions(),u.__super__.show.apply(this,arguments)},u.prototype.save=function(){var t,e;return t=this.$("form"),t.find(":input.cover_photo_vertical_offset").val(this.currentVerticalOffset),e=m.attributes(t,p.prefix()),this.$(".error").hide(),t.ajaxSubmit(m.loadingOptions(t,{success:function(t){return function(n){return null!=n.errors?t.$(".error").show():(p.set(n.user),p.set(e),t.show())}}(this),dataType:"json",error:function(t){return function(){return t.$(".error").show()}}(this)}))},u.prototype.resetDimensions=function(){return this.$(".cover_draggable").imagesLoaded(function(t){return function(){var e,n;return null==t.$("> .edit").height()?void l.delay(t.resetDimensions,150):(n=t.$("> .edit").is(":visible"),t.$("> .edit").show(),t.$el.removeClass("image_stretch_vertical"),t.$(".cover_draggable").css("height","auto"),t.$(".cover_draggable").height()<t.$("> .edit").height()&&(t.$el.addClass("image_stretch_vertical"),t.$(".cover_draggable").height(t.$("> .edit").height())),t.$(".cover_draggable_container").height(2*t.$(".cover_draggable").height()-t.$("> .edit").height()),e=Math.floor((1-t.currentVerticalOffset)*(t.$(".cover_draggable").height()-t.$("> .edit").height())),t.$(".cover_draggable").css("top",e+"px"),t.$("> .edit").toggle(n))}}(this))},u.prototype.delegateEvents=function(){var t,e,n;return u.__super__.delegateEvents.apply(this,arguments),n=this,this.$(".cover_draggable").each(function(){return n.draggie||(n.draggie=new s(this,{axis:"y",containment:!0}))}),null!=(t=this.draggie)&&t.enable(),null!=(e=this.draggie)&&e.on("dragEnd",function(t){return function(){var e,n;return n=t.$(".cover_draggable").height()-t.$("> .edit").height(),e=parseInt(t.$(".cover_draggable").css("top")),t.currentVerticalOffset=1-e/n,t.currentVerticalOffset<0&&(t.currentVerticalOffset=0,t.resetDimensions()),t.currentVerticalOffset>1&&(t.currentVerticalOffset=1,t.resetDimensions()),!1}}(this)),o(window).on("resize.profiles_show_cover_photo",this.resetDimensions)},u.prototype.undelegateEvents=function(){var t,e;return u.__super__.undelegateEvents.apply(this,arguments),null!=(t=this.draggie)&&t.disable(),null!=(e=this.draggie)&&e.removeAllListeners(),o(window).off("resize.profiles_show_cover_photo")},u.prototype.initialize=function(){return this.$fileClone=i(":file").clone(),this.resetDimensions=l.throttle(l.bind(this.resetDimensions,this),150),this.currentVerticalOffset=Number(this.model.get("cover_photo_vertical_offset")),this.listenTo(this.model,"change:cover_photo_url change:cover_photo_vertical_offset",this.render,this),this.render()},u.prototype._transition=function(t,e){return t.hide(),e.show(),o.when(!0)},u.prototype._openFileDialog=function(){var t;return t=this.$("> .edit").is(":visible"),this.$("> .edit").show(),this.$("> .edit .hidden").show(),this.$(":file").focus().click(),this.$("> .edit .hidden").hide(),this.$("> .edit").toggle(t)},u.prototype._resetDraggableImage=function(){return this.$(".cover_draggable").attr("src",this.model.get("cover_photo_url")||"//:0")},u}(y.EditableRegion),d=new u({model:c,el:e})}}(this))},header:function(e,n){var r,s,a,l,u,c,p,d,h;for(s={},d=["id","user_id","cover_photo_url"],l=0,c=d.length;c>l;l++)u=d[l],s[u]=n.data(u);if(null==s.user_id)throw new Error("Must provide a user ID so the profile can listen for changes on its associated user model");return p=$.get(C).bootstrap(s),h=$.get(j).bootstrap(n.data("user_id")),e(".edit_link_container").removeClass("preload"),e("> .container > .show").each(function(){return p.on("change:cover_photo_url",function(){return function(t,i){return n.toggleClass("with_cover",null!=i),e(".edit_cover_photo").text(null!=i?"Edit Cover":"Add Cover"),v["with"](e(v.selector("profiles/show/cover_photo")),function(t){return t.resetDimensions()})}}(this)),e(this).on("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",function(){return function(){return v["with"](e(v.selector("profiles/show/cover_photo")),function(t){return t.resetDimensions()})}}(this)),v["with"](e(v.selector("profiles/show/cover_photo")),function(){return function(t){return e(".edit_cover_photo").removeClass("loading").on("click",function(){return t.editOrAdd()}),t.on("edit",function(){return n.addClass("with_cover"),v["with"](e(v.selector("profiles/show/cover_photo")),function(){return function(t){return t.resetDimensions()}}(this)),e("> .container").fadeTo("fast",0,function(){return function(){return e("> .cover").zIndex(e("> .container").zIndex()+1)}}(this))}),t.on("show",function(){return n.toggleClass("with_cover",p.has("cover_photo_url")),e("> .cover").zIndex(e("> .container").zIndex()-1),e("> .container").fadeTo("fast",1)})}}(this))}),r=function(r){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,r),s.prototype.save=function(){var t,n,r,s;return n=o.Deferred(),t=m.attributes(this.$("> .edit"),h.prefix()),r=(null!=(s=this.$("> .edit form .photo :input").val())?s.length:void 0)?!0:!1,m.clearInputErrors(e("> .edit form :input")),this.$("> .edit form").ajaxSubmit({data:{use_status_codes:1,section:"profiles/show/tags"},dataType:"json",success:function(){var e,s;return e=1<=arguments.length?i.call(arguments,0):[],s=e[0],r&&h.set("avatar",null),h.set(t),h.set(s.user),v["with"](o(v.selector("profiles/show/tags")),function(){return function(t){return t.render(s.html)}}(this)),n.resolveWith(this,e)},error:function(t){return function(){var e;return e=1<=arguments.length?i.call(arguments,0):[],t.error(o.parseJSON(e[0].responseText).errors),n.rejectWith(t,e)}}(this)}),n.promise()},s.prototype._transition=function(t){return n.toggleClass("editing",t.hasClass("show")),n.hasClass("editing")?(o(v.selector("profiles/show/subheader")).hide(),this.$("> .edit .name input").focus().each(function(){return o(this).val(o(this).val())}),this.$("textarea").trigger("autosize.resize")):o(v.selector("profiles/show/subheader")).show(),!0},s}(y.ModelEditableRegion),a=new r({el:e("> .container"),model:h}),new(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.saveSelector=function(){return".save_link"},n.prototype.editSelector=function(){return".edit_link"},n.prototype.cancelSelector=function(){return".cancel_link"},n.prototype.controlSelector=function(){return".edit .controls"},n.prototype._transition=function(){return!0},n}(y.EditableRegionControls))({el:this,editableRegion:a}),e(".edit .bio").each(function(){return new g.Autocomplete({el:e(".editable",this),target:e(":input.bio_target",this)}),new m.CharacterCounter({el:e(":input.bio_target",this),max:e(":input.bio_target").data("max"),container:e(".character_counter",this)})}),window.location.href.search("edit_profile")>-1&&e(".edit_link").trigger("click"),a},subheader:function(t,e){var n;if(null==e.data("userId"))throw new Error("Must provide a user ID");return t(".tiptip").qtip({defaultPosition:"left"}),n=$.get(j).bootstrap(e.data("userId")),n.on("change:name",function(e){return function(n,i){return t(".js-name",e).text(i)}}(this)),n.on("change:avatar",function(e){return function(n,i){return t(".js-avatar-img",e).attr("src",i)}}(this)),e.on("mouseover",function(){return t(".fontello-edit").show()}),e.on("mouseleave",function(){return t(".fontello-edit").hide()}),t(".fontello-edit").on("click",function(){var t;return t=o(v.selector("profiles/show/header")),v["with"](t,function(){return function(e){return e._transition(t.find(".show"),t.find(".edit"))}}(this))})},tags:function(t,e){return t(".tiptip").qtip({defaultPostion:"top"}),{render:function(t){return e.replaceWith(t)}}},links:function(t,e){var n,i,r,s,a,c,p;for(r=$.get(C).bootstrap(e.data("id")),t("a").each(function(){return null!=t(this).data("field")?r.set(t(this).data("field"),t(this).attr("href")):void 0}),a=l.debounce(function(t){return function(){var n,i,s,a;for(e.empty(),s=e.data("linkOrder"),n=0,i=s.length;i>n;n++)a=s[n],r.get(a+"_url")&&o("<a>").addClass("icon link_el").addClass("fontello-"+(e.data("fontelloOverrides")[a]||a)).attr("href",r.get(a+"_url")).attr("target","_blank").wrap("<span>").parent().addClass("link").appendTo(o(t));return r.get("online_bio_url")?o("<a>").addClass("link_el").attr("href",r.get("online_bio_url")).attr("target","_blank").text(new u(r.get("online_bio_url")).domain()).wrap("<span>").parent().addClass("link").appendTo(e):void 0}}(this),10),s=o(this).data("linkOrder"),c=[],n=0,i=s.length;i>n;n++)p=s[n],c.push(r.on("change:"+p+"_url",a));return c},notifications:function(t){return t("a.claim").magnificPopup({type:"inline"})},reviews:function(e,i){var s,a,l;return e(".add_review")&&(s=function(i){function r(){return this.toggle=n(this.toggle,this),r.__super__.constructor.apply(this,arguments)}return t(r,i),r.prototype.initialize=function(){return r.__super__.initialize.apply(this,arguments),this.$("textarea").autosize(),$.get(q).on("saved",this.addStartup,this),this.on("sync",this.addPending)},r.prototype.addPending=function(){var t;return t=o('<div class="ref">').html(this.model.get("confirmer_name")+" ("+this.model.get("confirmer_email")+") sent just now"),this.$(".pending").removeClass("hidden").append(t)},r.prototype.addStartup=function(t){return this.$(".inner.no_startups").length>0&&(this.$(".inner.no_startups").remove(),this.$(".inner").removeClass("hidden")),this.$("option[value='"+t.get("startup_id")+"']").length>0?void 0:this.$("select").prepend("<option value='"+t.get("startup_id")+"'>"+t.get("startup_company_name")+"</option>")},r.prototype.toggle=function(){var t;return t=e(".controls a"),"Done"===t.html()?(t.html("Request More"),this.$el.slideUp()):(t.html("Done"),this.$el.slideDown())},r}(m.StandardForm),l=new s({el:e(".add_review"),model:new w}),i.on("click",".js-toggle-form",l.toggle)),new(a=function(i){function r(){return this.edit=n(this.edit,this),r.__super__.constructor.apply(this,arguments)}return t(r,i),r.prototype.initialize=function(){return this.collection.on("destroy",this.destroy,this),this.original_action=this.$("form").attr("action"),v["with"](e(v.selector("reviews/form")),function(t){return function(n){return n.on("save",function(n){return e(".review_form").addClass("hidden").find("form")[0].reset(),t.editing_review?t.editing_review.view.update(n):e("ul").removeClass("hidden").append(o('<li class="review">').html(n))})}}(this))},r.prototype.destroy=function(){return this.$(".review_form").removeClass("hidden"),this.$("form").prop({action:this.original_action})[0].reset(),this.$('form input[name="_method"]').remove(),e("li.review:visible").length>0&&this.$("ul").addClass("hidden"),this.editing_review=null},r.prototype.edit=function(t){return this.editing_review=t,this.$("form").prop({action:t.url()}).find('[name="review[note]"]').val(t.get("note")),this.$("form").append(o('<input type="hidden" name="_method" value="PUT" />')),o.scrollTo(this.$(".review_form").removeClass("hidden"),{duration:500})},r}(r.View))({el:i,collection:$.get(T)})},social:function(e,n){var i,s,a,l;return null!=n.data("follow")&&(a=new x(n.data("follow")),a.isNew()||(a=$.get(x).bootstrap(a.toJSON())),l={utm_source:"profile_follow_button"},new(s=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.renderCreated=function(){return this.$el.addClass("following").removeClass("faded").removeClass("not_following").text("Following")},n.prototype.renderDestroyed=function(){return this.$el.addClass("not_following").addClass("faded").removeClass("following").text("Follow")},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.listenTo(this,"request",function(t){return function(){return t.currentXhr().always(function(){return t.$el.removeClass("active")})}}(this))},n.prototype.click=function(){return null!=this.currentXhr()&&this.$el.addClass("active"),n.__super__.click.apply(this,arguments)},n.prototype._destroyModel=function(t){return t.destroy({parameters:l})},n.prototype._saveModel=function(t){return t.save(null,{parameters:l})},n}(f.FollowToggleView))({el:e(".action.follow"),attributes:a.pick(s.REQUIRED_ATTRIBUTES)})),new(i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.events={"click .follow_link":"openPopover"},n.prototype.openPopover=function(t){return t.preventDefault(),this.getFollows(t)},n.prototype.getFollows=function(t){var e;return e=o(t.target).attr("href"),o.ajax({url:e,type:"GET",success:function(t){return o.facybox(t.html)}})},n}(r.View))({el:n})},review:function(e,n){var i,s;return i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.events={"click .toggle":"toggle","click .destroy":"destroy","click .edit":"edit"},n.prototype.initialize=function(){return this.listenTo(this.model,"change:hidden",this.render,this)},n.prototype.toggle=function(t){return t.preventDefault(),this.model.save({hidden:!this.model.get("hidden")},{url:this.$(".toggle").attr("href")})},n.prototype.edit=function(){return v["with"](v.selector("profiles/show/reviews"),function(t){return t.edit(s)})},n.prototype.render=function(){return this.$(".review").toggleClass("hidden_review",this.model.get("hidden")),this.$(".toggle").text(this.model.get("hidden")?"Show":"Hide")},n.prototype.update=function(t){var e;return e=o("<li class='review'>").html(t),this.$el.replaceWith(e),this.el=e},n.prototype.destroy=function(t){return t.preventDefault(),confirm("Are you sure you want to delete this review? This can't be undone.")?(this.model.destroy(),this.$el.fadeOut("fast",function(t){return function(){return t.remove()}}(this))):void 0},n}(r.View),s=$.get(T).bootstrap(n.data("review")),s.view=new i({el:n.parent(),model:s})},admin:function(t,e){return t("> .header .toggle").on("click",function(){return e.children().hide(),t("> .header").show(),t(this).hide(),t("> .header .loading").show(),o.get(t(this).attr("href"),{},function(t){return e.replaceWith(t)},"html"),!1}),e.on("click",".delete_email",function(e){return e.preventDefault(),o.ajax({url:t(this).attr("href"),method:"DELETE"}),t(this).closest(".info").fadeOut()}),t(".merge").on("click",function(){return t(".merge_content").show()}),t(".talent_decline").on("click",function(){var t;return t=prompt("Why are you banning them? (Optional, but recommended)"),o(this).attr("href",o(this).attr("href")+"&message="+t),!0})},message_button:function(t){return t("a",this).magnificPopup({type:"ajax"})},contact_button:function(t,e){return s.track("contact button: load"),e.data("connected")&&(s.track("contact button: connected"),o.ajax({url:e.data("url"),dataType:"json",data:{can_contact:!0},success:function(t){var n;return t?void 0:(n=e.find("a"),n.addClass("disabled tiptip"),n.attr("title","We can't find any connections to "+e.data("name")+" using your follow graph."),n.qtip(),s.track("contact button: disabled"))}})),t("a").click(function(){return o(this).addClass("loading"),t(this).hasClass("disabled")?void 0:o.ajax({url:e.data("url"),data:"json",success:function(t){return function(e){return o(t).removeClass("loading"),o.facybox(e.html)}}(this)})})},recommended_people:function(t,e){return s.track("recommended_people: load"),o.get(e.data("load_url"),{},function(n){return 0===o.trim(n).length?e.fadeOut("fast"):t(".content .show").removeClass("loading").html(n)})},connections:function(t,e){return z(e)},backing:function(t,e){return z(e)},manage:function(){return s.track_links(".manage_investor_profile","user profile - manage: manage investor profile"),s.track_links(".complete_investor_profile","user profile - manage: complete investor profile"),s.track_links(".create_investor_profile","user profile - manage: create investor profile"),s.track_links(".manage_talent_profile","user profile - manage: manage talent profile"),s.track_links(".create_talent_profile","user profile - manage: create talent profile"),s.track_links(".create_startup_profile","user profile - manage: create startup profile")},follow_button:function(e,i){var l;return new(l=function(e){function i(){return this.destroy_follow=n(this.destroy_follow,this),this.create_follow=n(this.create_follow,this),this.error=n(this.error,this),this.hide_dropdown=n(this.hide_dropdown,this),this.show_dropdown=n(this.show_dropdown,this),this.bind_hover=n(this.bind_hover,this),this.is_touch_device=n(this.is_touch_device,this),i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(){return this.dropdown=this.$(".dropdown"),this.follow_button=this.$(".js-follow"),this.unfollow_link=this.$(".js-unfollow"),this.follow_token=this.$el.data("follow_token"),this.followed_token=this.$el.data("followed_token"),p.on("hide",this.hide_dropdown),this.bind_hover()},i.prototype.events=function(){return{"click .js-follow":function(t){return function(){return t.follow_button.hasClass("following")?t.is_touch_device()&&t.dropdown.is(":visible")?t.hide_dropdown():t.show_dropdown():t.create_follow()}}(this),"click .js-unfollow":function(t){return function(){return t.destroy_follow()}}(this)}},i.prototype.is_touch_device=function(){return a.touch},i.prototype.bind_hover=function(){return this.is_touch_device()?void 0:this.$el.hover(function(t){return function(){return setTimeout(function(){return t.show_dropdown()},100)}}(this),function(t){return function(){return t.hide_dropdown()}}(this))},i.prototype.show_dropdown=function(){return this.follow_button.hasClass("following")&&!this.dropdown.is(":visible")?(s.track("profile/follow_button: show_dropdown"),p.hideAll(),this.dropdown.fadeIn(100)):void 0},i.prototype.hide_dropdown=function(){return this.dropdown.hide()},i.prototype.error=function(){return h("An error occured while saving the data, please try to reload the page.")},i.prototype.create_follow=function(){return this.follow_button.hasClass("disabled")?void 0:(this.follow_button.addClass("loading"),this.unfollow_link.addClass("disabled"),this.hide_dropdown(),o.ajax({url:"/follows.js",data:{followed_token:this.followed_token,followed_type:"User"},type:"post",dataType:"json",success:function(t){return function(e){return e.success?(s.track("profile/follow_button: create_follow"),t.follow_token=e.follow_token,t.unfollow_link.removeClass("disabled")):t.error()}}(this),error:function(t){return function(){return t.error()}}(this)}),setTimeout(function(t){return function(){return t.follow_button.show().removeClass("loading").addClass("following").text("Following"),t.bind_hover(),t.show_dropdown()}}(this),400))},i.prototype.destroy_follow=function(){return this.unfollow_link.hasClass("disabled")?void 0:(this.follow_button.addClass("disabled").removeClass("following").text("Follow"),this.hide_dropdown(),o.ajax({url:"/follows/"+this.follow_token+".js",data:{_method:"delete"},type:"post",dataType:"json",success:function(t){return function(e){return e.success?(s.track("profile/follow_button: destroy_follow"),t.follow_button.removeClass("disabled"),v["with"](t.$(v.selector("interests/dropdown")),function(t){return t.reload()})):t.error()}}(this),error:function(t){return function(){return t.error()}}(this)}))},i}(r.View))({el:i})}}})}.call(this),!function(t){if("object"==typeof exports)module.exports=t(require("underscore"),require("backbone"));else if("function"==typeof define&&define.amd)define("backbone.paginator",["underscore","backbone"],t);else if("undefined"!=typeof _&&"undefined"!=typeof Backbone){var e=Backbone.PageableCollection,n=t(_,Backbone);Backbone.PageableCollection.noConflict=function(){return Backbone.PageableCollection=e,n}}}(function(t,e){function n(e,n){if(!t.isNumber(e)||t.isNaN(e)||!t.isFinite(e)||~~e!==e)throw new TypeError("`"+n+"` must be a finite integer");return e}function i(t){for(var e,n,i,r,o={},s=decodeURIComponent,a=t.split("&"),l=0,u=a.length;u>l;l++){var c=a[l];
e=c.split("="),n=e[0],i=e[1]||!0,n=s(n),i=s(i),r=o[n],f(r)?r.push(i):o[n]=r?[r,i]:i}return o}function r(t,e,n){var i=t._events[e];if(i&&i.length){var r=i[i.length-1],o=r.callback;r.callback=function(){try{o.apply(this,arguments),n()}catch(t){throw t}finally{r.callback=o}}}else n()}var o=t.extend,s=t.omit,a=t.clone,l=t.each,u=t.pick,c=t.contains,p=t.isEmpty,d=t.pairs,h=t.invert,f=t.isArray,m=t.isFunction,g=t.isObject,_=t.keys,v=t.isUndefined,y=Math.ceil,b=Math.floor,w=Math.max,x=e.Collection.prototype,k=/[\s'"]/g,C=/[<>\s'"]/g,$=e.PageableCollection=e.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(t,e){x.constructor.apply(this,arguments),e=e||{};var n=this.mode=e.mode||this.mode||T.mode,i=o({},T.queryParams,this.queryParams,e.queryParams||{});i.directions=o({},T.queryParams.directions,this.queryParams.directions,i.directions||{}),this.queryParams=i;var r=this.state=o({},T.state,this.state,e.state||{});r.currentPage=null==r.currentPage?r.firstPage:r.currentPage,f(t)||(t=t?[t]:[]),t=t.slice(),"server"==n||null!=r.totalRecords||p(t)||(r.totalRecords=t.length),this.switchMode(n,o({fetch:!1,resetState:!1,models:t},e));var s=e.comparator;if(r.sortKey&&!s&&this.setSorting(r.sortKey,r.order,e),"server"!=n){var l=this.fullCollection;s&&e.full&&(this.comparator=null,l.comparator=s),e.full&&l.sort(),t&&!p(t)&&(this.reset(t,o({silent:!0},e)),this.getPage(r.currentPage),t.splice.apply(t,[0,t.length].concat(this.models)))}this._initState=a(this.state)},_makeFullCollection:function(t,n){var i,r,o,s=["url","model","sync","comparator"],a=this.constructor.prototype,l={};for(i=0,r=s.length;r>i;i++)o=s[i],v(a[o])||(l[o]=a[o]);var u=new(e.Collection.extend(l))(t,n);for(i=0,r=s.length;r>i;i++)o=s[i],this[o]!==a[o]&&(u[o]=this[o]);return u},_makeCollectionEventHandler:function(t,e){return function(n,i,s,u){var c=t._handlers;l(_(c),function(n){var i=c[n];t.off(n,i),e.off(n,i)});var p=a(t.state),d=p.firstPage,h=0===d?p.currentPage:p.currentPage-1,f=p.pageSize,m=h*f,g=m+f;if("add"==n){var b,w,x,k,u=u||{};if(s==e)w=e.indexOf(i),w>=m&&g>w&&(k=t,b=x=w-m);else{b=t.indexOf(i),w=m+b,k=e;var x=v(u.at)?w:u.at+m}if(u.onRemove||(++p.totalRecords,delete u.onRemove),t.state=t._checkState(p),k){k.add(i,o({},u||{},{at:x}));var C=b>=f?i:!v(u.at)&&g>x&&t.length>f?t.at(f):null;C&&r(s,n,function(){t.remove(C,{onAdd:!0})})}}if("remove"==n)if(u.onAdd)delete u.onAdd;else{if(--p.totalRecords){var $=p.totalPages=y(p.totalRecords/f);p.lastPage=0===d?$-1:$||d,p.currentPage>$&&(p.currentPage=p.lastPage)}else p.totalRecords=null,p.totalPages=null;t.state=t._checkState(p);var T,q=u.index;s==t?((T=e.at(g))?r(t,n,function(){t.push(T,{onRemove:!0})}):!t.length&&p.totalRecords&&t.reset(e.models.slice(m-f,g-f),o({},u,{parse:!1})),e.remove(i)):q>=m&&g>q&&((T=e.at(g-1))&&r(t,n,function(){t.push(T,{onRemove:!0})}),t.remove(i),!t.length&&p.totalRecords&&t.reset(e.models.slice(m-f,g-f),o({},u,{parse:!1})))}if("reset"==n)if(u=s,s=i,s==t&&null==u.from&&null==u.to){var P=e.models.slice(0,m),j=e.models.slice(m+t.models.length);e.reset(P.concat(t.models).concat(j),u)}else s==e&&((p.totalRecords=e.models.length)||(p.totalRecords=null,p.totalPages=null),"client"==t.mode&&(p.lastPage=p.currentPage=p.firstPage),t.state=t._checkState(p),t.reset(e.models.slice(m,g),o({},u,{parse:!1})));"sort"==n&&(u=s,s=i,s===e&&t.reset(e.models.slice(m,g),o({},u,{parse:!1}))),l(_(c),function(n){var i=c[n];l([t,e],function(t){t.on(n,i);var e=t._events[n]||[];e.unshift(e.pop())})})}},_checkState:function(t){var e=this.mode,i=this.links,r=t.totalRecords,o=t.pageSize,s=t.currentPage,a=t.firstPage,l=t.totalPages;if(null!=r&&null!=o&&null!=s&&null!=a&&("infinite"==e?i:!0)){if(r=n(r,"totalRecords"),o=n(o,"pageSize"),s=n(s,"currentPage"),a=n(a,"firstPage"),1>o)throw new RangeError("`pageSize` must be >= 1");if(l=t.totalPages=y(r/o),0>a||a>1)throw new RangeError("`firstPage must be 0 or 1`");if(t.lastPage=0===a?w(0,l-1):l||a,"infinite"==e){if(!i[s+""])throw new RangeError("No link found for page "+s)}else if(a>s||l>0&&(a?s>l:s>=l))throw new RangeError("`currentPage` must be firstPage <= currentPage "+(a?">":">=")+" totalPages if "+a+"-based. Got "+s+".")}return t},setPageSize:function(t,e){t=n(t,"pageSize"),e=e||{first:!1};var i=this.state,r=y(i.totalRecords/t),a=r?w(i.firstPage,b(r*i.currentPage/i.totalPages)):i.firstPage;return i=this.state=this._checkState(o({},i,{pageSize:t,currentPage:e.first?i.firstPage:a,totalPages:r})),this.getPage(i.currentPage,s(e,["first"]))},switchMode:function(e,n){if(!c(["server","client","infinite"],e))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');n=n||{fetch:!0,resetState:!0};var i=this.state=n.resetState?a(this._initState):this._checkState(o({},this.state));this.mode=e;var r,u=this,p=this.fullCollection,d=this._handlers=this._handlers||{};if("server"==e||p)"server"==e&&p&&(l(_(d),function(t){r=d[t],u.off(t,r),p.off(t,r)}),delete this._handlers,this._fullComparator=p.comparator,delete this.fullCollection);else{p=this._makeFullCollection(n.models||[],n),p.pageableCollection=this,this.fullCollection=p;var h=this._makeCollectionEventHandler(this,p);l(["add","remove","reset","sort"],function(e){d[e]=r=t.bind(h,{},e),u.on(e,r),p.on(e,r)}),p.comparator=this._fullComparator}if("infinite"==e)for(var f=this.links={},m=i.firstPage,g=y(i.totalRecords/i.pageSize),v=0===m?w(0,g-1):g||m,b=i.firstPage;v>=b;b++)f[b]=this.url;else this.links&&delete this.links;return n.fetch?this.fetch(s(n,"fetch","resetState")):this},hasPreviousPage:function(){var t=this.state,e=t.currentPage;return"infinite"!=this.mode?e>t.firstPage:!!this.links[e-1]},hasNextPage:function(){var t=this.state,e=this.state.currentPage;return"infinite"!=this.mode?e<t.lastPage:!!this.links[e+1]},getFirstPage:function(t){return this.getPage("first",t)},getPreviousPage:function(t){return this.getPage("prev",t)},getNextPage:function(t){return this.getPage("next",t)},getLastPage:function(t){return this.getPage("last",t)},getPage:function(t,e){var i=this.mode,r=this.fullCollection;e=e||{fetch:!1};var a=this.state,l=a.firstPage,u=a.currentPage,c=a.lastPage,d=a.pageSize,h=t;switch(t){case"first":h=l;break;case"prev":h=u-1;break;case"next":h=u+1;break;case"last":h=c;break;default:h=n(t,"index")}this.state=this._checkState(o({},a,{currentPage:h})),e.from=u,e.to=h;var f=(0===l?h:h-1)*d,m=r&&r.length?r.models.slice(f,f+d):[];return"client"!=i&&("infinite"!=i||p(m))||e.fetch?("infinite"==i&&(e.url=this.links[h]),this.fetch(s(e,"fetch"))):(this.reset(m,s(e,"fetch")),this)},getPageByOffset:function(t,e){if(0>t)throw new RangeError("`offset must be > 0`");t=n(t);var i=b(t/this.state.pageSize);return 0!==this.state.firstPage&&i++,i>this.state.lastPage&&(i=this.state.lastPage),this.getPage(i,e)},sync:function(t,n,i){var r=this;if("infinite"==r.mode){var s=i.success,a=r.state.currentPage;i.success=function(t,e,n){var l=r.links,u=r.parseLinks(t,o({xhr:n},i));u.first&&(l[r.state.firstPage]=u.first),u.prev&&(l[a-1]=u.prev),u.next&&(l[a+1]=u.next),s&&s(t,e,n)}}return(x.sync||e.sync).call(r,t,n,i)},parseLinks:function(t,e){var n={},i=e.xhr.getResponseHeader("Link");if(i){var r=["first","prev","next"];l(i.split(","),function(t){var e=t.split(";"),i=e[0].replace(C,""),o=e.slice(1);l(o,function(t){var e=t.split("="),o=e[0].replace(k,""),s=e[1].replace(k,"");"rel"==o&&c(r,s)&&(n[s]=i)})})}return n},parse:function(t,e){var n=this.parseState(t,a(this.queryParams),a(this.state),e);return n&&(this.state=this._checkState(o({},this.state,n))),this.parseRecords(t,e)},parseState:function(e,n,i){if(e&&2===e.length&&g(e[0])&&f(e[1])){var r=a(i),o=e[0];return l(d(s(n,"directions")),function(e){var n=e[0],i=e[1],s=o[i];v(s)||t.isNull(s)||(r[n]=o[i])}),o.order&&(r.order=1*h(n.directions)[o.order]),r}},parseRecords:function(t){return t&&2===t.length&&g(t[0])&&f(t[1])?t[1]:t},fetch:function(t){t=t||{};var e=this._checkState(this.state),n=this.mode;"infinite"!=n||t.url||(t.url=this.links[e.currentPage]);var r=t.data||{},l=t.url||this.url||"";m(l)&&(l=l.call(this));var c=l.indexOf("?");-1!=c&&(o(r,i(l.slice(c+1))),l=l.slice(0,c)),t.url=l,t.data=r;var p,h,f,g,y="client"==this.mode?u(this.queryParams,"sortKey","order"):s(u(this.queryParams,_(T.queryParams)),"directions"),b=d(y),w=a(this);for(p=0;p<b.length;p++)h=b[p],f=h[0],g=h[1],g=m(g)?g.call(w):g,null!=e[f]&&null!=g&&(r[g]=e[f]);if(e.sortKey&&e.order){var k=m(y.order)?y.order.call(w):y.order;r[k]=this.queryParams.directions[e.order+""]}else e.sortKey||delete r[y.order];var C=d(s(this.queryParams,_(T.queryParams)));for(p=0;p<C.length;p++)h=C[p],g=h[1],g=m(g)?g.call(w):g,null!=g&&(r[h[0]]=g);if("server"!=n){var $=this,q=this.fullCollection,P=t.success;return t.success=function(e,i,r){r=r||{},v(t.silent)?delete r.silent:r.silent=t.silent;var s=e.models;"client"==n?q.reset(s,r):(q.add(s,o({at:q.length},o(r,{parse:!1}))),$.trigger("reset",$,r)),P&&P(e,i,r)},x.fetch.call(this,o({},t,{silent:!0}))}return x.fetch.call(this,t)},_makeComparator:function(t,e,n){var i=this.state;return t=t||i.sortKey,e=e||i.order,t&&e?(n||(n=function(t,e){return t.get(e)}),function(i,r){var o,s=n(i,t),a=n(r,t);return 1===e&&(o=s,s=a,a=o),s===a?0:a>s?-1:1}):void 0},setSorting:function(t,e,n){var i=this.state;i.sortKey=t,i.order=e=e||i.order;var r=this.fullCollection,s=!1,a=!1;t||(s=a=!0);var l=this.mode;n=o({side:"client"==l?l:"server",full:!0},n);var u=this._makeComparator(t,e,n.sortValue),c=n.full,p=n.side;return"client"==p?c?(r&&(r.comparator=u),s=!0):(this.comparator=u,a=!0):"server"!=p||c||(this.comparator=u),s&&(this.comparator=null),a&&r&&(r.comparator=null),this}}),T=$.prototype;return $}),function(t){define("backbone.paginator-legacy/backbone.paginator",["backbone"],function(){return function(){return Backbone.Paginator=function(t,e,n){var i=e.map(t.VERSION.split("."),function(t){return parseInt(t,10)}),r={};r.version="0.8.1",r.clientPager=t.Collection.extend({useDiacriticsPlugin:!0,useLevenshteinPlugin:!0,sortColumn:"",sortDirection:"desc",lastSortColumn:"",fieldFilterRules:[],lastFieldFilterRules:[],filterFields:"",filterExpression:"",lastFilterExpression:"",defaults_ui:{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4},initialize:function(){this.on("add",this.addModel,this),this.on("remove",this.removeModel,this),this.setDefaults()},setDefaults:function(){var t=e.defaults(this.paginator_ui,this.defaults_ui);e.defaults(this,t)},addModel:function(t){this.origModels.push(t)},removeModel:function(t){var n=e.indexOf(this.origModels,t);this.origModels.splice(n,1)},sync:function(r,o,s){var a=this;this.setDefaults();var l={};e.each(e.result(a,"server_api"),function(t,n){e.isFunction(t)&&(t=e.bind(t,a),t=t()),l[n]=t});var u=e.clone(a.paginator_core);e.each(u,function(t,n){e.isFunction(t)&&(t=e.bind(t,a),t=t()),u[n]=t}),u=e.defaults(u,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp"}),u=e.extend(u,{data:decodeURIComponent(n.param(l)),processData:!1,url:e.result(u,"url")},s);var c=!(0===i[0]&&9===i[1]&&10===i[2]),p=u.success;u.success=function(t,e,n){p&&(c?p(t,e,n):p(o,t,u)),o&&o.trigger&&o.trigger("sync",o,t,u)};var d=u.error;u.error=function(t){d&&d(o,t,u),o&&o.trigger&&o.trigger("error",o,t,u)};var h=u.xhr=t.ajax(u);return o&&o.trigger&&o.trigger("request",o,h,u),h},nextPage:function(t){this.currentPage<this.information.totalPages&&(this.currentPage=++this.currentPage,this.pager(t))},previousPage:function(t){this.currentPage>1&&(this.currentPage=--this.currentPage,this.pager(t))},goTo:function(t,e){void 0!==t&&(this.currentPage=parseInt(t,10),this.pager(e))},howManyPer:function(t){if(void 0!==t){var e=this.perPage;this.perPage=parseInt(t,10),this.currentPage=Math.ceil((e*(this.currentPage-1)+1)/t),this.pager()}},setSort:function(t,e){void 0!==t&&void 0!==e&&(this.lastSortColumn=this.sortColumn,this.sortColumn=t,this.sortDirection=e,this.pager(),this.info())},setFieldFilter:function(t){e.isEmpty(t)?(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules="",this.pager(),this.info()):(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules=t,this.pager(),this.info())},doFakeFieldFilter:function(t){if(!e.isEmpty(t)){var n=this.origModels;return void 0===n&&(n=this.models),n=this._fieldFilter(n,t),""!==this.filterExpression&&(n=this._filter(n,this.filterFields,this.filterExpression)),n.length}},setFilter:function(t,e){void 0!==t&&void 0!==e&&(this.filterFields=t,this.lastFilterExpression=this.filterExpression,this.filterExpression=e,this.pager(),this.info())},doFakeFilter:function(t,n){if(void 0!==t&&void 0!==n){var i=this.origModels;return void 0===i&&(i=this.models),e.isEmpty(this.fieldFilterRules)||(i=this._fieldFilter(i,this.fieldFilterRules)),i=this._filter(i,t,n),i.length}},pager:function(t){var n=this,i=this.perPage,r=(n.currentPage-1)*i,o=r+i;void 0===n.origModels&&(n.origModels=n.models),n.models=n.origModels.slice(),""!==this.sortColumn&&(n.models=n._sort(n.models,this.sortColumn,this.sortDirection)),e.isEmpty(this.fieldFilterRules)||(n.models=n._fieldFilter(n.models,this.fieldFilterRules)),""!==this.filterExpression&&(n.models=n._filter(n.models,this.filterFields,this.filterExpression)),this.lastSortColumn===this.sortColumn&&this.lastFilterExpression===this.filterExpression&&e.isEqual(this.fieldFilterRules,this.lastFieldFilterRules)||(r=0,o=r+i,n.currentPage=1,this.lastSortColumn=this.sortColumn,this.lastFieldFilterRules=this.fieldFilterRules,this.lastFilterExpression=this.filterExpression),n.sortedAndFilteredModels=n.models.slice(),n.info(),n.reset(n.models.slice(r,o)),e.result(t,"success")},_sort:function(t,n,i){return t=t.sort(function(t,r){var o=t.get(n),s=r.get(n);if(e.isUndefined(o)||e.isUndefined(s)||null===o||null===s)return 0;if(o=o.toString().toLowerCase(),s=s.toString().toLowerCase(),"desc"===i)if(!o.match(/[^\-\d\.]/)&&o.match(/-?[\d\.]+/)&&!s.match(/[^\-\d\.]/)&&s.match(/-?[\d\.]+/)){if(s-0>o-0)return 1;if(o-0>s-0)return-1}else{if(s>o)return 1;if(o>s)return-1}else if(!o.match(/[^\-\d\.]/)&&o.match(/-?[\d\.]+/)&&!s.match(/[^\-\d\.]/)&&s.match(/-?[\d\.]+/)){if(s-0>o-0)return-1;if(o-0>s-0)return 1}else{if(s>o)return-1;if(o>s)return 1}if(t.cid&&r.cid){var a=t.cid,l=r.cid;if(l>a)return-1;if(a>l)return 1}return 0})},_fieldFilter:function(t,n){if(e.isEmpty(n))return t;var i=[];return e.each(t,function(t){var r=!0;e.each(n,function(n){if(!r)return!1;if(r=!1,"function"===n.type){var i=e.wrap(n.value,function(e){return e(t.get(n.field))});i()&&(r=!0)}else"required"===n.type?e.isEmpty(t.get(n.field).toString())||(r=!0):"min"===n.type?!e.isNaN(Number(t.get(n.field)))&&!e.isNaN(Number(n.value))&&Number(t.get(n.field))>=Number(n.value)&&(r=!0):"max"===n.type?!e.isNaN(Number(t.get(n.field)))&&!e.isNaN(Number(n.value))&&Number(t.get(n.field))<=Number(n.value)&&(r=!0):"range"===n.type?!e.isNaN(Number(t.get(n.field)))&&e.isObject(n.value)&&!e.isNaN(Number(n.value.min))&&!e.isNaN(Number(n.value.max))&&Number(t.get(n.field))>=Number(n.value.min)&&Number(t.get(n.field))<=Number(n.value.max)&&(r=!0):"minLength"===n.type?t.get(n.field).toString().length>=n.value&&(r=!0):"maxLength"===n.type?t.get(n.field).toString().length<=n.value&&(r=!0):"rangeLength"===n.type?e.isObject(n.value)&&!e.isNaN(Number(n.value.min))&&!e.isNaN(Number(n.value.max))&&t.get(n.field).toString().length>=n.value.min&&t.get(n.field).toString().length<=n.value.max&&(r=!0):"oneOf"===n.type?e.isArray(n.value)&&e.include(n.value,t.get(n.field))&&(r=!0):"equalTo"===n.type?n.value===t.get(n.field)&&(r=!0):"containsAllOf"===n.type?e.isArray(n.value)&&e.isArray(t.get(n.field))&&e.intersection(n.value,t.get(n.field)).length===n.value.length&&(r=!0):"pattern"===n.type?t.get(n.field).toString().match(n.value)&&(r=!0):r=!1}),r&&i.push(t)}),i},_filter:function(n,i,r){var o=this,s={};if(e.isString(i)?s[i]={cmp_method:"regexp"}:e.isArray(i)?e.each(i,function(t){s[t]={cmp_method:"regexp"}}):e.each(i,function(t,n){s[n]=e.defaults(t,{cmp_method:"regexp"})}),i=s,e.has(t.Paginator,"removeDiacritics")&&o.useDiacriticsPlugin&&(r=t.Paginator.removeDiacritics(r)),""===r||!e.isString(r))return n;var a=e.map(r.match(/\w+/gi),function(t){return t.toLowerCase()}),l="("+e.uniq(a).join("|")+")",u=new RegExp(l,"igm"),c=[];return e.each(n,function(n){var s=[];e.each(i,function(i,l){var c=n.get(l);if(c){var p=[];if(c=e.has(t.Paginator,"removeDiacritics")&&o.useDiacriticsPlugin?t.Paginator.removeDiacritics(c.toString()):c.toString(),"levenshtein"===i.cmp_method&&e.has(t.Paginator,"levenshtein")&&o.useLevenshteinPlugin){var d=t.Paginator.levenshtein(c,r);e.defaults(i,{max_distance:0}),d<=i.max_distance&&(p=e.uniq(a))}else p=c.match(u);p=e.map(p,function(t){return t.toString().toLowerCase()}),e.each(p,function(t){s.push(t)})}}),s=e.uniq(e.without(s,"")),e.isEmpty(e.difference(a,s))&&c.push(n)}),c},info:function(){var t=this,e={},n=t.sortedAndFilteredModels?t.sortedAndFilteredModels.length:t.length,i=Math.ceil(n/t.perPage);return e={totalUnfilteredRecords:t.origModels.length,totalRecords:n,currentPage:t.currentPage,perPage:this.perPage,totalPages:i,lastPage:i,previous:!1,next:!1,startRecord:0===n?0:(t.currentPage-1)*this.perPage+1,endRecord:Math.min(n,t.currentPage*this.perPage)},t.currentPage>1&&(e.previous=t.currentPage-1),t.currentPage<e.totalPages&&(e.next=t.currentPage+1),e.pageSet=t.setPagination(e),t.information=e,e},setPagination:function(t){var e=[],n=0,i=0,r=2*this.pagesInRange,o=Math.ceil(t.totalRecords/t.perPage);if(o>1)if(1+r>=o)for(n=1,i=o;i>=n;n++)e.push(n);else if(t.currentPage<=this.pagesInRange+1)for(n=1,i=2+r;i>n;n++)e.push(n);else if(o-this.pagesInRange>t.currentPage&&t.currentPage>this.pagesInRange)for(n=t.currentPage-this.pagesInRange;n<=t.currentPage+this.pagesInRange;n++)e.push(n);else for(n=o-r;o>=n;n++)e.push(n);return e},bootstrap:function(t){return e.extend(this,t),this.goTo(1),this.info(),this}}),r.clientPager.prototype.prevPage=r.clientPager.prototype.previousPage;var o=function(){var t=new n.Deferred;return t.reject(),t.promise()};return r.requestPager=t.Collection.extend({sync:function(r,o,s){var a=this;a.setDefaults();var l={};e.each(e.result(a,"server_api"),function(t,n){e.isFunction(t)&&(t=e.bind(t,a),t=t()),l[n]=t});var u=e.clone(a.paginator_core);e.each(u,function(t,n){e.isFunction(t)&&(t=e.bind(t,a),t=t()),u[n]=t}),u=e.defaults(u,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp"}),s.data=decodeURIComponent(n.param(s.data?e.extend(l,s.data):l)),u=e.extend(u,{data:decodeURIComponent(n.param(l)),processData:!1,url:e.result(u,"url")},s);var c=!(0===i[0]&&9===i[1]&&10===i[2]),p=u.success;u.success=function(t,e,n){p&&(c?p(t,e,n):p(o,t,u)),i[0]<1&&o&&o.trigger&&o.trigger("sync",o,t,u)};var d=u.error;u.error=function(t){d&&d(t),o&&o.trigger&&o.trigger("error",o,t,u)};var h=u.xhr=t.ajax(u);return o&&o.trigger&&o.trigger("request",o,h,u),h},setDefaults:function(){var t=this;e.defaults(t.paginator_ui,{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4}),e.each(t.paginator_ui,function(n,i){e.isUndefined(t[i])&&(t[i]=t.paginator_ui[i])})},requestNextPage:function(t){return void 0!==this.currentPage?(this.currentPage+=1,this.pager(t)):o()},requestPreviousPage:function(t){return void 0!==this.currentPage?(this.currentPage-=1,this.pager(t)):o()},updateOrder:function(t,e){return void 0!==t?(this.sortField=t,this.pager(e)):o()},goTo:function(t,e){return void 0!==t?(this.currentPage=parseInt(t,10),this.pager(e)):o()},howManyPer:function(t,e){return void 0!==t?(this.currentPage=this.firstPage,this.perPage=t,this.pager(e)):o()},info:function(){var t={totalRecords:this.totalRecords||0,currentPage:this.currentPage,firstPage:this.firstPage,totalPages:Math.ceil(this.totalRecords/this.perPage),lastPage:this.totalPages,perPage:this.perPage,previous:!1,next:!1};return this.currentPage>1&&(t.previous=this.currentPage-1),this.currentPage<t.totalPages&&(t.next=this.currentPage+1),t.hasNext=t.next,t.hasPrevious=t.next,t.pageSet=this.setPagination(t),this.information=t,t},setPagination:function(t){var e=[],n=0,i=0,r=2*this.pagesInRange,o=Math.ceil(t.totalRecords/t.perPage);if(o>1)if(1+r>=o)for(n=1,i=o;i>=n;n++)e.push(n);else if(t.currentPage<=this.pagesInRange+1)for(n=1,i=2+r;i>n;n++)e.push(n);else if(o-this.pagesInRange>t.currentPage&&t.currentPage>this.pagesInRange)for(n=t.currentPage-this.pagesInRange;n<=t.currentPage+this.pagesInRange;n++)e.push(n);else for(n=o-r;o>=n;n++)e.push(n);return e},pager:function(t){return e.isObject(t)||(t={}),this.fetch(t)},url:function(){return void 0!==this.paginator_core&&void 0!==this.paginator_core.url?this.paginator_core.url:null},bootstrap:function(t){return e.extend(this,t),this.setDefaults(),this.info(),this}}),r.requestPager.prototype.nextPage=r.requestPager.prototype.requestNextPage,r.requestPager.prototype.prevPage=r.requestPager.prototype.requestPreviousPage,r}(Backbone,_,jQuery),Backbone.Paginator}.apply(t,arguments)})}(this),define("require-css/css!coffeescripts/lib/pagination",[],function(){}),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty,n=function(t,e){return function(){return t.apply(e,arguments)}};define("lib/pagination",["require","jquery","underscore","backbone","backbone.paginator-legacy/backbone.paginator","lib/partials","css!coffeescripts/lib/pagination"],function(e,i,r,o,s,a){var l,u,c,p,d,h,f,m;return f=a.classNames("coffeescripts/lib/pagination"),m=r.template("<div class='"+f.join(" ")+" pagination_line g-module_section <%- modifierClass %>'>\n  <% if (showPreviousPage) { %>\n    <span class='prev element'>&laquo;</span>\n  <% } %>\n  <% _.each(pages, function(page) { %>\n    <span class='page element <% if (page === currentPage) print('current'); %>' data-page='<%- page %>'><%- page %></span>\n  <% }); %>\n  <% if (showNextPage) { %>\n    <span class='next element'>&raquo;</span>\n  <% } %>\n</div>"),p="_pagination_preserved",u="_pagination_list_item",l="_pagination_empty",c="_pagination_item_data",{RequestPager:h=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.goTo=function(t,e){var i,r;return r=this.currentPage,i=n.__super__.goTo.apply(this,arguments),this.trigger("paginate",i.promise(),{previous:r,current:t},e),i},n}(s.requestPager),PaginatedList:d=function(e){function o(){return this.items=n(this.items,this),this.$listContainer=n(this.$listContainer,this),this.$paginationContainer=n(this.$paginationContainer,this),this.preserve=n(this.preserve,this),this.renderPagination=n(this.renderPagination,this),this.render=n(this.render,this),o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.renderItem=function(){throw new Error("Subclasses must override")},o.prototype.render=function(){var t,e,n,o,s;return this.$paginationContainer().empty(),this.$("."+l).remove(),t=this.items(),n=this.renderPagination(),null!=n?(this.$paginationContainer().show(),this.$paginationContainer().each(function(){return i(this).append(n)})):this.$paginationContainer().hide(),e=this.$listContainer(),s=e.find("."+u+":not(."+p+")"),o=r.map(e.find("."+u+"."+p),function(t){return function(e){return t.modelFor(e).id}}(this)),t.length>0?(r.each(t,function(t){return function(n,a,l){var p;return r.contains(o,n.id)?void 0:(p=i(t.renderItem(n,a,l)).addClass(u),p.data(c,n),s.length>a?i(s[a]).replaceWith(p):e.append(p))}}(this)),s.remove()):(s.remove(),e.append(i(this.renderEmpty()).addClass(l))),this},o.prototype.initialize=function(t){return this.options=t,this.listenTo(this.collection,"paginate",this.handlePageChange,this)},o.prototype.events=function(){var t;return t={},t["click ."+f.join(".")+".pagination_line .page"]=function(t){return function(e){return t.collection.goTo(i(e.currentTarget).data("page"))}}(this),t["click ."+f.join(".")+".pagination_line .prev"]=function(t){return function(){return t.collection.goTo(Math.max(t.collection.currentPage-1,0))}}(this),t["click ."+f.join(".")+".pagination_line .next"]=function(t){return function(){return t.collection.goTo(t.collection.currentPage+1)}}(this),t},o.prototype.modelFor=function(t){return i(t).data(c)},o.prototype.renderPagination=function(){var t,e,n,i,r,o;return n=this.collection.totalPages,t=this.collection.currentPage,e=this.collection.firstPage+n-1,n>1?(o=this.collection.pagesInRange,m({currentPage:t,showPreviousPage:t>this.collection.firstPage,showNextPage:e>t,pages:function(){r=[];for(var n=i=Math.max(this.collection.firstPage,t-o),s=Math.min(e,t+o);s>=i?s>=n:n>=s;s>=i?n++:n--)r.push(n);return r}.apply(this),modifierClass:this.options.paginationModifierClass||""})):null},o.prototype.renderEmpty=function(){return""},o.prototype.preserve=function(t){if(t=i(t),0!==t.filter(function(){return!i(this).hasClass(u)}).length)throw new Error("Only valid for list items");return t.addClass(p)},o.prototype.handlePageChange=function(t){return t.done(function(t){return function(){return t.render()}}(this))},o.prototype.$paginationContainer=function(){return this.$(".pagination_container")},o.prototype.$listContainer=function(){return this.$(".list_container")},o.prototype.items=function(){return this.collection.models},o}(o.View)}})}.call(this),define("require-css/css!coffeescripts/lib/processing",[],function(){}),function(t){define("jquery.appear",["jquery"],function(){return function(){return!function(t){function e(){o=!1;for(var e=0;e<i.length;e++){var r=t(i[e]).filter(function(){return t(this).is(":appeared")});if(r.trigger("appear",[r]),n){var s=n.not(r);s.trigger("disappear",[s])}n=r}}var n,i=[],r=!1,o=!1,s={interval:250,force_process:!1},a=t(window);t.expr[":"].appeared=function(e){var n=t(e);if(!n.is(":visible"))return!1;var i=a.scrollLeft(),r=a.scrollTop(),o=n.offset(),s=o.left,l=o.top;return l+n.height()>=r&&l-(n.data("appear-top-offset")||0)<=r+a.height()&&s+n.width()>=i&&s-(n.data("appear-left-offset")||0)<=i+a.width()?!0:!1},t.fn.extend({appear:function(n){var a=t.extend({},s,n||{}),l=this.selector||this;if(!r){var u=function(){o||(o=!0,setTimeout(e,a.interval))};t(window).scroll(u).resize(u),r=!0}return a.force_process&&setTimeout(e,a.interval),i.push(l),t(l)}}),t.extend({force_appear:function(){return r?(e(),!0):!1}})}(jQuery),jQuery.fn.appear}.apply(t,arguments)})}(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("lib/processing",["backbone","backbone.paginator","jquery","underscore","uri","lib/partials","lib/pagination","css!coffeescripts/lib/processing","jquery.appear"],function(e,n,i,r,o,s,a){var l,u,c,p;return{ListCollection:l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(t,e){return n.__super__.initialize.apply(this,arguments),this._url=e.url,this.filters=e.filters},n.prototype.url=function(){return o(this._url).setQuery(this.filters).toString()},n.prototype.parseState=function(t,e,i,r){return n.__super__.parseState.call(this,[t.pagination,[]],e,i,r)},n.prototype.parseRecords=function(t,e){return n.__super__.parseRecords.call(this,[{},t.models],e)},n}(n),ListView:u=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.tagName="ul",n.prototype.className=s.classNames("coffeescripts/lib/processing").join(" ")+" processing_list",n.prototype.events=function(){return{"click .processing_list_item":function(t){return function(e){return t._selectElement(e.currentTarget)}}(this),"appear .processing_list_footer:not(.error)":function(t){return function(){return t.load()}}(this),"click .processing_list_footer":function(t){return function(){return t.load()}}(this)}},n.prototype.initialize=function(){return this.listenTo(this.collection,"add",function(t){return function(e){return i(t._$listItem(e)).insertBefore(t.$(".processing_list_footer"))}}(this)),this.render(),i.when(null==this.collection.state.totalRecords?this.load(1):void 0).done(function(t){return function(){var e;return e=t,t.$(".processing_list_item").first().each(function(){return e._selectElement(this)})}}(this))},n.prototype.render=function(){return this.$el.empty(),this.collection.each(function(t){return function(e){return i(t._$listItem(e)).appendTo(t.$el)}}(this)),i("<li/>").addClass("processing_list_footer u-textAlignCenter u-colorGray9 c-navstack-item c-navstack--control").appendTo(this.$el).appear(),this._updateFooter(),this},n.prototype.load=function(t){return null==t&&(t=null),this._loadingMore||null!=this.collection.state.totalRecords&&!this.collection.hasNextPage()?void 0:(this._loadingMore=!0,this.$(".processing_list_footer").removeClass("c-navstack--control").addClass("loading"),(null!=t?this.collection.getPage(t):this.collection.getNextPage()).always(function(t){return function(){return t._loadingMore=!1,t._updateFooter()}}(this)))},n.prototype._updateFooter=function(){return this.$(".processing_list_footer").removeClass("loading"),null==this.collection.state.totalRecords||this.collection.hasNextPage()?this.$(".processing_list_footer").removeClass("c-navstack--control").text("Load more"):(this.$(".processing_list_footer").addClass("c-navstack--control"),this.$(".processing_list_footer").text(0===this.collection.length?"Nothing to see here.":"That's it."))},n.prototype._selectElement=function(t){var e;if(this.$(".processing_list_item").removeClass("c-navstack--selected"),this.$(t).addClass("c-navstack--selected"),e=this.$(t).data("model"),this._processingLayout||(this._processingLayout=i(s.selector("layouts/processing"))),1!==this._processingLayout.length)throw new Error("Cannot find processing layout");return s["with"](this._processingLayout,function(t){return function(n){return n.changeDetails(t._loadDetails(e))}}(this))},n.prototype._$listItem=function(t){return i("<li/>").data("model",t).html(this._modelHtml(t)).addClass("processing_list_item c-navstack-item").addClass(s.classNames("coffeescripts/lib/processing").join(" "))},n.prototype._modelHtml=function(t){return t.get("processing_list_html")||function(){throw new Error("Models must expose their list HTML directly")}()},n.prototype._loadDetails=function(t){var e;return e=t.get("processing_list_path")||function(){throw new Error("Models must expose their list URL directly")}(),i.get(e,{},function(){},"html")},n}(e.View),ProcessingPager:p=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(t,e){if(n.__super__.initialize.apply(this,arguments),this.url=null!=e?e.url:void 0,this.filters=(null!=e?e.filters:void 0)||{},null==this.url||!r.isString(this.url))throw new Error("Must provide a URL")},n.prototype.paginator_core={dataType:"json",url:function(){return this.url}},n.prototype.server_api=function(){return r.extend({page:this.currentPage},this.filters)},n}(a.RequestPager),ProcessingList:c=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.renderRawItem=function(){throw new Error("Subclasses must override")},n.prototype.load=function(){throw new Error("Subclasses must override")},n.prototype.selectAt=function(t){var e;return e=this.$("._processing_list_item:not(._processing_list_removed)"),e.length>t?(this.selectElement(e[t]),!0):!1},n.prototype.selectElement=function(t){return t=i(t).closest("._processing_list_item"),this.$listContainer().children().removeClass(this.selectedClass),t.addClass(this.selectedClass),this.load(t.data("_processing_item")),this._currentId=t.data("_processing_id"),this._currentIndex=this.$("._processing_list_item:not(._processing_list_removed)").index(t)},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.collection.on("add remove change",r.throttle(this.render,100)),this.render(),this.withProcessingController(function(t){return function(e){return e.canToggleDetails()?void 0:t.selectAt(0)
}}(this))},n.prototype.events=function(){var t;return t=n.__super__.events.call(this),t["click ._processing_list_item"]=function(t){return function(e){return t.selectElement(e.currentTarget)}}(this),t},n.prototype.withProcessingController=function(t){if(this._$processingLayout||(this._$processingLayout=i(s.selector("layouts/processing"))),1!==this._$processingLayout.length)throw new Error("Cannot understand DOM");return s["with"](this._$processingLayout,t)},n.prototype.handlePageChange=function(t,e){return e.previous!==e.current&&this.$listContainer().fadeTo("fast",.4),this.withProcessingController(function(e){return function(){return t.done(function(){return e.$listContainer().fadeTo("fast",1)})}}(this))},n.prototype.currentId=function(){return this._currentId},n.prototype.renderItem=function(t,e,n){var r;return r=i(this.renderRawItem(t,e,n)),r.data("_processing_id",t.id),r.data("_processing_item",t),r.toggleClass(this.selectedClass,this.currentId()===t.id),r.addClass(this._itemClass),r},n.prototype.selectedClass="selected",n.prototype._itemClass="_processing_list_item",n.prototype._removedClass="_processing_list_removed",n}(a.PaginatedList)}})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/vote",["models/base"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.toString=function(){return"vote"},n.prototype.toString=function(){return"vote"},n}(e("Vote"))})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/program_application_comment",["models/base"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.toString=function(){return"program_application_comment"},n.prototype.toString=function(){return"program_application_comment"},n}(e("ProgramApplicationComment"))})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("models/program_application",["models/base","models/repository","models/vote","models/program_application_comment"],function(n,i,r,o){var s,a,l,u;return s=s=function(n){function r(){return this._trackCommentDestroyed=t(this._trackCommentDestroyed,this),this._trackCommentAdded=t(this._trackCommentAdded,this),this.trackCommentsFrom=t(this.trackCommentsFrom,this),this._trackVote=t(this._trackVote,this),this.trackVotesFrom=t(this.trackVotesFrom,this),r.__super__.constructor.apply(this,arguments)}return e(r,n),r.toString=function(){return"program_application"},r.prototype.toString=function(){return"program_application"},r.prototype.urlRoot=function(){switch(this.get("type")){case"ProgramApplication::IncubatorProgramApplication":return"/program_application/incubator_program_applications";case"ProgramApplication::SharingProgramApplication":return"/program_application/sharing_program_applications";case"ProgramApplication::InvestmentProgramApplication":return"/program_application/investment_program_applications";default:throw new Error("Cannot generate URL for program application type: "+this.get("type"))}},r.prototype.prefix=function(){switch(this.get("type")){case"ProgramApplication::IncubatorProgramApplication":return"program_application_incubator_program_application";case"ProgramApplication::SharingProgramApplication":return"program_application_sharing_program_application";case"ProgramApplication::InvestmentProgramApplication":return"program_application_investment_program_application";default:throw new Error("Cannot generate URL for program application type: "+this.get("type"))}},r.prototype.trackVotesFrom=function(t,e){if(null==e&&(e=null),!_.every(["votes_sum","positive_votes_count","negative_votes_count"],function(t){return function(e){return t.has(e)}}(this)))throw new Error("Can only track vote counts if initial counts are provided by the server");if(null==i.get(r).get(this))throw new Error("Can only track vote counts if the model is in the global ProgramApplication repository");return this._trackedVotes||(this._trackedVotes={}),this._trackedVotes[parseInt(t)]=(null!=e?e.get("amount"):void 0)||0},r.prototype._trackVote=function(t,e){var n,i;return t=parseInt(t),null!=this._trackedVotes&&_.contains(_.map(_.keys(this._trackedVotes),function(t){return parseInt(t)}),t)?(i=this.pick("votes_sum","negative_votes_count","positive_votes_count"),n=this._trackedVotes[t],i.votes_sum-=n,0>n?i.negative_votes_count+=n:i.positive_votes_count-=n,i.votes_sum+=e,0>e?i.negative_votes_count-=e:i.positive_votes_count+=e,this._trackedVotes[t]=e,this.set(i)):void 0},r.prototype.trackCommentsFrom=function(t,e){if(null==e&&(e=[]),!this.has("comments_count"))throw new Error("Can only track comment count if initial count is provided by the server");if(null==i.get(r).get(this))throw new Error("Can only track comment count if the model is in the global ProgramApplication repository");return this._trackedComments||(this._trackedComments={}),this._trackedComments[parseInt(t)]=_.map(e,function(t){return t.id})},r.prototype._trackCommentAdded=function(t){var e;return e=parseInt(t.get("user_id")),null!=this._trackedComments&&_.contains(_.map(_.keys(this._trackedComments),function(t){return parseInt(t)}),e)&&!_.contains(this._trackedComments[e],t.id)?(this._trackedComments[e].push(t.id),this.set({comments_count:this.get("comments_count")+1,last_comment_at:Date.now()})):void 0},r.prototype._trackCommentDestroyed=function(t){var e;return e=parseInt(t.get("user_id")),null!=this._trackedComments&&_.contains(_.map(_.keys(this._trackedComments),function(t){return parseInt(t)}),e)&&_.contains(this._trackedComments[e],t.id)?(this._trackedComments[e]=_.without(this._trackedComments[e],t.id),this.set("comments_count",this.get("comments_count")-1)):void 0},r}(n("ProgramApplication")),l=i.get(s),u=i.get(r),a=i.get(o),u.on("add",function(t){var e;return"ProgramApplication"===t.get("votable_type")?(e=l.get(t.get("votable_id")),null!=e?e._trackVote(t.get("user_id"),t.get("amount")||0):void 0):void 0}),u.on("destroy",function(t){var e;return"ProgramApplication"===t.get("votable_type")?(e=l.get(t.get("votable_id")),null!=e?e._trackVote(t.get("user_id"),0):void 0):void 0}),u.on("change:amount",function(t){var e;return"ProgramApplication"===t.get("votable_type")?(e=l.get(t.get("votable_id")),null!=e?e._trackVote(t.get("user_id"),t.get("amount")||0):void 0):void 0}),a.on("add",function(){return function(t){var e;return e=l.get(t.get("program_application_id")),null!=e?e._trackCommentAdded(t):void 0}}(this)),a.on("destroy",function(){return function(t){var e;return e=l.get(t.get("program_application_id")),null!=e?e._trackCommentDestroyed(t):void 0}}(this)),s})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty,n=function(t,e){return function(){return t.apply(e,arguments)}};define("controllers/programs",["load","backbone","jquery","underscore","lib/form","lib/string","lib/partials","lib/processing","models/repository","models/vote","models/program_application","qtip","jquery.autosize"],function(e,i,r,o,s,a,l,u,c,p,d){return{reviewing_controls:function(t){return l["with"](r(l.selector("programs/review")),function(e){return e.on("changeCounts",function(){return function(e,n){var i,r,o,s;r=n.status,o=[];for(i in r)s=r[i],o.push(t("li."+i+" .counter").text(s>1e3?parseInt(s/1e3)+"K":s));return o}}(this)),t("li").on("click",function(n){return n.preventDefault(),t("li").removeClass("selected"),t(this).addClass("selected"),e.filter(o.extend({},e.filters,{status:t(this).data("status")}))})})},review:function(e,n){var r,s,l,p;return p=null,r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype["class"]=d,n.prototype.parse=function(t){return p.setCounts(t.counts),n.__super__.parse.apply(this,arguments)},n}(u.ListCollection),s=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(t){return this.counts=t.counts,this.filter(t.filters,t.models,t.state)},i.prototype.setCounts=function(t){return this.counts=t,this.trigger("changeCounts",this,this.counts)},i.prototype.filter=function(t,e,i){var o;return null==e&&(e=[]),null==i&&(i={}),null!=(o=this._listView)&&o.remove(),this._listView=new u.ListView({collection:new r(e,{url:n.data("path"),filters:t,state:i})}),this.$("> .program_applications").empty().append(this._listView.el),this.filters=t,this.trigger("filter",this,this.filters)},i.prototype.collection=function(){var t;return null!=(t=this._listView)?t.collection:void 0},i}(i.View),l=n.data("pagination"),p=new s({el:this,counts:n.data("counts"),filters:n.data("filters"),models:n.data("program_applications"),state:{totalPages:l.total_pages,totalRecords:l.total_entries,currentPage:l.page,pageSize:l.per_page}}),e("> .header .order select").on("change",function(){return p.filter(o.extend({},p.filters,{order_by:e(this).val()}))}),c.get(d).on("change:status",function(){return function(t,e){var n;return o.isUndefined(t.previous("status"))?void 0:(n=p.counts,n.status[t.previous("status")]-=1,n.status[e]+=1,p.setCounts(n))}}(this)),p.on("filter",function(t,n){return e("> .header > .status").text(o.map(n.status.split("_"),function(t){return a.capitalize(t)}).join(" ")||"To Review")}),p},application_startup:function(a,l){return a("textarea").autosize(),a(".input").filter(function(){return null!=a(this).data("max")}).each(function(){return new s.CharacterCounter({el:a(":input",this),max:a(this).data("max")})}),e(["models/startup","models/program_global_response"],function(e){return function(u,p){var d,h;return h=c.get(u).bootstrap(l.data("startup_id")),c.get(p).bootstrap(a(".story").data("responses")),new(d=function(i){function l(){return e.save=n(e.save,this),e.isComplete=n(e.isComplete,this),e.initialize=n(e.initialize,this),l.__super__.constructor.apply(this,arguments)}return t(l,i),l.prototype.initialize=function(){return this.$(":input").on("change keyup",function(t){return function(){return t.trigger("change")}}(this))},l.prototype.isComplete=function(){return 0===this.$(":input").filter(function(){return!r(this).hasClass("not_required")&&0===r.trim(r(this).val()).length}).length},l.prototype.save=function(){var t,e;return t=r.Deferred(),a(".error").hide(),e=o.after(a(":input.response").length+1,function(){return function(){return t.resolve()}}(this)),h.save(s.attributes(a(".startup_form"),h.prefix()),{patch:!0,success:e,error:function(){return function(){return t.reject()}}(this)}),a(":input.response").each(function(){var n,i,o,s,l;return o=c.get(p),n={startup_id:h.id,question:a(this).data("question")},i=o.findWhere(n),s=r.trim(a(this).val()),s.length>0?(i||(i=new p(n)),o.add(i),l=i.save({response:s},{success:e,error:function(e){return function(n,i){var o;if(t.reject(),o=r.parseJSON(i.responseText),null!=o&&null==o.response)throw new Error("Could not parse ProgramApplication error text");return a(e).siblings(".error").text(((null!=o?o.response:void 0)||["Unknown error"]).join(", ")).show()}}(this)})):null!=i?i.destroy({success:e,error:function(){return function(){return t.reject()}}(this)}):e()}),t.promise()},l}(i.View))({el:e})}}(this))},application_founders:function(a,l){var u;return a("textarea").autosize(),a(".input").filter(function(){return null!=a(this).data("max")}).each(function(){return new s.CharacterCounter({el:a(":input",this),max:a(this).data("max")})}),a("textarea").each(function(){return a(this).data("placeholder",a(this).attr("placeholder"))}),u=function(){return function(){return a("textarea").attr("placeholder",""),a("textarea").each(function(){return 0===a(this).val().length?(a(this).attr("placeholder",a(this).data("placeholder")),!1):!0})}}(this),a("textarea").on("change keyup",u),u(),e(["lib/associations","models/new_tagging","models/program_global_response"],function(e){return function(s,u,p){var d;return a(".education").each(function(){var t;return a(this).closest(".founder").hasClass("template")?void 0:(t=new i.Collection(a(this).data("existing"),{model:u}),new s.NewTaggingField({el:a(".input",this),collection:t,container:a(".input .association_container",this),tag_type:"CollegeTag",new_taggable_field:"tags_colleges",new_taggable_type:"User",new_taggable_id:a(this).closest(".founder").data("user_id")}))}),c.get(p).bootstrap(l.data("responses")),new(d=function(i){function s(){return e.save=n(e.save,this),s.__super__.constructor.apply(this,arguments)}return t(s,i),s.prototype.initialize=function(){return this.$("textarea").on("change keyup",function(t){return function(){return t.trigger("change")}}(this))},s.prototype.isComplete=function(){return!a("textarea").is(function(){return 0===r.trim(a(this).val()).length})},s.prototype.save=function(){var t,e,n,i,s;return n=r.Deferred(),e=c.get(p),i=l.data("startup_id"),t=a(":input.response"),s=o.after(t.length,function(){return function(){return n.resolve()}}(this)),a(":input.response").each(function(){var t,o,l;return t={startup_id:i,user_id:a(this).data("user_id"),question:a(this).data("question")},o=e.findWhere(t),l=r.trim(a(this).val()),0===l.length?null!=o?o.destroy({success:s,error:n.reject()}):s():(o||(o=new p(t)),e.add(o),o.save({response:l},{success:s,error:n.reject()}))})},s}(i.View))({el:e})}}(this))},list:function(t){var e;return t("> .current > .program").each(function(){return t(".edit",this).on("click",function(e){return function(){return l["with"](t(l.selector("programs/incubator_program_form"),e),function(t){return t.toggle()}),!1}}(this))}),t("> .current .create").on("click",function(){return function(){return l["with"](t(l.selector("programs/incubator_program_form"),t("> .current > .create_container")),function(t){return t.toggle()})}}(this)),t("> .current > .program > .status .archive").on("click",function(){return t(this).closest(".archive_form").submit(),!1}),e={hideNew:function(){return function(){return t(".new-application").hide()}}(this),showNew:function(){return function(){return t(".new-application").show()}}(this)}},incubator_program_form:function(t,e){var n,i,o;return t(".submit").qtip(),i=!1,o=!1,n={show:function(){return function(){return l["with"](r(l.selector("programs/list")),function(t){return t.hideNew()}),e.show(),o=!0,i?void 0:(t("textarea").autosize(),i=!0)}}(this),hide:function(){return function(){return e.hide(),o=!1,l["with"](r(l.selector("programs/list")),function(t){return t.showNew()})}}(this)},t(".add_more_link").on("click",function(){return t(this).hide(),t(".additional_questions").slideDown()}),n.toggle=function(){return function(){return o?n.hide():n.show()}}(this),t(".cancel").on("click",function(){return function(){return n.hide()}}(this)),n}}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("controllers/program_applications",["require","jquery","backbone","underscore","lib/form","lib/mentions","lib/partials","lib/string","models/repository","models/vote","models/program_application","models/program_application_comment","google/analytics","mixpanel","qtip"],function(n,i,r,o,s,a,l,u,c,p,d,h,f,m){return{prompt:function(t,e){var n;return n=o.uniqueId("program_applications_prompt"),t(".action").attr("id",n),m.track_links(""+n,"accelerators: clicked apply from accelerator profile",e.data("mixpanel"))},inline:function(t,e){var n;return n=c.get(d).bootstrap({id:e.data("id"),comments_count:e.data("comments_count")}),n.trackCommentsFrom(e.data("user_id"),c.get(h).bootstrap(e.data("comment_ids"))),n.on("change:comments_count",function(){return function(e,n){return t(".comments_count").text(n+" Comment"+(1===n?"":"s"))}}(this))},investment_program_review_header:function(t,e){var n,r;if(e.data("program_application")){if(r=c.get(d).bootstrap(e.data("program_application")),n=e.closest(l.selector("layouts/processing")),1!==n.length)throw new Error("Cannot understand DOM");return function(){return function(){return t(".status").show(),r.on("change:status",function(){return t(".status_form input").prop("checked",!1),t(".status_form input").filter(function(){return t(this).val()===r.get("status")}).prop("checked",!0),t(".status_form").buttonset("refresh")}),t(".status_form").buttonset().on("change",function(){var e;return e=r.get("status"),r.set({status:t(this).find("input:checked").val()}),t(".js-statusError").text(""),t(this).ajaxSubmit(s.loadingOptions(t(this),{dataType:"json",success:function(t){return r.set(t),r.trigger("sync")},error:function(n){var o,s,a,l,u;s=i.parseJSON(n.responseText),o=[],l=s.errors;for(a in l)u=l[a],o=o.concat(u);return t(".js-statusError").text(o.length>0?o.join(", "):"Unknown error"),r.set("status",e)}}))})}}(this)(),function(){return function(){return l["with"](n,function(e){return t("> .main_container > .controls .back").on("click",function(){return function(){return e.hideDetails()}}(this))})}}(this)(),function(n){return function(){var o;return o=function(){return i.contains(document.documentElement,n)?r.fetch({url:e.data("review_url")}):c.get(p).off("sync",o)},c.get(p).on("sync",o),l["with"](t(".controls "+l.selector("program_applications/vote_controls")),function(e){return e.on("toggle",function(){return t("> .main_container > .votes").slideToggle("fast")})})}}(this)(),function(n){return function(){return null!=e.data("comment")&&c.get(h).bootstrap(e.data("comment")),l["with"](t(".controls "+l.selector("program_applications/vote_controls")),function(t){var o;return o=function(){var s,a;return i.contains(document.documentElement,n)?(s=c.get(h).where({program_application_id:r.id}),a=c.get(p).where({user_id:e.data("user_id"),votable_id:r.id,votable_type:"ProgramApplication",amount:-1}),t.toggleDownvotable(s.length>0||a.length>0)):c.get(h).off("add remove",o)},c.get(h).on("add remove",o),o()}),l["with"](t(".controls "+l.selector("program_applications/comment_controls")),function(e){return e.on("toggle",function(){return t("> .main_container > .comments").slideToggle("fast"),t("> .comments").is(":visible")?t("> .main_container > .comments textarea").focus():void 0}),e.toggle()})}}(this)(),t(l.selector("fundraising_campaigns/carry_info_warning")).remove()}},sharing_program_review_header:function(t,e){var i,r;if(r=c.get(d).bootstrap(e.data("program_application")),i=e.closest(l.selector("layouts/processing")),1!==i.length)throw new Error("Cannot understand DOM");return function(){return function(){return t(".status").show(),t(".status_form").buttonset().on("change",function(){return r.set({status:t(this).find("input:checked").val()}),t(this).ajaxSubmit(s.loadingOptions(t(this),{dataType:"json",success:function(t){return r.set(t),r.trigger("sync")}}))})}}(this)(),function(){return function(){return l["with"](i,function(e){return t("> .controls .back").on("click",function(){return function(){return e.hideDetails()}}(this))})}}(this)(),function(){return function(){return l["with"](t("> .controls "+l.selector("program_applications/vote_controls")),function(e){return e.on("toggle",function(){return t("> .votes").slideToggle("fast")})})}}(this)(),function(){return function(){return l["with"](t("> .controls "+l.selector("program_applications/comment_controls")),function(e){return e.on("toggle",function(){return t("> .comments").slideToggle("fast"),t("> .comments").is(":visible")?t("> .comments textarea").focus():void 0})}),n(["moment","jquery.livestamp"],function(e){return t("> .comments .comment").each(function(){return t(this).find(".timestamp").livestamp(new e(t(this).find(".timestamp").data("timestamp")))}),t("> .comments .add_comment form").ajaxForm(s.loadingOptions(t("> .comments .add_comment form"),{dataType:"json",success:function(n){var i;return r.set("comments_count",r.get("comments_count")+1),i=t("> .comments .template").clone(),i.removeClass("template"),i.find(".value").text(n.comment),i.find(".timestamp").livestamp(new e(n.created_at)),i.insertAfter(t("> .comments .template")),t("> .comments .add_comment textarea").val("")}}))})}}(this)()},comment_controls:function(n,o){var s,a,l;return l=c.get(d).bootstrap(o.data("program_application")),a=function(t){return function(){return n(".count").text(l.get("comments_count")),i.contains(document.documentElement,t)?void 0:l.off("change:comments_count",a)}}(this),l.on("change:comments_count",a),new(s=function(n){function i(){return this.toggle=t(this.toggle,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.events={click:"toggle"},i.prototype.toggle=function(){return this.trigger("toggle")},i}(r.View))({el:this})},comments:function(i,r){var l,p,f,g,_,v,y,b,w,x;for(y=r.data("program_application_id"),w=r.data("user_id"),f=c.get(h),v=c.get(d).bootstrap(y),x=[w],i("> .comment.existing:not(.template)").each(function(){return f.bootstrap({id:i(this).data("id"),user_id:i(this).data("user_id"),program_application_id:y}),i(".delete",this).length>0?x.push(i(this).data("user_id")):void 0}),b=o.uniq(x),g=0,_=b.length;_>g;g++)w=b[g],v.trackCommentsFrom(w,f.where({user_id:w,program_application_id:y}));return i(".empty_image").qtip(),n(["jquery.livestamp"],function(){return function(){return i(".date").each(function(){return i(this).livestamp(i(this).data("date"))})}}(this)),r.on("click",".delete",function(){var t,e;return null!=m&&m.track("processing: deleted a comment"),e=i(this).closest(".comment").data("id"),t=f.get(e),t.destroy()}),f.on("remove",function(){return function(t){return i(".comment").filter(function(){return i(this).data("id")===t.id}).fadeOut()}}(this)),p=new h,l=function(r){function o(){return this.initialize=t(this.initialize,this),o.__super__.constructor.apply(this,arguments)}return e(o,r),o.prototype.initialize=function(){var t;return t=new a.Autocomplete({el:i(".comment_mentions"),target:i(".comment_hidden")}),this.on("sync",function(e){return function(){var r,o;return o=e.model,f.push(o.clone()),r=i(".template").clone(),r=r.insertAfter(i(".template")).removeClass("template").data("id",o.id),new a.UpdatingField({model:o.clone(),field:"comment",el:r.find(".value")}),r.find(".value").html(u.link_and_format(o.get("comment"))),n(["jquery.livestamp"],function(){return r.find(".date").livestamp()}),i(".comment_hidden").val(""),t.render(),o.clear(),null!=m?m.track("processing: added a comment"):void 0}}(this))},o}(s.StandardForm),new l({el:i("form"),model:p}),{focus:function(){return i("textarea").focus()}}},vote_controls:function(n,s){var a,l,u,h,f,g,_,v,y,b,w,x,k,C,$;$=c.get(p),y=c.get(d).bootstrap(s.data("program_application")),x=null,null!=s.data("vote")&&(x=$.bootstrap(s.data("vote"))),y.trackVotesFrom(s.data("user_id"),x),C={votable_id:y.id,votable_type:"ProgramApplication",user_id:s.data("user_id")},l={yes:1,no:-1},u=function(){return function(t,e){return n("."+t).on("click",function(){var t;return n(this).hasClass("disabled")?void 0:(t=n(this).hasClass("selected")?0:e,x=$.findWhere(C),null==x&&(x=new p(C),$.add(x)),x.save({amount:t}),null!=m?m.track("processing: voted "+t):void 0)})}}(this);for(g in l)w=l[g],u(g,w);for(k=function(t){return function(){var e;return n("> .choice").removeClass("selected"),x=$.findWhere(C),null!=x&&(e=o.invert(l)[x.get("amount")],null!=e&&n("> ."+e).addClass("selected")),i.contains(document.documentElement,t)?void 0:$.off("change:amount",k)}}(this),$.on("change:amount",k),b=["positive","negative"],h=function(t){return function(e){var r;return r=function(){return n(".votes").toggleClass(e,y.get(e+"_votes_count")>0),n(".votes ."+e+" .vote_count").text(y.get(e+"_votes_count")),i.contains(document.documentElement,t)?void 0:y.off("change:"+e+"_votes_count",r)},y.on("change:"+e+"_votes_count",r)}}(this),f=0,_=b.length;_>f;f++)v=b[f],h(v);return new(a=function(i){function r(){return this._votes_clicked=t(this._votes_clicked,this),r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.toggleDownvotable=function(t){return n(".no").toggleClass("disabled",!t),this._downvotableQtip||(this._downvotableQtip=n(".no").qtip({content:"Companies must have at least one comment before they can be downvoted",show:{delay:500}})),this._downvotableQtip.qtip("api").disable(t)},r.prototype.events={"click .votes":"_votes_clicked"},r.prototype._votes_clicked=function(){return this.trigger("toggle")},r}(r.View))({el:this})},votes:function(t,e){var n,r,o;return r=t(".js-template").clone().removeClass("u-hidden"),t(".js-template").remove(),t(".empty_image").qtip(),o=c.get(p),null!=e.data("vote")&&o.bootstrap(e.data("vote")),n=function(s){return function(){var a,l,u,c;return t(".js-template").remove(),a=o.where({votable_type:"ProgramApplication",votable_id:e.data("program_application_id"),user_id:e.data("user_id")}),a.length>0&&(c=a[0],c.get("amount")>0?r.clone().prependTo(t(".js-positive .js-votesContainer")):c.get("amount")<0&&r.clone().prependTo(t(".js-negative .js-votesContainer"))),u=t(".js-positive .js-user").length,l=t(".js-negative .js-user").length,u+l===0?(t(".js-none").show(),t(".js-positive, .js-negative").hide()):(t(".js-none").hide(),t(".js-positive, .js-negative").show()),i.contains(document.documentElement,s)?void 0:o.off("add change:amount remove",n)}}(this),o.on("add change:amount remove",n),n()},incubator_program_review_header:function(t,n){var r,a;if(a=c.get(d).bootstrap(n.data("program_application")),r=n.closest(l.selector("layouts/processing")),1!==r.length)throw new Error("Cannot understand DOM");return l["with"](r,function(){return t("> .back").on("click",r.hideDetails)}),t("> .controls > .archive").each(function(){var e,r,o,s;return s=c.get(p),null!=(null!=(r=n.data("vote"))?r.id:void 0)&&s.bootstrap(n.data("vote")),o={user_id:n.data("user_id"),votable_id:a.id,votable_type:"ProgramApplication"},t(this).on("click",function(){var t;return t=s.findWhere(o)||new p(o),s.add(t),t.save({archived:t.get("archived")?!1:!0})}),e=function(n){return function(){var r;return r=s.findWhere(o),null!=r&&(r.get("archived")?t(n).find(".icon").addClass("selected"):t(n).find(".icon").removeClass("selected")),i.contains(document.documentElement,n)?void 0:s.off("change:archived",e)}}(this),s.on("change:archived",e)}),t("> .controls .status").each(function(){var n;return t(this).find(".help").qtip(),n=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),this.on("request",function(){return t("> .controls .status .icon").addClass("loading")}),this.on("sync error",function(){return t("> .controls .status .icon").removeClass("loading"),t("> .controls .status_text").blur()})},i}(s.StandardForm),new n({el:t(this).find("form"),model:a}),t(this).find("input").autocomplete({minLength:0,delay:0,source:function(t,e){var n;if(n=i(l.selector("program/incubator_programs/reviewing_filters")),1!==n.length)throw new Error("Cannot find reviewing filters partial");return l["with"](n,function(t){var n,i,r,s,a,l,u;for(u=[],a=o.sortBy(t.status_counts,function(t){return t[0]}),i=0,r=a.length;r>i;i++)l=a[i],s=l[0],n=l[1],u.push({value:s,label:null!=s&&s.length>0?s:"no status"});return e(u)})},select:function(e,n){return t(this).val(n.item.value),t(this).closest("form").submit()},open:function(){return i(".ui-autocomplete.ui-menu").width("auto")}}).on("focus",function(){return t("> .controls > .status").addClass("focused"),t(this).autocomplete("search",""),!0}).on("blur",function(){return t("> .controls > .status").removeClass("focused"),!0})}),function(){return function(){var e;return e=t(l.selector("program_applications/comments")),t("> .controls > .comments").on("click",function(){return t("> .comments").slideToggle("fast"),t("> .comments").is(":visible")?l["with"](e,function(t){return t.focus()}):void 0})}}(this)(),null!=m&&m.track("processing: viewed a program"),function(){return function(){return l["with"](r,function(e){return t("> .controls .back").on("click",function(){return function(){return e.hideDetails()}}(this))})}}(this)(),function(){return function(){return l["with"](t("> .controls "+l.selector("program_applications/vote_controls")),function(e){return e.on("toggle",function(){return t("> .votes").slideToggle("fast")})})}}(this)()},review:function(t){return t("> .company > .overview .mini .item").qtip(),t("> .company > .overview .content").qtip(),t("> .company > .team").each(function(){return t(".show_more",this).each(function(){return t(this).data("original_text",t(this).text())}),t(".show_more",this).on("click",function(){var e;return e=t(this).closest(".roles").find(".overflow"),e.toggle(),t(this).text(e.is(":visible")?"Show less":t(this).data("original_text"))})}),t("> .comments").each(function(){return t(".show_more",this).each(function(){return t(this).data("original_text",t(this).text())}),t(".show_more",this).on("click",function(){var e;return e=t(this).closest(".comments").find(".overflow"),e.toggle(),t(this).text(e.is(":visible")?"Show less":t(this).data("original_text"))})})},show:function(n,i){var o,s,a,u,d,h;if(null!=m&&m.track("processing: viewed a startup"),s=i.closest(l.selector("layouts/processing")),1!==s.length)throw new Errors("Cannot understand DOM");return function(){return function(){return l["with"](s,function(t){return n("> .submission > .controls .back").on("click",function(){return function(){return t.hideDetails()}}(this))})}}(this)(),n(".view_all_comments a").on("click",function(){return n(".excess").show(),n(".view_all_comments").hide(),null!=m?m.track("processing: viewed all comments"):void 0}),n(".vote").length>0?(h=n(".vote").data("vote"),(d=new p(h)).isNew()||(d=c.get(p).bootstrap(h)),c.get(p).add(d),a=n(".vote").data("initial_count"),u=d.get("amount")||0,new(o=function(n){function i(){return this.toggleVote=t(this.toggleVote,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.render=function(){var t;return this.model.get("amount")<=0?(this.$(".vote").find(".label").text("UPVOTE"),this.$(".vote").addClass("gray").removeClass("blue")):(this.$(".vote").find(".label").text("UPVOTED"),this.$(".vote").addClass("blue").removeClass("gray")),t=a-u+(this.model.get("amount")||0),this.$(".count .number").text(""+t),this.$(".count .label").text("vote"+(1===t?"":"s"))},i.prototype.initialize=function(){return this.render(),this.model.on("change",this.render,this)},i.prototype.events={"click .vote":"toggleVote"},i.prototype.toggleVote=function(){return null!=m&&m.track("public processing: voted on a startup",{amount:this.model.get("amount")}),this.model.save({amount:1===this.model.get("amount")?0:1})},i}(r.View))({model:d,el:n(".controls")})):n(".vote_disabled").qtip()}}})}.call(this),function(){define("lib/apply_button",["require","jquery","lib/autocomplete","backbone","underscore"],function(t,e,n,i,r){var o,s,a;return s=0,o="",a={submit_application:function(t,n){return s=n,o=t,e.facybox.close(),a.trigger("apply_started"),e.ajax({url:o,data:{startup_id:n},success:function(t){return t.trigger_event?e(t.trigger_on).trigger(t.trigger_event):(t.error_form&&e.facybox(t.error_form),t.startup_id=n,a.trigger("apply_finished",t))}})},resubmit_application:function(){return s>0?a.submit_application(o,s):void 0},setup_apply_button:function(t,n){var i,r,s;return o=t(".apply").data("ajax_url"),i=n.data("custom_notice_elt_selector"),s=function(){return t(".dropdown").hide(),t(".g-button.apply_link").css("visibility","hidden"),t(".g-button.loading-button").show()
},r=function(){return t(".g-button.loading-button").hide(),t(".g-button.apply_link").css("visibility","visible")},a.on("apply_started",s),a.on("apply_finished",function(n){return r(),n.has_errors?void 0:(t(".dropdown .startup[data-id="+n.startup_id+"]").remove(),i?(e(i).html(n.message),e(i).slideDown(200)):(t(".apply_notice .message_text").html(n.message),e.facybox.loading(),e.facybox.reveal(t(".apply_notice.modal"))))}),t(".apply_link").click(function(t){return t.stopPropagation(),n.find(".dropdown").show()}),t(".dropdown .startup").click(function(t){var n;return e(this).data("create")?(window.location.href="/intro"+e(this).data("params"),s()):o&&e(this).data("id")?(n=e(this).data("id"),a.submit_application(o,n)):e(this).hasClass("unselectable")?t.stopImmediatePropagation():void 0}),e("body").click(function(){return n.find(".dropdown").hide()})}},r.extend(a,i.Events)})}.call(this),function(){define("lib/profile_tips",["jquery","lib/partials"],function(t,e){return{handle_click:function(n){var i,r,o,s,a,l;return n.stopPropagation(),l=t(this).attr("href"),l.indexOf("edit_profile")>=0?(t.facybox.close(),e["with"](t(e.selector("startups/show/header")),function(t){return t.edit()})):l.indexOf("#")>=0?(i=400,r=20,a=l.slice(l.indexOf("#")+1),s=t('div[data-tips_selector="'+a+'"]'),o=s.offset().top,o>=r&&(o-=r),t.facybox.close(),t("html, body").animate({scrollTop:o},i,"linear",function(){return s.find(".edit").click()})):(l.indexOf("/press")>0&&(l=l.slice(0,l.indexOf("/press"))+"/updates#press"),n.metaKey?open(l):window.location.href=l),!1}}})}.call(this),!function(t){"function"==typeof define&&define.amd?define("jquery.livestamp",["jquery","moment"],t):t(jQuery,moment)}(function(t,e){var n=1e3,i=!1,r=t([]),o=function(){l.resume()},s=function(n,i){var o=n.data("livestampdata");if("number"==typeof i&&(i*=1e3),n.removeAttr("data-livestamp").removeData("livestamp"),i=e(i),e.isMoment(i)&&!isNaN(+i)){var s=t.extend({},{original:n.contents()},o);s.moment=e(i),n.data("livestampdata",s).empty(),r.push(n[0])}},a=function(){i||(l.update(),setTimeout(a,n))},l={update:function(){t("[data-livestamp]").each(function(){var e=t(this);s(e,e.data("livestamp"))});var n=[];r.each(function(){var i=t(this),r=i.data("livestampdata");if(void 0===r)n.push(this);else if(e.isMoment(r.moment)){var o=i.html(),s=r.moment.fromNow();if(o!=s){var a=t.Event("change.livestamp");i.trigger(a,[o,s]),a.isDefaultPrevented()||i.html(s)}}}),r=r.not(n),delete r.prevObject},pause:function(){i=!0},resume:function(){i=!1,a()},interval:function(t){return void 0===t?n:void(n=t)}},u={add:function(n,i){return"number"==typeof i&&(i*=1e3),i=e(i),e.isMoment(i)&&!isNaN(+i)&&(n.each(function(){s(t(this),i)}),l.update()),n},destroy:function(e){return r=r.not(e),e.each(function(){var n=t(this),i=n.data("livestampdata");return void 0===i?e:void n.html(i.original?i.original:"").removeData("livestampdata")}),e},isLivestamp:function(t){return void 0!==t.data("livestampdata")}};t.livestamp=l,t(o),t.fn.livestamp=function(t,e){return u[t]||(e=t,t="add"),u[t](this,e)}}),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/shared",["load","jquery","underscore","lib/dropdown","lib/flash","lib/form","lib/environment","lib/apply_button","models/repository","models/follow","modernizr","mixpanel","google/analytics","lib/profile_tips","global/tiptip","qtip","jquery.autosize","jquery.livestamp"],function(e,n,i,r,o,s,a,l,u,c,p,d,h,f,m){return{comments:function(t){return t(".view_hidden_link a").click(function(){var e;return t(".hidden_comments").show(),e=n(this).parent().find(".private"),e.length>0?(n(this).hide(),e.find(".middot").hide()):n(this).parent().parent().hide()}),t(".view_all_link a").click(function(){return n(this).parent().parent().hide(),t(".collapsed_comments").show()})},comment_box:function(t){return t(".comment_box").first().hover(function(){return t(".show_on_hover").show()},function(){return t(".show_on_hover").hide()}),t(".unhide_comment_link").click(function(){var e;return e=n(this).data("id"),n(this).parent(".unhide").hide(),n.ajax({url:"/comments/unhide",type:"post",data:{id:e},success:function(e){var n,i;return e.html?(n=t(".comment_box").first().parents(".shared.comments"),i=n.find(".shared.comment_form textarea").val(),n.html(e.html),n.find(".shared.comment_form textarea").val(i)):void 0}})}),t(".delete_comment_link").click(function(){var e,i;return i=n(this).data("id"),e=t(".comment_box").first(),n(this).parent(".delete").hide(),n.ajax({url:"/comments/"+i+".js",type:"post",data:{_method:"delete"},success:function(i,r){var o,s;return"success"===r?(e.remove(),o=t(".comments span.count"),s=parseInt(n(o[0]).text()),o.each(function(){return n(this).text(s(-1))}),n(document).trigger("comment.destroy")):void 0}})})},comment_form:function(t){return t(".new_box").ready(function(){var e,i,r,o,s;return e=t(".new_box"),s=e.data("user_id"),i=e.data("comment_data_id"),r=e.data("comment_holder_id"),o=e.data("is_admin"),new MentionsAutocomplete(s,i,r,o),setTimeout(function(){return t("textarea").focus(function(){var e;return n(this).removeClass("placeholder"),n(this).parents("form").addClass("after_click"),e=t(".new_box"),e.find(".follow-pic.not_anonymous.hidden").fadeIn(),e.find(".action_line").fadeIn(),e.find(".visibility_info").fadeIn()})},50)}),t(".new_box form").submit(function(){var e,i;return e=t(".new_box"),e.find("input[type='submit']").attr("disabled",null),i=e.data("comment_data_id"),""!==e.find("textarea").val()&&(n(this).find("input[type='submit']").hide(),n.ajax({url:"/comments.js",type:"post",data:e.find("form input, form textarea[data-id='"+i+"_form']").serialize(),success:function(i){var r,o,s;return t(".new_box_marker").before(n(i.html)),r=t(".comments span.count"),o=parseInt(n(r[0]).text()),r.each(function(){return n(this).text(o+1)}),n(document).trigger("comment.create"),e.find("textarea").val("").css("height","").addClass("placeholder"),e.find(".follow-pic.hidden, .action_line, .visibility_info").hide(),e.find("form").removeClass("after_click"),e.find("input[type='submit']").show(),s=e.find(".mentions_input_holder").attr("data-id"),s?n("[data-id='"+s.replace("mentions_","")+"']").focusout():void 0},error:function(){return t(".comment_notifications").html("Sorry, there was an error. Please try again later.").slideDown("fast",function(){return setTimeout(function(){return t(".comment_notifications").slideUp("fast")},5e3)})}})),!1})},comments_compact:function(t,e){return t("textarea").autosize().focus(function(){return t(".submit").show()}),e.on("click",".reply",function(){var e;return e=n(this).parents(".comment").data("author_slug"),t("textarea").focus(),t("textarea").val().length>0||t("textarea").val("@"+e),!1})},more_pagination:function(t,e){var n,i,r,o,s,a;return o=e.data("page"),s=e.data("per_page"),a=e.data("url"),i=e.data("object_id"),r=e.data("options"),n=e.data("loading_method"),e.remove(),setTimeout(function(){return new Pagination({page:o,per_page:s,url:a,object_id:i,options:r,loading_method:n})},50)},apply_button:function(t,e){return l.setup_apply_button(t,e),t(".apply_link").click(function(){return d.track("IO activation: clicked "+t(".apply_link").text())})},upload_button:function(t){return t(".g-button").click(function(){return t(".g-button").fadeOut(function(){return t(".file_input").fadeIn()})})},startup_follow_button:function(t,e){var s,a,l,h,f,m,g,_,v,y,b,w,x,k;return w=function(){return r.hideAll(),t(".dropdown").fadeIn(100)},_=function(){return t(".dropdown").hide()},b=function(){var t;return t=e.data("startup_id"),n.ajax({url:"/follows/startup_follow_button",data:{startup_id:t},dataType:"json",success:function(t){return e.replaceWith(t.html)}})},t(".dropdown").css("top",t(".main_button").outerHeight()+7+"px"),v=function(){return p.touch},l=function(){return v()?void 0:e.hover(function(){return setTimeout(function(){return w()},100)},function(){return _()})},r.on("hide",_),t(".main_button").hasClass("following")&&l(),m=function(){return o("An error occured while saving the data, please try to reload the page.")},g=u.get(c),a={follower_id:e.data("user_id"),followed_type:"Startup",followed_id:e.data("startup_id")},e.data("follow_token")&&g.bootstrap(i.extend({token:e.data("follow_token")},a)),h=function(){var i;return t(".main_button").hasClass("disabled")?void 0:(t(".main_button").hide(),t(".loader").show(),t(".unfollow_link").addClass("disabled"),_(),d.track("user: followed a startup"),i=g.findWhere(a)||new c(a),g.add(i),n.ajax({url:"/follows.js",data:{followed_token:e.data("token"),followed_type:"Startup"},type:"post",dataType:"json",success:function(n){return n.success?(i.set("token",n.follow_token),t(".unfollow_link").removeClass("disabled"),e.data("follow_token",n.follow_token)):(g.remove(i),m())},error:function(){return g.remove(i),m()}}),setTimeout(function(){return t(".main_button").show(),t(".loader").hide(),t(".main_button").addClass("following"),t(".main_button").text("Following"),l(),w()},400))},f=function(){return t(".unfollow_link").hasClass("disabled")?void 0:(t(".main_button").removeClass("following"),t(".main_button").text("Follow"),e.unbind(),_(),t(".main_button").addClass("disabled"),n.ajax({url:"/follows/"+e.data("follow_token")+".js",data:{_method:"delete"},type:"post",dataType:"json",success:function(e){return e.success?(g.remove(g.findWhere(a)),t(".main_button").removeClass("disabled")):m()},error:function(){return m()}}))},t(".main_button").click(function(){return t(".main_button").hasClass("following")?v()&&t(".dropdown").is(":visible")?_():w():h()}),t(".unfollow_link").click(function(){return f()}),t(".investing_link").click(function(){var t,e,i;return e=n(this).data("redirect"),i=n(this).hasClass("selected"),t=n(this).data("popover_url"),n(this).data("checkout")?i?void 0:(n(".fundraising_campaigns.invest_button .invest_now").first().click(),_()):e?window.location.href=e:(n.facybox.settings.modal=!0,n(this).closest(".dropdown").hide(),n.facybox({ajax:t}))}),s=1===t(".jobs_link").data("allowed_to_mark_interest"),t(".jobs_link").click(function(){return s?n(this).hasClass("selected")?(y(n(this).data("startup_id"),0),n(this).removeClass("selected")):(y(n(this).data("startup_id"),1),n(this).addClass("selected")):window.location.href="/jobs?tab=profile&startup_id="+n(this).data("startup_id"),!1}),y=function(t,e){return n.ajax({url:"/job_pairings/",data:{job_pairing:{startup_id:t,user_interested:e}},type:"post"})},k=function(e,i){return n.ajax({url:"/interests/"+i,data:{startup_id:e},type:"post",success:function(){return t(".product_link").removeClass("disabled")},error:function(){return m()}})},t(".product_link").click(function(){var e,i;return e=n(this).hasClass("selected"),i=n(this).data("startup_id"),t(".product_link").addClass("disabled"),e?(n(this).removeClass("selected"),k(i,"destroy_product_purchase")):(n(this).addClass("selected"),k(i,"create_product_purchase"))}),x=function(e,i){return n.ajax({url:"/interests/"+i,data:{startup_id:e},type:"post",success:function(){return t(".article_link").removeClass("disabled")},error:function(){return m()}})},t(".article_link").click(function(){var e,i;return e=n(this).hasClass("selected"),i=n(this).data("startup_id"),t(".article_link").addClass("disabled"),e?(n(this).removeClass("selected"),x(i,"destroy_article")):(n(this).addClass("selected"),x(i,"create_article"))}),{reload:b}},ioi_profile_bar:function(t,e){var i,r,o,s;return o=e.data("profile_id"),s=e.data("profile_type"),i=e.data("invest_online"),r="ioi_profile_bar "+s,t(".holder").length>0&&null!=d&&d.track(r+" show"),t(".holder").length>0&&e.slideDown(200),n("a.action_link").click(function(){return e.slideUp(400),null!=d&&d.track(r+" click"),!1}),n("a.dismiss").click(function(){return null!=d&&d.track(r+" dismiss"),e.slideUp(400),n.ajax({url:"/people/hide_ioi_profile_bar",data:{profile_id:o,profile_type:s},type:"post"})}),e.data("loaded")||i?void 0:n.ajax({url:"/people/load_ioi_profile_bar",data:{profile_type:s,profile_id:o},success:function(t){return t.html?(e.empty(),e.replaceWith(t.html)):void 0}})},follow_user_button:function(n,r){return e(["lib/follows","models/follow"],function(){return function(e,s){var a,l,c,p;return c=function(){return o("An error occured while saving the data, please try to reload the page.")},l={followed_type:"User",followed_token:r.data("token"),follower_id:r.data("follower_id")},r.data("follow_token")&&u.get(s).bootstrap(i.extend({token:r.data("follow_token")},l)),p=r.data("extra_params")||{},new(a=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.renderCreated=function(){return this.$el.addClass("following").addClass("inverse").removeClass("not_following").text("Following")},n.prototype.renderDestroyed=function(){return this.$el.addClass("not_following").removeClass("inverse").removeClass("following").text("Follow")},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.listenTo(this,"request",function(t){return function(e,n){return t.$el.addClass("disabled"),n.always(function(){return t.$el.removeClass("disabled")}),n.done(function(t){return t.success?void 0:c()}),n.error(c)}}(this))},n.prototype._destroyModel=function(t){return t.destroy({parameters:p})},n.prototype._saveModel=function(t){return t.save(null,{parameters:p})},n}(e.FollowToggleView))({el:n(".main_button"),attributes:l})}}(this))},email_preview:function(t){return t("a.cancel").click(function(){return n.facybox.close()}),t(".actions a").attr("href","javascript:(void);"),t("a").each(function(){var t;return t=n(this).attr("href"),n(this).attr("href",t.split("?")[0]),n(this).attr("target","_blank")})},render_likes:function(t,e){return t(".tiptip").qtip({show:{delay:0},defaultPosition:"top"}),t(".toggle_like").each(function(){var i;return i=t(this).data("likes"),t(this).one("click",function(){return e.text("..."),n.post(e.data("url"),{type:e.data("likable_type"),id:e.data("likable_id"),action_type:i?"destroy":"create",display:e.data("display")},function(){return function(t){return e.replaceWith(t.html)}}(this),"json")})})},updating_timestamp:function(t,e){return e.livestamp(e.data("timestamp"))},startup_autocomplete:function(e,i){var r;return new(r=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(){return require(["lib/transitional_autocomplete"],function(t){return function(e){var n;return n=new e.TypedAutocomplete({types:["Startup"],canSelectUnmatchedQuery:!1,el:t.$(".startup_name")}),n.on("select",function(e){return t.$(".startup_id").val(e.id),t.$(".startup_name").val(e.name),t.setIcon(e.pic)})}}(this))},i.prototype.setError=function(t){return s.setInputError(this.$(".startup_name"),t)},i.prototype.clearError=function(){return s.clearInputError(this.$(".startup_name"))},i.prototype.clearSelection=function(){return this.$(".startup_name").val(""),this.$(".startup_id").val(""),this.showDefaultIcon()},i.prototype.hasSelection=function(){var t;return t=this.$(".startup_id").val(),(null!=t?t.length:void 0)>0},i.prototype.hideDefaultIcon=function(){return this.$("i.prefix").hide()},i.prototype.showDefaultIcon=function(){return this.$("i.prefix").show(),this.$(".startup_name").css("background-image","")},i.prototype.setIcon=function(t){return this.$(".startup_name").css("background-image","url("+t+")"),this.hideDefaultIcon()},i.prototype.events=function(){return{"change .startup_name":function(t){return""===n(t.target).val()?this.clearSelection():void 0}}},i}(Backbone.View))({el:i})},profile_tips:function(t,e){return m.init(),"Startup"===e.data("profile_owner")?t("a").click(f.handle_click):void 0}}})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty,n=function(t,e){return function(){return t.apply(e,arguments)}};define("controllers/startup_roles",["underscore","jquery","require","backbone","models/repository","models/review","models/startup_role","lib/autocomplete","lib/associations","lib/form","lib/partials","lib/transitional_autocomplete","qtip","google/analytics","mixpanel","lib/profile"],function(e,i,r,o,s,a,l,u,c,p,d,h,f,m,g,_){var v;return v=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(t){return this.collection.on("add remove change:past",this.render,this),this._active_klass=t.active_klass,window.location.hash?this.$el.find("li").removeClass(this._active_klass):void 0},n.prototype.events={"click li a":"switch"},n.prototype["switch"]=function(t){var e;return e=i(t.target).closest("li"),e.hasClass("hidden")?void 0:(e.parent("ul").children("li").removeClass(this._active_klass),e.addClass(this._active_klass),this.collection.trigger("show",e.data()))},n.prototype.render=function(){return this.$el.find("li.update").each(function(t){return function(e,n){var r;return r=t.collection.where(i(n).data()).length,r>0?i(n).removeClass("hidden").find(".live_count").html(r):i(n).addClass("hidden").find(".live_count").html("")}}(this))},n}(o.View),{metadata_form:function(e,n){var r;return new(r=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.initialize=function(){return this.$("textarea").length>0?(new p.CharacterCounter({el:this.$("textarea"),max:500}),this.$("textarea").autosize()):void 0},r.prototype.events={"change .js-current-checkbox":"renderDates","click .js-remove-subrole":"remove"},r.prototype.renderDates=function(t){return this.$("span.ended_at").toggle(!i(t.target).is(":checked"))},r.prototype.save=function(){var t;return t=this.$el,this.$(".role-form").ajaxSubmit({success:function(e){return t.trigger("metadataSaved",e)},error:function(e){return t.trigger("metadataError",e)}})},r.prototype.remove=function(t){var n,r;return t.preventDefault(),r=this.$el.data("metadata-id"),n=this.$el,r?i.ajax({url:"/startup_role_metadatas/"+r,type:"post",data:{_method:"delete"},success:function(t){var e;return e=n.parents(d.selector("startup_roles/experience")),n.remove(),d["with"](e,function(e){var n,r;return r=e.$el.find(".show"),n=i(t.html).find(".show").html(),r.html(n)})},error:function(t){return e(".meta-errors").text(JSON.parse(t.responseText).errors[0])}}):n.remove()},r}(o.View))({el:n})},experience:function(r,u){var c,p;return c=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,n),o.prototype.initialize=function(){return this.listenTo(this,"edit",function(t){return function(e,n){return n.done(function(){return t.render()})}}(this)),this.exitForm=this.$(d.selector("startup_roles/exit_form")).first()},o.prototype.events={"change .review > input":"toggleReview","click .js-add-subrole":"showMetadataForm"},o.prototype.toggleReview=function(t){var e,n;return e=i(t.currentTarget).closest(".review"),n=s.get(a).bootstrap(e.data("review_id")),n.save({hidden:!i(t.currentTarget).is(":checked")},{url:e.data("href")})},o.prototype.showMetadataForm=function(){var t;return this.$(".metadata-form-template").find(".character_counter_template").remove(),t=this.$(".metadata-form-template .partial").clone(),this.$(".forms").append(t)},o.prototype.save=function(){var t;return(null!=(t=this.exitForm)?t.length:void 0)>0?d["with"](this.exitForm,function(t){return function(e){return t._queuedSave([e.save()])}}(this)):this._queuedSave([])},o.prototype.error=function(t){return o.__super__.error.apply(this,arguments),this.$(".errors").html(""),e.each(t,function(t){return function(e){return t.$(".errors").append(i("<div>",{html:e}))}}(this)),this.$(".errors").show()},o.prototype._queuedSave=function(t){var e,n,o,s;return n=i.Deferred(),t=[n].concat(t),e=this.$(".forms").find(d.selector("startup_roles/metadata_form")),s=e.length,s||n.resolve(),e.each(function(){return d["with"](i(this),function(t){return t.$el.on("metadataSaved",function(t,e){return(s-=1)?void 0:n.resolve(e)}),t.$el.on("metadataError",function(t,e){return r(".save").removeClass("loading"),n.reject(JSON.parse(e.responseText).errors)}),t.save()})}),o=i.when.apply(i,t),o.done(function(t){return function(e){return t.$(".error").hide(),(null!=e?e.html:void 0)&&(t.$(".show").replaceWith(i(e.html).find(".show")),t.$(".js-edit-section").replaceWith(i(e.html).find(".js-edit-section"))),d["with"](t.exitForm,function(t){return t.hide()})}}(this)),o.fail(function(t){return function(e,n){var i;return i=[e],n&&(i=i.concat(n)),t.error(i)}}(this)),o},o}(_.EditableRegion),new(p=function(e){function i(){return this.hideControls=n(this.hideControls,this),this.showControls=n(this.showControls,this),i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(){return this.$(".tip").qtip(),this.model=this.collection.bootstrap(this.$el.data("token")),this.editView=new c({el:this.$(".text"),model:this.model}),this.controlView=new _.EditableRegionControls({hideEditParent:!0,el:this.$(".actions"),editableRegion:this.editView}),this.listenTo(this.editView,"edit",function(t){return function(){return t.$el.addClass("editing")}}(this)),this.listenTo(this.editView,"show",function(t){return function(){return t.$el.removeClass("editing")}}(this)),d["with"](d.selector("startup_roles/portfolio"),function(t){return function(e){return e.on("show",t.hideControls),e.on("edit",t.showControls),e.on("reorderBegin",function(){return t.$el.addClass("reorder")}),e.on("reorderEnd",function(){return t.$el.removeClass("reorder")}),e.linkActive&&t.showControls(),t.on("confirmed destroyed",e.removeConfirmCTA)}}(this))},i.prototype.events={"click .delete":"destroy","click .confirm":"confirm","click .feature":"feature"},i.prototype.showControls=function(){return this.$el.show().removeClass("hide_edit").find(".exit").hide(),this.$el.find(".control").is(":visible")?this.$el.find(".edit_controls").hide():void 0},i.prototype.hideControls=function(){return this.collection.any(function(t){return t.get("featured")})&&(this.$el.toggleClass("feature",this.model.get("featured")),this.$el.hasClass("feature")||this.$el.hide()),this.$el.addClass("hide_edit").find(".exit").show(),this.editView.show()},i.prototype.confirm=function(){return this.model.confirm(),this.$(".confirm_controls").fadeOut("slow",function(t){return function(){return t.$el.removeClass("awaiting_confirmation"),t.trigger("confirmed")}}(this))},i.prototype.feature=function(){return this.$("a.feature").toggleClass("on").find("img").toggleClass("hidden"),this.model.save({featured:this.$("a.feature").hasClass("on")},{patch:!0})},i.prototype.replace=function(t){return this.$(".show").replaceWith(t)},i.prototype.destroy=function(){return confirm("Are you sure you want to remove this experience from your profile?")?(this.model.destroy(),this.$el.fadeOut("fast",function(t){return function(){return t.removeAll()}}(this))):void 0},i.prototype.removeAll=function(){return this.remove(),this.editView.remove(),this.controlView.remove(),this.trigger("destroyed")},i}(o.View))({el:u,collection:s.get(l)})},exit_form:function(n,r){var s;return new(s=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.hide=function(){return this.$el.hide()},r.prototype.save=function(){var t;return t=i.Deferred(),this.$(".exited input").is(":checked")?this.$("form").ajaxSubmit({success:function(n){return function(i){return i.errors?t.reject(e.values(i.errors)):(t.resolve(),null!=g?g.track("user profile experience: investor reported exit",{exit_type:n.$(".exit_type").val(),startup_id:n.$(".startup_id").val()}):void 0)}}(this),error:function(){return function(n){return t.reject(e.values(n.responseJSON))}}(this)}):t.resolve(),t.promise()},r.prototype.events={"change .how select":function(t){var e;return e=i(t.target),"Acquired"===e.val()?this.$(".acquirer").css("display","inline-block"):this.$(".acquirer").is(":visible")?this.$(".acquirer").fadeOut("fast"):void 0},"change .exited input":function(t){var e;return e=i(t.target),e.is(":checked")?this.$(".exit_form").slideDown("fast"):this.$(".exit_form").slideUp("fast")}},r}(o.View))({el:r})},startup_profile_group:function(n,a){var u,c,f;return c=[],n("> ul.roles > li.role").each(function(){return c.push(n(this).data("token"))}),f=function(){return d["with"](n(this).find(d.selector("startup_roles/startup_profile")),function(t){return function(e){return e.on("remove",function(){return n(t).remove()})}}(this))},n(".add_role_amount :input").qtip({defaultPosition:"right",activation:"focus",maxWidth:"250px"}),n("> ul.roles > li.role").each(f),n("> .view_all").on("click",e.once(function(){return n(this).addClass("loading"),i.get(n(this).attr("href"),{},function(t){return function(r){return e.each(r["startup_roles/startup_profile"],function(t){var r;return e.contains(c,t.token)?void 0:(c.push(t.token),r=i('<li class="role"></li>'),r.html(t.html),r.appendTo(n("> ul.roles")))}),n(t).fadeOut("fast",function(){return n(t).remove()}),n("> ul.roles > li.role").each(f)}}(this),"json"),!1})),r(["views/startup_roles/startup_profile"],function(){return function(t){return s.get(l).on("add",function(r){var o,s;return o=r.get("past?")?"past_":"",o+r.get("role")!==a.data("role")||r.get("startup_id")!==a.data("startup_id")||e.contains(c,r.get("token"))?void 0:(c.push(r.get("token")),s=new t({model:r,size:a.data("size")}),i('<li class="role"></li>').append(s.$el).appendTo(n("> ul.roles")).each(f))})}}(this)),new(u=function(r){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,r),o.prototype.initialize=function(){var t,e,i;return t=this.$el.find(".add_role_form"),e=new h.TypedAutocomplete({types:(null!=(i=t.data("model"))?i.split(" "):void 0)||["User","Startup"],el:n(".add_role_autocomplete"),canSelectUnmatchedQuery:!0}),e.on("select",function(e){return function(n){return e.clear_tagged(),n.unmatched?(t.find(".invited_name").val(n.query),t.addClass("must_confirm"),t.find(".invited_email").focus()):(t.find(".invited_name").val(n.name),t.find(".tagged_id").val(n.id),t.find(".tagged_type").val(n.model),e.fill_card(n),e.ask_for_email())}}(this)),"current_investor"===t.data("role")&&t.find(".add_role_amount").show(),t.data("open_form_immediately")?this.open():void 0},o.prototype.ask_for_email=function(){var t,e;return t=this.$el.find(".add_role_form"),e=t.find(".add_role_buttons"),e.find(".buttons").hide(),e.find(".loader").show(),i.ajax({url:"/startup_roles/ask_for_email",data:t.serialize(),type:"post",success:function(n){return function(i){return e.find(".buttons").show(),e.find(".loader").hide(),i.require_email?(t.addClass("can_confirm"),t.find(".invited_email").focus()):n.$(".js-investment_amount_input").is(":visible")?void 0:t.trigger("submit")}}(this)})},o.prototype.fill_card=function(t){var e;return e=this.$el.find(".add_role_form"),t?(e.find(".invited_name").hide(),e.find(".card .photo img").attr("src",t.pic),e.find(".card .name").text(t.name),e.find(".card").fadeIn()):(e.find(".invited_name").show(),e.find(".card").hide())},o.prototype.clear_tagged=function(){return this.fill_card(),this.$el.find(".add_role_form").removeClass("must_confirm").removeClass("can_confirm"),this.$el.find(".invited_name, .tagged_id, .invited_email").val(null)},o.prototype.events={"submit .add_role_form":"submit","click .add_role_cancel":"close","click .add_role_begin a":"open_from_event","click .card .clear_link":"clear_tagged"},o.prototype.open_from_event=function(t){return t.preventDefault(),this.open()},o.prototype.open=function(){return this.$el.find(".add_role_begin").hide(),this.$el.find(".add_role_form").addClass("open").find(".invited_name").focus()},o.prototype.close=function(t){return this.clear_tagged(),t.preventDefault(),this.$el.find(".add_role_begin").show(),this.$el.find(".add_role_form").removeClass("success error open").find(".invited_name").empty()},o.prototype.submit=function(t){var r,o;return t.preventDefault(),r=this.$el.find(".add_role_form").removeClass("success error"),r.find(".invited_name").val()?r.find(".tagged_id").val()||r.hasClass("must_confirm")?r.ajaxSubmit(p.loadingOptions(r,{complete:function(t){return function(){return t.$el.find(".add_role_submit").attr("disabled",!1)}}(this),success:function(t){return function(e){return t.clear_tagged(),t.$el.find(".add_role_form").addClass("success").removeClass("error").find("invited_name").focus(),t.$el.find(".add_role_message").text("Successfully added "+e.role.name),s.get(l).add(e.role),n(".view_all").text("View more "+r.data("role-plural-displayed")),e.popover?i.facybox(e.popover):void 0}}(this),error:function(t){return function(e){var n;return n=JSON.parse(e.responseText),r.hasClass("must_confirm")||"Email can't be blank"!==n.error?(t.$el.find(".add_role_form").removeClass("success").addClass("error"),t.$el.find(".add_role_message").html(n.error)):(r.addClass("must_confirm"),r.find(".invited_email").focus())}}(this)})):(r.addClass("must_confirm"),r.find(".invited_email").focus(),r.data("model")&&(o=r.data("model"),e.isArray(o)&&(o=o[0]),r.find(".tagged_type").val(o)),void t.stopPropagation()):t.stopPropagation()},o}(o.View))({el:n(".add_role_block")})},startup_profile:function(t,e){var n;return n=i.Deferred(),r(["views/startup_roles/startup_profile"],function(t){return function(i){var r;return null==e.data("view")&&(r=s.get(l).bootstrap(e.data("startup_role")),e.data("view",new i({el:t,model:r}))),n.resolve(e.data("view"))}}(this)),n},portfolio:function(e,r){var a,u,p,d,h,f,_;return d=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.render=function(){},n.prototype.input=function(){return this.$("input[name=company_name]")},n.prototype._role=function(){return this.$el.find("select").val()},n.prototype.addAssociation=function(t){return t.set("source",r.data("source")),t.save(null,{success:function(t){return function(e,n){return n.role?(g.track("user: added a startup role",{company_name:n.role.startup_company_name,source:"user profile"}),e.html=n.html,e.set("company_name",n.role.startup_company_name),e.set("startup_slug_url",n.role.startup_slug_url),e.set("startup_id",n.role.startup_id),e.trigger("saved",e)):t.collection.trigger("failure",e,n.errors)}}(this)}),this.collection.add(t)},n}(c.StartupRoleField),f=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.collection.on("add",this.render,this),this.collection.on("remove",this.remove,this),this.collection.on("failure",this.fail,this),this.collection.on("saved",this.update,this),this.comma='<span class="comma">,</span> '},n.prototype.events=function(){return{"click .click_for_more":"click_more"}},n.prototype.click_more=function(t){return i(t.currentTarget).siblings(".more").show().end().remove()},n.prototype.company_name=function(t){return t.escape("company_name")||t.escape("startup_company_name")},n.prototype.render=function(t){var e,n;return"Startup"!==this.$el.data("tagged-type")||this.$el.data("tagged-id")!==t.get("startup_id")?(e=this.$el.find("div[data-role='"+t.get("role")+"']").removeClass("hidden").find(".body_tags"),n=!!(e.find("span").length>0),e.prepend("<span data-cid='"+t.cid+"'>"+this.company_name(t)+(n?this.comma:"")+"</span>\n")):void 0},n.prototype.remove=function(t){return this.$el.find("[data-role='"+t.get("role")+"'] [data-startup_id='"+t.get("startup_id")+"'] + span").remove(),this.$el.find("[data-role='"+t.get("role")+"'] [data-startup_id='"+t.get("startup_id")+"']").remove(),this.$el.find(".card[data-role='"+t.get("role")+"'][data-startup_id='"+t.get("startup_id")+"']").remove()},n.prototype.fail=function(t,e){return alert(e.tagged_id?"You've already added "+this.company_name(t)+", please double-check your Experience section. If you'd like to feature "+this.company_name(t)+", please click 'Edit' next to 'Experience'.":"There was an error saving "+this.company_name(t)+" to your profile. If the error persists, please contact us at bugs@angel.co."),this.$el.find("[data-cid='"+t.cid+"']").remove()
},n.prototype.update=function(t){var e,n;return e=this.$el.find("[data-cid='"+t.cid+"']"),e.attr("data-startup_id",t.get("startup_id")),n=!!(e.closest(".body_tags").find("span").length>1),e.html("<a class='tag' href='"+t.get("startup_slug_url")+"'>"+this.company_name(t)+(n?this.comma:"")+"</a>")},n}(o.View),_=s.get(l),_.bootstrap(r.data("roles")),u=e(".quick_add"),new d({el:u,tagged_type:u.data("tagged_type"),tagged_id:u.data("tagged_id"),collection:_,container:!1}),new f({el:r,collection:_}),a=e(".quick_add").data("checkout_url"),p=e(".quick_add").data("username"),e(".notification.build").click(function(){return window.location=a+"?utm_campaign=checkout_promotion&utm_medium=banner&utm_source=profile_portfolio_banner&utm_content=background&utm_term="+p}),e(".notification.build .action a.cta").click(function(t){return t.stopPropagation()}),e(".notification.build .hide_link").click(function(t){return e(".notification.build").slideUp(200),i.ajax({url:"/people/hide_checkout_promo",type:"post"}),m.push(["_trackEvent","hide controls","hid checkout promo on profile",p]),t.stopPropagation()}),"experience"===r.data("source")?new(h=function(e){function o(){return this.removeConfirmCTA=n(this.removeConfirmCTA,this),o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.initialize=function(){return this.collection.on("add",this.render,this),this.collection.on("failure",this.removeLoader,this)},o.prototype.removeConfirmCTA=function(){return 0===this.$(".awaiting_confirmation").length?this.$(".confirm_cta").remove():void 0},o.prototype.removeLoader=function(){var t;return null!=(t=this.loading_row)?t.remove():void 0},o.prototype.ensureFullyLoaded=function(t,e){return this.$el.data("load-on-edit")?(this.$el.data("load-on-edit",null),t.html(AL.loadingImage()),i.getJSON(this.$el.data("load-on-edit-url"),function(t){return e(i(t.html))})):e(i([]))},o.prototype.controlsClick=function(t){var e;return e=i(t.currentTarget),this.$el.data("needs-confirmation")&&this.$(".awaiting_confirmation").length>0?alert("Some Experience items need your confirmation. Please confirm or delete before continuing."):(this.toggleControls(e),e.hasClass("edit_experience")?this.toggleEdit(e):this.toggleReorder(e))},o.prototype.toggleControls=function(t){return t.toggleClass("keep"),this.linkActive=t.hasClass("keep"),this.linkActive?t.siblings().hide():t.siblings().show()},o.prototype.toggleReorder=function(t){var e,n,r;return n=this.$(".startup_roles.experience").filter(":visible"),n.length>1?n.find(".control").filter(":visible").length>0?(alert("Please finish editing before you reorder your Experience."),this.toggleControls(t)):(t.html(this.linkActive?"Done":"Reorder"),this.trigger(this.linkActive?"reorderBegin":"reorderEnd"),e=this.$(".experience_container"),this.linkActive?e.sortable(e.hasClass("ui-sortable")?{disabled:!1}:{axis:"y",items:"> .feature",cursor:"move",containment:"parent"}):(e.sortable({disabled:!0}),r=n.map(function(){return i(this).data("token")}),i.post(this.$el.data("reorder-url"),{order:r.get().join()}))):(alert("There's nothing to reorder!"),this.toggleControls(t))},o.prototype.toggleEdit=function(t){return this.loading?void 0:(this.loading=!0,this.ensureFullyLoaded(t,function(e){return function(n){return n.filter("*").each(function(t,n){return e.$el.find("[data-token='"+i(n).data("token")+"']").length>0?void 0:e.$(".experience_container").append(i(n))}),t.html(e.linkActive?"Done":"Edit"),e.trigger(e.linkActive?"edit":"show"),e.loading=!1}}(this)))},o.prototype.render=function(t){return this.loading_row=i("<div>").insertAfter(r.find(".experience_marker")).html(AL.centeredLoadingImage().prop("outerHTML")),t.on("saved",function(e){return function(){return e.loading_row.fadeOut("fast",function(){return i(t.html).filter("*").hide().insertAfter(r.find(".experience_marker")).fadeIn("slow",function(){return i(this).find('input[type="text"]').length>0?i(this).find(".edit").click():void 0})})}}(this))},o}(o.View))({el:r,collection:_}):void 0},index:function(n,r){var s,a,u,c;return this.model=new l,this.model.autocomplete(n("input.auto")),n("tr.role .pending.needs_confirmation").qtip({content:"Please confirm or delete."}),n("tr.role .pending:not(.needs_confirmation)").qtip({content:"Awaiting their confirmation"}),a=function(r){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,r),o.prototype.initialize=function(){return this.collection.on("show",this.render,this),this.collection.on("change:pending_approval",this.postConfirm,this),this.collection.on("add",this.add,this)},o.prototype.events=function(){return{"click td.featured img":"toggleFeatured","click td.editable":"showEdit","click a.cancel":"hideEdit","click a.submit":"saveEdit","click a.delete":"delete","click .confirm":"confirm","keyup td.optional input":"saveEdit","change .currently_working input":"toggle_working","mouseenter td.editable":"hoverEdit","mouseleave td.editable":"hoverEdit"}},o.prototype.add=function(t){return t.$row.prependTo(this.$el.children("tbody"))},o.prototype.postConfirm=function(t,e){return e?void 0:(this.$("tr.role[data-token='"+t.id+"']").find(".name").removeClass("pending").unbind("mouseenter").unbind("mouseleave"),this.$("tr.role[data-token='"+t.id+"']").find(".confirm").remove())},o.prototype.render=function(t){var i;return i=this.collection.where(t).map(function(t){return t.id}),this.$el.find("tr.role").each(function(){return function(t,r){if(e.include(i,n(r).attr("data-token"))){if(n(r).not(":visible"))return n(r).show()}else if(n(r).is(":visible"))return n(r).hide()}}(this))},o.prototype.toggleFeatured=function(t){var e;return e=this.collection.get(n(t.currentTarget).closest("tr").attr("data-token")),e.save("featured",!n(t.currentTarget).hasClass("featured"),{patch:!0}),n(t.currentTarget).addClass("off").removeClass("on").siblings("img").addClass("on").removeClass("off")},o.prototype["delete"]=function(t){var e;return e=this.collection.get(n(t.currentTarget).closest("tr").attr("data-token")),confirm("Are you sure you want to remove this tagging?")?(n(t.target).closest("tr").fadeOut("fast",function(){return i(this).remove()}),e.destroy()):void 0},o.prototype.confirm=function(t){var e;return e=this.collection.get(n(t.currentTarget).closest("tr").attr("data-token")),i.post("/startup_roles/approve",{token:e.id},function(){return function(t){return e.set(t.role)}}(this),"json"),e.set("pending_approval",!1)},o.prototype.hoverEdit=function(t){return n(t.target).closest("tr.role").hasClass("editing")?void 0:"mouseenter"===t.type?n(t.target).find(".edit_role").show():n(t.target).find(".edit_role").hide()},o.prototype.showEdit=function(t){var e;return e=n(t.currentTarget),e.find(".edit_role").hide(),e.closest("tr.role").hasClass("editing")||e.find("img.loading_image").length>0?void 0:e.closest("tr.role").addClass("editing")},o.prototype.hideEdit=function(t){var e;return e=n(t.currentTarget).closest("tr.role"),e.removeClass("editing").find("form").each(function(t,e){return e.reset()}),t.stopPropagation()},o.prototype.toggle_working=function(t){var e,i;return e=n(t.currentTarget).closest("tr.role").find("form"),i=e.find(".currently_working input").is(":checked"),e.find(".hidden_past").val(!i),e.find(".end_date").find("select").val("").end().toggle(),t?t.stopPropagation():void 0},o.prototype.serialize=function(t,n){var i;return i=e.reduce(t.serializeArray(),function(t,e){var n;return n=function(){switch(e.value){case"true":return!0;case"false":return!1;default:return e.value}}(),t[e.name]=n,t},{}),i.source="profile",n.set(i)},o.prototype.saveEdit=function(t){var e,i,r;return"keyup"!==t.type?(i=n(t.currentTarget).closest("td.optional"),e=n(t.target).closest("form"),i.find(".date_select input[type='hidden']").val(1),r=p.loadingOptions(e,{success:function(t){return i.closest("tr").replaceWith(t.html)},error:function(t){var e;return e=JSON.parse(t.responseText).errors.join(", "),i.find(".edit .errors").text(e)}}),e.ajaxSubmit(r)):void 0},o}(o.View),s=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.initialize=function(){return this.collection.on("show",this.filter,this),this.$selector=this.$el.find('select[name="role"]'),this.$options=this.$selector.find("option").clone(),this.$tagged=this.$el.find(".auto"),this.$confirmation=this.$el.find(".confirmation"),this.$email=this.$confirmation.find("input[name='invited_email']"),this.$type=this.$confirmation.find("select[name='tagged_type']"),this.superuser=this.$el.data("superuser"),this.filters={},this.createRole(),d["with"](i(d.selector("startups/show/structure")),function(t){return function(e){var n;return n=function(){var e;return e=window.location.hash.replace(/^#/,""),e.length>0?(t.$selector.val(e),t.render()):void 0},e.on("start",function(t,e){return"people"===t?e.done(n):void 0}),n()}}(this))},r.prototype.events=function(){return{"blur input.auto":"blurTagged","click .quick_add_button":"clickAdd","keyup input.auto":"checkName",'keyup input[name="invited_email"]':"checkName",'change select[name="role"]':"render"}},r.prototype.createRole=function(){return this.resetForm(),this.role=new l,this.role.autocomplete(this.$el.find("input.auto")),this.$el.data("tagged_id")&&this.$el.data("tagged_type")?(this.role.set("tagged_id",this.$el.data("tagged_id")),this.role.set("tagged_type",this.$el.data("tagged_type")),this.role.direction="outbound"):this.$el.data("startup_id")&&(this.role.set("startup_id",this.$el.data("startup_id")),this.role.direction="inbound"),this.role.on("autocomplete",this.autocomplete,this),this.role.on("noautocomplete",this.render,this),this.render()},r.prototype.resetForm=function(){return this.$el.find(".reset").val(""),this.$el.find('input[type="radio"]').prop("checked",!1),this.$tagged.focus()},r.prototype.filter=function(t){return this.filters=t,this.$selector.empty().html(e.select(this.$options.clone(),function(t){return function(n){return""===i(n).val()||e.include(t.filters.role,i(n).val())}}(this))),1===this.$selector.find("option").length?this.$el.hide():2===this.$selector.find("option").length?(this.$el.show(),this.$selector.prop("disabled",!0).val(this.$selector.find("option").last().val())):(this.$el.show(),this.$selector.prop("disabled",!1).val("")),this.render()},r.prototype.blurTagged=function(){return this.role.setName(this.$tagged.val()),this.render()},r.prototype.checkName=function(t){return"keyup"===t.type&&13===t.which?this.clickAdd():this.role.getName()&&this.role.getName()!==this.$tagged.val()&&this.role.reset(),this.render(!1)},r.prototype.clickAdd=function(){return this.role.setName(this.$tagged.val()),""===this.$email.val()&&this.roleNeedsConfirmation()?void this.render():this.save()},r.prototype.render=function(t){return null==t&&(t=!0),this.role.get("tagged_type")?this.$type.val(this.role.get("tagged_type")).prop("disabled",!0):this.$type.prop("disabled",!1),this.roleNeedsConfirmation()?(this.$confirmation.removeClass("hidden"),t&&""!==this.$tagged.val()&&this.$email.focus()):(this.$confirmation.addClass("hidden"),this.$type.val("User"),this.$email.val("")),"current_investor"===this.$selector.val()?this.$el.find(".current_investor").removeClass("hidden"):this.$el.find(".current_investor").addClass("hidden")},r.prototype.roleNeedsConfirmation=function(){return"inbound"===this.role.direction?this.role.getName()&&!this.role.get("tagged_id")?!0:"User"===this.role.get("tagged_type")&&this.role.shell===!0?!0:"current_investor"!==this.$selector.val()||this.superuser?this.role.get("tagged_id")&&"Startup"===this.role.get("tagged_type")&&!this.superuser?!0:!1:!0:!1},r.prototype.autocomplete=function(){return this.render(),this.roleNeedsConfirmation()?void 0:(this.role.set({invited_email:null}),this.save())},r.prototype.save=function(){return""!==this.$selector.val()&&""!==this.$tagged.val()?(this.roleNeedsConfirmation()&&(this.role.set("invited_email",this.$email.val()),this.role.get("tagged_type")||this.role.set("tagged_type",this.$type.val())),this.role.$row="outbound"===this.role.direction?i("<tr><td class='loading'></td><td>"+this.role.get("company_name")+"</td><td colspan='4'></td></tr>"):"inbound"===this.role.direction?i("<tr><td>"+this.role.get("invited_name")+"</td><td class='loading'></td><td colspan='2'></td></tr>"):void 0,this.role.$row.find(".loading").html(AL.loadingImage()),e.each(this.$el.find("."+this.$selector.val()+" input"),function(t){return function(e){return!i(e).is('input[type="radio"]')||i(e).is(":checked")?t.role.set(i(e).attr("name"),i(e).val()):void 0}}(this)),this.role.save({past:this.filters.past===!0,role:this.$selector.val()},{success:function(){return function(t,e){return t.$row.replaceWith(i(e.html).effect("pulsate",{times:2},1e3)),null!=g&&g.track("Taggings: (CS) user added a tag on people page"),e.popover?(g.track("startup_role: popover on /people"),i.facybox(e.popover)):void 0}}(this),error:function(t){return function(e){return e.$row.remove(),t.collection.remove(e),alert("We couldn't save that connection, is it already listed?")}}(this)}),this.collection.add(this.role),this.createRole()):void 0},r}(o.View),u=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.model=l,i.prototype.where=function(t){return this.filter(function(n){return e.every(t,function(t,i){return e.include(e.flatten([t]),n.get(i))})})},i}(o.Collection),c=new u(r.data("roles")),new s({collection:c,el:n(".quick_add")}),new a({collection:c,el:n("table.connections")}),c},filters:function(t){return r(["lib/partials"],function(){return function(e){return e["with"](i(e.selector("startup_roles/index")),function(e){return new v({collection:e,el:t("ul"),active_klass:"selected"})})}}(this))},FilterView:v,popover_prompt_user_merge:function(t){var e,n;return e=t("form"),n=p.loadingOptions(e,{dataType:"json",success:function(){return t(".page-content").html(i("<strong>").html("Thanks! We're merging your accounts together now.")),setTimeout(function(){return i(document).trigger("close.facybox")},2e3),g.track("shelluser: merge (role popover)")}}),e.ajaxForm(n),t("a.cancel").click(function(){return i(document).trigger("close.facybox")})},popover_prompt_user_claim:function(t){var e,n;return e=t("form"),n=p.loadingOptions(e,{dataType:"json",beforeSend:function(){return t(".errors").empty()},success:function(e){return e.success?(t(".page-content").html(i("<strong>").html("Thanks!")),setTimeout(function(){return i(document).trigger("close.facybox")},2e3),g.track("shelluser: claim (role popover)")):t(".errors").html(e.errors).effect("pulsate",{times:2},1e3)}}),e.ajaxForm(n),t("a.cancel").click(function(){return i(document).trigger("close.facybox")})},popover_comment:function(t,e){var n,r;return e.find(".tipright").qtip({position:{my:"center left",at:"center right"},show:{event:"focus",delay:0},hide:{event:"blur"}}),m.push(["_trackEvent","comment after role","shown",window.location.pathname]),n=i("#facybox_popover"),r={dataType:"json",success:function(t){return t.success?window.location.reload(!0):void 0},beforeSubmit:function(){return n.find(".load").show(),n.find("input[type=submit]").hide(),m.push(["_trackEvent","comment after role","added",window.location.pathname])}},i("#comment-from-role").ajaxForm(r),i("#comment-from-role .skip").click(function(t){return m.push(["_trackEvent","comment after role","skipped",window.location.pathname]),t.preventDefault(),null!=this.href&&this.href.toString().match(/void\(/)?(i.facybox.close(),!1):(n.find(".load").show(),n.find("input[type=submit]").hide(),i.ajax({type:"post",url:this.href,data:{skip:!0,role_id:i("#comment-from-role input[name=item_source_id]").val()},success:function(t){return t.html?n.html(t.html):window.location.reload(!0)}}))})},role_field:function(t){var e,n,o,s,a;return n=i(this).attr("id"),e=t(".data"),o=e.data("object_id"),a=e.data("roles"),s=e.data("options"),r(["lib/role_field"],function(t){return new t("#"+n,o,a,s)})},popover_syndicate:function(t){return t(".actions .skip").click(function(){return i.facybox.close()})},popover_review:function(t,e){var n,r;return r=e.data("token"),n=t(d.selector("reviews/form")),setTimeout(function(){return e.find("textarea").focus()},400),d["with"](n,function(e){return e.on("save",function(){var e,n;return t(".review_form").hide(),t(".success").fadeIn(200),n=i(d.selector("startup_roles/startup_profile")).find(".review[data-token="+r+"]"),n.length>0&&n.fadeOut(),e=i(d.selector("startups/show/sections/add_references")),e.length>0?d["with"](e,function(t){return t.load_by_token(r)}):void 0})})},showcase:function(e,n){var i,r,s;return s=function(){return e(".more").slideToggle(200),e(".view_more_container").remove(),!1},i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.routes={team:"team"},n}(o.Router),r=new i,r.on("route:team",function(){return s()}),n.on("click","a.view_more",s),o.history.start()}}})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("lib/validation_helper",["jquery"],function(e){return function(){function n(){}return n.Base=function(){function t(t){this.el=t}return t}(),n.Filter=function(n){function i(t){i.__super__.constructor.call(this,t),e(this.el).keyup(function(t){return function(e){return t.handleKeyup(e)}}(this))}return t(i,n),i}(n.Base),n.RegexFilter=function(e){function n(t,e){this.pattern=e,this.handleKeyup=function(t){return function(){var e;return e=t.el.value.match(t.pattern),e?e[0]!==t.el.value?t.el.value=e[0]:void 0:t.el.value=""}}(this),n.__super__.constructor.call(this,t)}return t(n,e),n}(n.Filter),n.NumberFilter=function(e){function n(t,e){var i,r,o,s,a,l,u;i="[0-9]",a="[+]?",e.negative&&(a="[-+]?"),l=11,u=i,r=0,o=i,e.scale&&(l=Math.max(0,e.scale)),e.precision&&(r=Math.max(0,e.precision),e.scale&&(l=Math.max(0,l-r))),0>=l?u="0*":u+="{0,"+l+"}",s=a+u,r>0&&(s+="([.]"+o+"{0,"+r+"})?"),n.__super__.constructor.call(this,t,s)}return t(n,e),n}(n.RegexFilter),n.LengthFilter=function(e){function n(t,e){var i,r;i=65536,e.maxlength&&(i=Math.min(i,e.maxlength)),r="[\\s\\S]{0,"+i+"}",n.__super__.constructor.call(this,t,r)}return t(n,e),n}(n.RegexFilter),n.install_regex_filters=function(t){var i;return i=n,e(".validate_regex",t).each(function(){var t;return this.validation_helper?void 0:(t=e(this).data("pattern"),this.validation_helper=new i.RegexFilter(this,t))})},n.install_number_filters=function(t){var i;return i=n,e(".validate_number",t).each(function(){var t,n,r;return this.validation_helper?void 0:(r=parseInt(e(this).data("scale")),n=parseInt(e(this).data("precision")),t=parseInt(e(this).data("negative")),this.validation_helper=new i.NumberFilter(this,{scale:r,precision:n,negative:t}))})},n.install_length_filters=function(t){var i;return i=n,e(".validate_length",t).each(function(){var t;return this.validation_helper?void 0:(t=parseInt(e(this).data("maxlength")),this.validation_helper=new i.LengthFilter(this,{maxlength:t}))})},n.install=function(t){return n.install_regex_filters(t),n.install_length_filters(t),n.install_number_filters(t)},n}()})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/startup_intro",["models/base"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(e("StartupIntro"))})}.call(this),function(){define("models/program_global_response",["models/base"],function(t){return t("ProgramGlobalResponse")})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("lib/login_or_join",["jquery","mixpanel","lib/partials","backbone","underscore"],function(e,n,i,r,o){var s;return s=function(){function r(){this.open=t(this.open,this)}return r.prototype.center=function(){return e("#facybox").css("top",Math.max(0,(e(window).height()-e("#facybox").outerHeight())/2+e(window).scrollTop())+"px"),e("#facybox").css("left",Math.max(0,(e(window).width()-e("#facybox").outerWidth())/2+e(window).scrollLeft())+"px")},r.prototype.open=function(t){var r,o,s,a;return null==t&&(t={}),window._login_or_join_modal_loading?void 0:(window._login_or_join_modal_loading=!0,r=t.first_view||"modal_signup",o=t.header_msg||("modal_login"===r?"Log in to AngelList":"Sign up for AngelList"),a=t.redirect_to||"",s="/sessions/login_or_join?header_msg="+o+"&first_view="+r+"&redirect="+a,e.ajax({url:encodeURI(s),success:function(r){return function(o){var s;return e.facybox(o),r.center(),window._login_or_join_modal_loading=!1,t.hide_close_btn&&e("#facybox .close").hide(),t.left&&e("#facybox").css("left",t.left),t.top&&e("#facybox").css("top",t.top),t.show_non_social_signup&&(s=e(i.selector("sessions/login_or_join")),i["with"](s,function(t){return t.show_signup_no_network()})),s=e(i.selector("sessions/continue_after_social_login")),t.email&&(i["with"](s,function(e){return e.set("#user_email",t.email)}),e("#user_name").focus()),t.username&&(i["with"](s,function(e){return e.set("#user_name",t.username)}),e("#user_password").focus()),n.track("login_modal: loaded")}}(this)}))},r.prototype.finish=function(){return e(document).trigger("close.facybox"),r.trigger("user_logged_in"),n.track("login_modal: finished")},r}(),o.extend(s,r.Events),s})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("lib/angel_profiles",["jquery","backbone","underscore","lib/form","mixpanel","lib/login_or_join"],function(e,n,i,r,o,s){var a;return{require_complete_profile:function(t,n,i,s){var a;return null==s&&(s=function(){}),t?(a=!1,function(l){var u,c;return c=this,u=arguments,a?(s(),i.apply(c,u)):e.ajax("/angel_profiles/"+t+"/ensure_completeness",{dataType:"json",data:{reason:n},success:function(t){var n,l;return t.incomplete&&t.popover?(null!=o&&o.track("angel profiles: failed completion check"),e.facybox(t.popover),e("#facybox").addClass("mobile_full_width"),e(document).on("close.facybox",function(){return s(),e("#facybox").removeClass("mobile_full_width")}),n=e("#facybox form.g-form"),l=r.loadingOptions(n,{dataType:"json",success:function(t){var r,s,l,p;if(Array.isArray(t)){for(p=[],s=0,l=t.length;l>s;s++)r=t[s],p.push(n.find("."+r[0]).addClass("validation_error"));return p}return e(document).one("afterClose.facybox",function(){return i.apply(c,u)}),a=!0,null!=o&&o.track("angel profiles: completed profile"),e.facybox.close()}}),n.ajaxForm(l)):(a=!0,s(),i.apply(c,u))}}),l&&typeof l.preventDefault==typeof Function?l.preventDefault():void 0}):function(t){return t&&typeof t.preventDefault==typeof Function&&t.preventDefault(),s(),i.apply(this,arguments)}},CheckInvestorView:a=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.login=function(){var t;return t=new s,t.open({header_msg:"Create an account to Invest"}),s.on("user_logged_in",function(t){return function(){return t.apply()}}(this)),!1},i.prototype.apply=function(){return e.ajax({dataType:"json",data:{methods:["angel_profile"]},url:"/me",success:function(t){return function(e){return e.angel_profile?window.location.reload():window.location=t.options.apply_url}}(this)}),!1},i.prototype.initialize=function(t){return this.options=t,this.$el.on("click",this.options.button_class,function(t){return function(){var n,i;return i=e(t.options.data_element).data("logged_in"),n=e(t.options.data_element).data("approved"),i?n?void 0:window.location=t.options.apply_url:t.login()}}(this))},i}(n.View)}})}.call(this),function(){define("lib/popovers",["jquery","lib/partials"],function(t,e){return{popover_with_continue:function(n,i,r,o){var s;return null==o&&(o=null),r||(r=function(){}),t.facybox(n),s=function(){return function(e,n){return null==e&&(e=!0),null==n&&(n=null),e?(t(document).off("close.facybox",r),t.facybox.close(),i(n)):void 0}}(this),t("#facybox .continue").click(function(){return function(){var n,i;return n=null,o?(i=!0,e["with"](t(e.selector(o),"#facybox"),function(t){return t.validate&&(i=t.validate()),t.data&&(n=t.data()),s(i,n)})):s()}}(this)),t(document).on("close.facybox",r)}}})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/startups",["underscore","jquery","backbone","lib/dropdown","require","lib/validation_helper","lib/elements","lib/form","lib/flash","lib/partials","models/new_tagging","models/repository","models/startup","models/startup_intro","models/program_global_response","global/tiptip","google/analytics","mixpanel","qtip","lib/angel_profiles","lib/media","lib/popovers","jquery.magnific","jquery.appear","jquery.scrollTo"],function(e,n,i,r,o,s,a,l,u,c,p,d,h,f,m,g,_,v,y,b,w,x){var k,C;return k={delay:0,defaultPosition:"top",fadeIn:0,fadeOut:0},C=function(e,r){var o,s;return s=document.createElement("img"),s.src="/images/shared/loading.gif",new(o=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(){return this.next_page=2,this.page_count=this.$(".entities").data("page_count"),1===this.page_count?this.$(".more").html("No More").addClass("disabled"):this.$(".more").html("More").removeClass("disabled")},i.prototype.events={"click .more":"more"},i.prototype.more=function(){return this.next_page<=this.page_count?(n(event.target).html(s),n.getJSON(event.target.href,{new_startup_profile:1,page:this.next_page},function(t){return function(e){return t.next_page+=1,t.$(".entities > .entity").last().after(e.html),t.next_page>t.page_count?t.$(".more").html("No More").addClass("disabled"):t.$(".more").html("More").removeClass("disabled")}}(this)),!1):!1},i}(i.View))({el:r})},{followers:C,intros:C,index:function(t,e){return _.push(["_trackPageview","/PV/startups/non-investor/"+e.data("filter")])},post_close_hub:function(e,r){var o;return new(o=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,i),r.prototype.initialize=function(){return c["with"](n(c.selector("startups/show/structure")),function(){return function(t){var n;return n=function(){var t;return t=window.location.hash.replace(/^#/,""),t.length>0?this.$(".nav li").filter(function(){return e(this).data("tab")===t}).find("a").click():void 0},t.on("start",function(t,e){return"investment"===t?e.done(n):void 0}),n()}}(this)),this.$("> .data").length>0&&this.$("> .data").data("hub_manager")?c["with"](n(c.selector("startups/investor_hub_manage_content")),function(){return function(t){return c["with"](n(c.selector("new_posts/post_form")),function(e){return t.on("addedRecipient",function(t){return e.setAddedRecipientCount(t)}),t.on("removedRecipient",function(t){return e.setAddedRecipientCount(t)})})}}(this)):void 0},r.prototype.selectTab=function(t){return this.$(".tab_content:not(."+t+")").hide(),this.$(".tab_content."+t).is(":visible")?void 0:this.$(".tab_content."+t).fadeIn("fast")},r.prototype.events={"click .nav li a":function(t){var e;return e=n(t.target).closest("li").data("tab"),this.selectTab(e)},"click .nda a":function(t){return t.preventDefault(),n(t.target).addClass("loading"),n.get(n(t.target).prop("href"),function(t){return function(){return t.$(".nda").removeClass("unagreed"),t.$(".nda").fadeOut("fast")}}(this))}},r}(i.View))({el:r})},investor_hub_manage_content:function(e,r){var o;return new(o=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.events={"click .discussion":function(){return c["with"](n(c.selector("startups/post_close_hub")),function(){return function(t){return t.selectTab("discussion")}}(this))},"click .add":function(t){var e,i,r;return t.preventDefault(),r=n(t.target),e=r.closest("form").find("select"),i=e.val(),r.hasClass("loading")?void 0:(r.addClass("loading"),r.closest("form").ajaxSubmit({success:function(t){return function(n){return n.success?(r.removeClass("loading"),e.find("option[value="+i+"]").detach(),0===e.find("option").length&&t.$(".add_recipient").slideUp("fast"),t.$(".added_recipients").slideDown("fast"),t.$(".added_recipients tr.header").first().after(n.html),t.$(".added_recipients").data("count",t.$(".added_recipients").data("count")+1),t.trigger("addedRecipient",t.$(".added_recipients").data("count"))):void 0}}(this)}))},"click .delete_btn":function(t){var e,i;return i=n(t.target),e=i.closest(".delete").find("form"),e.ajaxSubmit({success:function(t){return function(e){var r,o;return e.success?(1===i.closest("table").find("tr:visible:not(.header)").length?(i.closest("tr").hide(),t.$(".added_recipients").slideUp("fast")):i.closest("tr").fadeOut("fast"),o=i.closest("tr").data("user_id"),r=i.closest("tr").find(".name").html(),t.$(".add_recipient").slideDown("fast"),t.$(".add_recipient select").append(n("<option>",{value:o,html:r})),t.$(".added_recipients").data("count",t.$(".added_recipients").data("count")-1),t.trigger("removedRecipient",t.$(".added_recipients").data("count"))):void 0}}(this)})}},i}(i.View))({el:r})},people:function(t){return o(["lib/partials","controllers/startup_roles"],function(){return function(e,i){return e["with"](n(e.selector("startup_roles/index")),function(e){return new i.FilterView({collection:e,el:t("ul"),active_klass:"active"})})}}(this))},create_press:function(t,e){return o(["lib/startup_profile"],function(t){var i,r;return i=t.CreateUpdateView.extend({successCallback:function(t,i){var r,o,s,a,l,u,c;return s=n(i.html),u=s.find(".headline a").get(0).hostname,c=s.find(".headline").text(),r=e.find("select"),l=r.eq(2).find(":selected").text()+" "+r.eq(1).find(":selected").text()+" "+r.eq(0).find(":selected").text(),o=e.prev().hide(),a=e.prev().prev().removeClass("hidden").hide().fadeIn("slow"),a.find(".attribution").html(s.find(".headline a").text(u)),a.find(".body").html(c),a.find(".date").html(l)}}),r=new i({el:e.find("form.new"),view:"press"}),r.render(),e.find('.input input[type="text"]').each(textCounter)})},create_update:function(t,e){return o(["lib/startup_profile"],function(t){var i,r,o;return o=d.get(h).bootstrap(e.data("startup")),i=t.CreateUpdateView.extend({successCallback:function(t,i){var r,o,s;return s=n(i.html).find(".summary").html(),r=e.prev().hide(),o=e.prev().prev().removeClass("hidden").hide().fadeIn("slow"),o.find(".body").html(s),o.find(".date").html("Just now")}}),r=new i({el:e.find("form.new"),view:"status_update"}),r.render(),e.find('.input input[type="text"]').each(textCounter)})},activity_content:function(e,r){return o(["lib/startup_profile"],function(o){var s,a,l;return s=o.CreateUpdateView.extend({successCallback:function(t,e){return n(e.html).prependTo(this.$el.siblings(".update_list"))}}),l=new s({el:r.find("form.new"),view:r.data("view")}),l.render(),r.find('.input input[type="text"]').each(textCounter),a=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,i),r.prototype.initialize=function(t){return this.view="all",this.form=t.form,this.empties={},this.loading=document.createElement("img"),this.loading.src="/images/shared/loading.gif",this.$el.find(".more").appear().each(function(){return e(this).on("appear",function(t){return function(){return e(t).click()}}(this))})},r.prototype.filter=function(t){return this.view!==e(t.target).parent().data("tab")?(this.$el.find(".nav li").removeClass("active"),this.view=e(t.target).parent().addClass("active").data("tab"),this.render()&&this.form.trigger("filter",this.view)):void 0},r.prototype.more=function(t){var e;return n(t.target).hasClass("disabled")||n(t.target).hasClass("loading")||(e=this.$el.find(".update_list .update").last().data("ts"),n(t.target).html(this.loading).addClass("loading"),n.getJSON(t.target.href,{new_startup_profile:1,last_ts:e,view:this.view},function(e){return function(i){return""!==i.html?(e.$el.find(".update_list .update").last().after(i.html),n(t.target).removeClass("loading").html("More")):(e.empties[e.view]=!0,n(t.target).removeClass("loading").html("No More").addClass("disabled"))
}}(this))),!1},r.prototype.render=function(){var t;return this.empties[this.view]?this.$el.find(".more").html("No More").addClass("disabled"):this.$el.find(".more").html("More").removeClass("disabled"),"all"===this.view?this.$el.find(".update_list .update").addClass("active").removeClass("hidden"):(this.$el.find(".update_list .update").removeClass("active"),t=this.$el.find(".update_list .update[data-tab='"+this.view+"']"),t.addClass("active").removeClass("hidden"),this.$el.find(".update_list .update:not(.active)").addClass("hidden"),this.$el.find(".updates .error").addClass("hidden"),this.$el.find(".updates .error[data-tab='"+this.view+"']").removeClass("hidden")),n.force_appear()},r.prototype.events={"click .nav li a":function(t){return this.$el.data("history")||t.preventDefault(),this.filter(t)},"click .more":function(t){return this.$el.data("history")||t.preventDefault(),this.more(t)}},r}(i.View),new a({el:r,form:l}),r.data("history")?c["with"](n(c.selector("startups/show/structure")),function(t){var n;return n=function(){var t;return t=window.location.hash.replace(/^#/,""),t.length>0?e("li").filter(function(){return e(this).data("tab")===t}).find("a").click():void 0},t.on("start",function(t,e){return"activity"===t?e.done(n):void 0}),n()}):void 0})},show:function(t){var i,r,o;return _.push(["_trackPageview","/PV/startup_profile"]),t("> .data").data("sourced")&&(_.push(["_trackPageview","/PV/sourced_startup_profile"]),null!=v&&v.track("sourced_startup: viewed")),r=function(){return function(e,i){return i.done(function(){return"show"===e&&window.location.hash.length>1?t("> a").filter(function(){return e=t(this).attr("name"),null!=e&&e.length>0&&e===window.location.hash.slice(1)}).each(function(){return n.scrollTo(this)}):void 0})}}(this),c["with"](n(c.selector("startups/show/structure")),function(){return function(t){return t.on("start",r)}}(this)),i=t("> .section > "+c.selector("startups/show/sections/deferred")),o=e.after(i.length+1,function(){return function(){return t("> .deferred").removeClass("deferred"),t("> .loading_more").remove(),r("show",n.when(!0))}}(this)),o(),i.each(function(){return c["with"](this,function(e){return function(n){return n.load.done(function(n){return null==n||n.is(":empty")?(t(e).parent().prev(".header").hide(),t(e).parent().hide()):void 0}).always(o)}}(this))}),/invest_now/.test(document.URL)?n("a.interested_button").click():void 0},registration_flow:function(t){var e;return e=function(e,n){return t('.option[data-tab="'+e+'"]').toggleClass("u-hidden",!n)},{toggle_tab:e}},"new":function(e){return o(["lib/startup_profile"],function(r){var o,s,a,l;return null!=v&&v.track("startup_onboard: viewed /intro"),e(".input_block input, .input_block textarea").focus(function(){return n(this).siblings(".magic_instructions").addClass("display_magic_instructions")}).blur(function(){return n(this).siblings(".magic_instructions").removeClass("display_magic_instructions")}),o=function(){var t,n,i;return i=e(e(this).closest("form")),t=e('input:radio[name="funding_round[capped]"]:checked, input:radio[name="startup[current_round][capped]"]:checked',i),n=e(".valuation",i),"yes"===t.val()?n.show():(n.hide(),n.find("input").val(""))},s=function(t){var n,i,r,o,s,a,l;return l=e(e(this).closest("form")),n=e(".cap",l),o=e('input:radio[name="funding_round[capped]"]:checked, input:radio[name="startup[current_round][capped]"]:checked',l),s=e(".valuation",l),a=e("label[for=funding_round_pre_money_valuation], label[for=startup_current_round_pre_money_valuation]",l),i=e(".discount",l),r=s.find(".hint",l),n.hide(),s.hide(),i.hide(),"equity"===t.target.value?(s.show(),a.text("Pre-Money Valuation"),n.hide(),r.hide(),i.find("input").val("")):"debt"===t.target.value?(n.show(),o.click(),i.show(),a.text("Valuation Cap"),r.show()):void 0},e(".cap input").click(o),e("#startup_current_round_equity_basis, #funding_round_equity_basis").change(s).change(),e(".incubators:checkbox").on("change",function(){return e(this).is(":checked")?void 0:e(".group_wrapper.incubators .input_block :checkbox:checked").click()}),e("input[type='checkbox'].fundraising").change(function(){return e(this).is(":checked")?e(".group_wrapper.fundraising").slideDown():e(".group_wrapper.fundraising").slideUp()}),e(".group_wrapper.fundraising").toggle(e("input[type='checkbox'].fundraising").is(":checked")),e("input[type='checkbox'].recruiting").change(function(){var t;return t=e(this).is(":checked"),c["with"](n(c.selector("startups/registration_flow")),function(e){return e.toggle_tab("job",t)}),e(".show_for_recruiting").toggle(t)}),e("input[type='checkbox'].incubators").change(function(){return e(this).is(":checked")?e(".group_wrapper.incubators .group.incubators").slideDown():e(".group_wrapper.incubators .group.incubators").slideUp()}),e(".group_wrapper.incubators .group.incubators").toggle(e("input[type='checkbox'].incubators").is(":checked")),a=this,e("input[type='checkbox'].first_check").change(function(){return n(this).is(":checked")?n(".group_wrapper.fundraising input[type=text].prev_raised_amount",a).val("").prop("disabled",!0):n(".group_wrapper.fundraising input[type=text].prev_raised_amount",a).prop("disabled",!1)}),e("#other_section_checkbox").change(function(){return n(this).is(":checked")?n(".group_wrapper.other_section",a).slideDown():n(".group_wrapper.other_section",a).slideUp()}),e(".section_header.subhead.fundraising").click(function(){var t;return t=e("input[type='checkbox'].fundraising"),t.prop("checked",!t.is(":checked")),t.trigger("change")}),e(".section_header.subhead.other_section").click(function(){var t;return t=e("#other_section_checkbox"),t.prop("checked",!t.is(":checked")),t.trigger("change")}),e(".group_wrapper.incubators .input_block .incubator_application").each(function(){var t;return t=function(t){return function(){return e("label, .image",t).toggleClass("selected",e("input",t).is(":checked"))}}(this),t(),e("input",this).on("change",t)}),e(".group_wrapper.incubators .input_block .incubator_application .image a").click(function(){return event.stopPropagation()}),l=e(".data").data("user_id"),e(".tagging_fields").each(function(){var o;return o=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.initialize=function(){var t,e,o;return this.$el.data("existing").length>0&&(e=function(){var e,n,i,r;for(i=this.$el.data("existing"),r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(new p(t));return r}.call(this),this.collection=new i.Collection(e)),r.__super__.initialize.apply(this,arguments),null!=this.$el.data("max")?(o=function(t){return function(){return t.associations().length>=t.$el.data("max")?(n(t.input()).attr("disabled",!0),t.$el.addClass("disabled"),t.$(".tag_hint").hide()):(n(t.input()).removeAttr("disabled"),t.$el.removeClass("disabled")),t.collection.length>0?t.$(".validation-error").hide():void 0}}(this),o(),this.listenTo(this.collection,"add remove",o)):void 0},r.prototype.events=function(){var t;return t=r.__super__.events.apply(this,arguments),t||(t={}),t["focus :input"]=function(t){return function(){return t.$(".tag_hint").show()}}(this),t["blur :input"]=function(t){return function(){return t.$(".tag_hint").hide()}}(this),t},r}(r.NewTaggingField),new o({el:e(".locations",this),tag_type:"LocationTag",new_taggable_field:"tags_tmp_field_interested_locations",new_taggable_type:"User",new_taggable_id:l,container:e(".locations",this).find(".association_container")}),new o({el:e(".markets",this),tag_type:"MarketTag",new_taggable_field:"tags_tmp_field_interested_markets",new_taggable_type:"User",new_taggable_id:l,container:e(".markets",this).find(".association_container")})})})},add_people:function(){return n("form.edit_user",this).each(function(){return _.push(["_trackEvent","structured bio behavior 3","show bio on startup onboard",window.location.pathname]),n(this).submit(function(){return _.push(["_trackEvent","structured bio behavior 3","save bio on startup onboard",window.location.pathname]),!0})}),n(".submit_button_section #continue_button",this).click(function(t){return function(){return null!=v?v.track("startup_onboard:added_people",{},function(){return n("form.edit_user",t).submit()}):n("form.edit_user",t).submit()}}(this))},private_badge:function(t,e){return e.hasClass("fast_tiptip")?e.qtip(k):void 0},public_badge:function(t,e){return e.hasClass("fast_tiptip")?e.qtip(k):void 0},profile_restricted_visibility:function(t){return t(".explain .fast_tiptip").qtip(k),t(".help-link a").on("click",function(){return n.facybox(t(".help-link").data("content"))})},visibility_generic:function(t){return t(".preview.fast_tiptip").qtip(k)},screenshots:function(t){var e,n,i,r;return t(".images .image").first().addClass("selected"),t(".thumbs .thumb").first().addClass("selected"),t(".thumb").on("mouseover",function(){var e,n;return t(this).hasClass("video")?e=t(".image.video"):(n=t(this).data("index"),e=t(".image").filter(function(){return t(this).data("index")===n}).first()),t(".image, .thumb").removeClass("selected"),t(this).addClass("selected"),e.addClass("selected")}),t(".arrow_container").length>0?(e=t(t(".thumb")[2]).position().top-t(t(".thumb")[1]).position().top,n=e-t(t(".thumb")[1]).position().top,r=t(".thumbs"),i=0,t(".arrow_container.down").addClass("active"),t(".arrow_container").on("click",function(){return t(this).hasClass("active")?(t(this).hasClass("up")?i-=e:i+=e,t(".arrow_container.down").toggleClass("active",i-n<=r.height()-t(".thumbs_window").height()-e),t(".arrow_container.up").toggleClass("active",i>=e),r.animate({top:-i+"px"},{queue:!1})):!1})):void 0},intro_button:function(t,i){return o(["moment"],function(){var r,o,s,a,u;return o=t("form"),a=o.data("intro")?new f(o.data("intro")):null,w.isHandheld()&&(r=0,o.find('input[type="submit"]').click(function(){return 0===r?(o.find(".dropdown").show(),r+=1,!1):(o.find(".dropdown").hide(),!0)}),t(".disabled_intro.angellist > a").click(function(){var t;return n.facybox({div:"#al_intro_mobile_popover"}),t=n(window).width()/2-n("#facybox").width()/2-10,n("#facybox").css("left",t)})),s=l.loadingOptions(o,{dataType:"json",success:function(n){var i;return"success"===n.status?(i="Intro Request Sent",n.redirect_url?(t(":submit").val(i),window.location.href=n.redirect_url):null!=n.preview_popover?x.popover_with_continue(n.preview_popover,function(){return function(t){return s.data=e.extend({force_send:!0},t),o.ajaxSubmit(s)}}(this),function(){return function(){return t(":submit").removeClass("loading"),t(":submit").removeAttr("disabled")}}(this),"startup_intros/preview_popover"):(t(":submit").val(i),null!=a?a.set(n.startup_intro):a=new f(n.startup_intro))):void 0}}),u=b.require_complete_profile(i.data("profile"),"intro",function(t){return t.preventDefault(),o.ajaxSubmit(s)},function(){return t(":submit").removeClass("loading"),t(":submit").removeAttr("disabled")}),o.bind("submit",function(e){return t(":submit").addClass("loading"),o.trigger("mouseout"),v.track("investor: clicked get intro button on startup profile"),u(e)}),i.data("initially_request_intro")?o.submit():void 0})},left_filters:function(t){return t(".section").click(function(t){return t.stopPropagation(),window.location.href=n(this).find("a").attr("href")})},privacy_settings:function(t,e){return TipTip.init(),t(".privacy_item .item").click(function(){return t(".privacy_item .item").each(function(){return n(this).removeClass("selected"),n(".radio input",this).prop("checked",!1)}),n(this).addClass("selected"),n(".radio input",this).prop("checked",!0),"private"===n("input",this).attr("id")?(t(".blocks").slideDown(200),t("#counter").show()):(t(".blocks").slideUp(200),t("#counter").hide())}),t("#back_to_content").click(function(){return n(".startups.privacy_settings .content").show(),n(".startups.privacy_settings .visibility_list_content").hide(),n(".startups.privacy_settings .page-title").text(n(this).data("title"))}),{setPrivacy:function(i){var r;return r="public",t(".privacy_item .item input#private").is(":checked")?r="private":t(".privacy_item .item input#open").is(":checked")&&(r="open"),n.ajax({url:"/startup_visibilities/set_privacy",data:{state:r,startup_id:e.data("startup_id")},type:"post",success:function(t){var e,r;return r=n(c.selector("startups/show/header_nav/privacy_toolbar")),""===t.toolbar_html?r.remove():r.replaceWith(t.toolbar_html),e=n(c.selector("startups/privacy_settings")),""!==t.form_html&&e.replaceWith(t.form_html),i()}})}}},request_investor_update:function(t){return t(".request_update").click(function(t){var e;return e=n(t.target),e.closest("form").ajaxSubmit({success:function(){return function(t){return e.replaceWith(t.success?"Update requested.":"Failed to request an update.")}}(this)})})},settings:function(t,i){var r,o;return r=i.data("slug_name"),o=function(){var n;return n=t(".startup-settings-form"),n.ajaxSubmit({beforeSend:function(){return l.clearInputErrors(t(".startup-settings-form :input"))},success:function(e){return e=JSON.parse(e),e.new_location?window.location=e.new_location:(t(".save").removeClass("c-button--loading"),u("Your settings have been saved.",4e3))},error:function(n){var i;return t(".save").removeClass("c-button--loading"),i=JSON.parse(n.responseText),e.each(i.errors,function(e,n){return l.setInputError(t("#startup_"+n),e)})}})},t(".save").click(function(){var e;return n(this).addClass("c-button--loading"),e=t(c.selector("startups/privacy_settings")),e.length?c["with"](e,function(t){return t.setPrivacy(o)}):o()}),t(".startup-settings-form :input",this).keydown(function(t){return 13===t.which?t.preventDefault():void 0})}}})}.call(this),function(t){define("jquery.autoellipsis",["jquery"],function(){return function(){return!function(t){function e(e,o){var s=e.data("jqae");s||(s={});var a=s.wrapperElement;a||(a=e.wrapInner("<div/>").find(">div"),a.css({margin:0,padding:0,border:0}));var l=a.data("jqae");l||(l={});var u=l.originalContent;u?a=l.originalContent.clone(!0).data("jqae",{originalContent:u}).replaceAll(a):a.data("jqae",{originalContent:a.clone(!0)}),e.data("jqae",{wrapperElement:a,containerWidth:e.width(),containerHeight:e.height()});var c=e.height(),p=(parseInt(e.css("padding-top"),10)||0)+(parseInt(e.css("border-top-width"),10)||0)-(a.offset().top-e.offset().top),d=!1,h=a;o.selector&&(h=t(a.find(o.selector).get().reverse())),h.each(function(){var e=t(this),s=e.text(),l=!1;if(a.innerHeight()-e.innerHeight()>c+p)e.remove();else if(r(e),e.contents().length){for(d&&(i(e).get(0).nodeValue+=o.ellipsis,d=!1);a.innerHeight()>c+p;){if(l=n(e),!l){d=!0,e.remove();break}if(r(e),!e.contents().length){d=!0,e.remove();break}i(e).get(0).nodeValue+=o.ellipsis}"onEllipsis"==o.setTitle&&l||"always"==o.setTitle?e.attr("title",s):"never"!=o.setTitle&&e.removeAttr("title")}})}function n(e){var n=i(e);if(n.length){var r=n.get(0).nodeValue,o=r.lastIndexOf(" ");return o>-1?(r=t.trim(r.substring(0,o)),n.get(0).nodeValue=r):n.get(0).nodeValue="",!0}return!1}function i(t){if(t.contents().length){var e=t.contents(),n=e.eq(e.length-1);return n.filter(o).length?n:i(n)}t.append("");var e=t.contents();return e.eq(e.length-1)}function r(e){if(e.contents().length){var n=e.contents(),i=n.eq(n.length-1);if(i.filter(o).length){var s=i.get(0).nodeValue;return s=t.trim(s),""==s?(i.remove(),!0):!1}for(;r(i););return i.contents().length?!1:(i.remove(),!0)}return!1}function o(){return 3===this.nodeType}function s(t,e){c[t]=e,u||(u=window.setInterval(function(){l()},200))}function a(t){c[t]&&(delete c[t],c.length||u&&(window.clearInterval(u),u=void 0))}function l(){if(!p){p=!0;for(var n in c)t(n).each(function(){var i,r;i=t(this),r=i.data("jqae"),(r.containerWidth!=i.width()||r.containerHeight!=i.height())&&e(i,c[n])});p=!1}}var u,c={},p=!1,d={ellipsis:"...",setTitle:"never",live:!1};t.fn.ellipsis=function(n,i){var r,o;return r=t(this),"string"!=typeof n&&(i=n,n=void 0),o=t.extend({},d,i),o.selector=n,r.each(function(){var n=t(this);e(n,o)}),o.live?s(r.selector,o):a(r.selector),this}}(jQuery),jQuery.fn.ellipsis}.apply(t,arguments)})}(this),function(){define("controllers/startups/card",["jquery","jquery.autoellipsis","lib/partials","mixpanel"],function(t){return{startup:function(e,n){var i;return e(".header .pitch").each(function(){var e;return e=t(this),e.ellipsis(),setTimeout(function(){return e.text().substr(-3).indexOf("...")<0?e.unbind("mouseenter").unbind("mouseleave"):void 0},200)}),e("a").click(function(t){return t.stopPropagation()}),i=n.data("url"),n.click(function(t){return t.metaKey?open(i):window.location.href=i,!1})}}})}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};define("controllers/transaction_feed",["jquery","modernizr","backbone","underscore","lib/elements","models/status_update","google/analytics","mixpanel","jquery.appear"],function(e,n,i,r,o,s,a,l){var u,c,p,d,h,f,m,g,_,v;return d=r.extend({},i.Events),e(document).on("success.follow",function(t,e){return l.track("transaction feed: follow",{type:e})}),e(document).on("success.unfollow",function(t,e){return l.track("transaction feed: unfollow",{type:e})}),m=function(t,n,i){var r;return r=t(".stories-container"),r.css("opacity",.5),i.change_categories=!0,e.get(n,i,function(t){return r.html(t.html),r.css("opacity",1),d.trigger("feed-reloaded")})},v=function(t,e){return e?t.addClass("checked").removeClass("fontello-plus-circle").addClass("fontello-ok-circle"):t.removeClass("checked").removeClass("fontello-ok-circle").addClass("fontello-plus-circle")},h=function(t,n){return e.ajax("User"===t||"Startup"===t?{url:"/follows.js",data:{slug:n,utm_source:"news"},type:"post"}:{url:"/follow_tag/"+n,type:"post"}),l.track("transaction feed: follow",{type:t})},_=function(t,n){return e.ajax("User"===t||"Startup"===t?{url:"/follows.js",data:{_method:"delete",slug:n},type:"post"}:{url:"/unfollow_tag/"+n,type:"post"}),l.track("transaction feed: unfollow",{type:t})},p=function(t,e){return setTimeout(e,t)},c=function(){var n,i,r,o;return r=[],o=[],i=[],n=null,function(s,a){return!s||t.call(r,s)>=0?void 0:(r.push(s),o.push(s),i.push(a),clearTimeout(n),n=p(2e3,function(){var t,n;for(e.ajax({url:"/transaction_feed/mark_read",data:{story_id:o},type:"post"}),t=0,n=i.length;n>t;t++)a=i[t],l.track("transaction feed: read story",a);return o=[],i=[]}))}},g=function(t,e){var n;return n=e.data("section"),t("body")},f=function(){var t,n,i;return i=e(window).scrollTop(),n=e(document).height(),t=e(window).height(),i/(n-t)},u=function(t){return t(".like").click(function(){var t,n;return n="liked"===e(this).data("is-liked"),t=n?"destroy":"create",e.post("/likes/create_or_destroy",{type:e(this).data("likable-type"),id:e(this).data("likable-id"),action_type:t}),l.track("transaction feed: "+t+" like"),n?(e(this).data("is-liked",""),e(this).text("Like")):(e(this).data("is-liked","liked"),e(this).text("Unlike"))})},{top_stories:function(t){return a.push(["_trackPageview","/PV/home/top_stories"]),e.get("/transaction_feed/leaderboards",function(e){return t(".sidebar").html(e.html)})},infinite_stories_container:function(t,n){var i,r,o,s,a,l;return s=!1,r=n.data("exhausted"),i=t(".new_stories").data("last-story-id"),a=n.data("url"),l=function(){return s=!s,t(".loading").toggle(),s?t(".more-stories").hide():r?void 0:t(".more-stories").show()},o=function(){return l(),e.get(a,{before:i},function(n){return t(".stories").append(e(n.html)),i=n.last_story_id,r=n.exhausted,l()})},t(".more-stories a").click(function(){return o()}),e(window).scroll(function(){return s||r?void 0:f()>.7?o():void 0})},new_stories:function(t){var n;return e('.new_stories a[href^="http"]').attr("target","_blank"),n=c(),t(".story").appear().each(function(){return t(this).on("appear",function(){return n(t(this).data("story-id"),{story_type:t(this).data("story-type"),section:e(this).parents(".section").data("section")})})}),u(t)},featured_hero:function(t){return u(t)},leaderboards:function(){return null!=l?l.track_links("a.counts","home: raising online click"):void 0}}})}.call(this),function(){define("stubs/facebook",[],function(){return{init:function(){},getLoginStatus:function(){}}})}.call(this),function(){define("facebook",["facebook_src","lib/environment","stubs/facebook"],function(t,e,n){var i,r;return t||(t=n),i=[],r=!1,t.init({appId:e.isDevelopment()?"731862623536738":"132453076811032",version:"v2.0",xfbml:!0,status:!0}),t.getLoginStatus(function(){var t,e,n,o;for(r=!0,o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(t());return o}),t.ready=function(t){return r?t():i.push(t)},t})}.call(this),function(){define("bundles/main",["global/all","controllers/home","controllers/home/home_gs","controllers/layouts","controllers/mentions","controllers/profiles","controllers/profiles/show","controllers/programs","controllers/program_applications","controllers/shared","controllers/startup_roles","controllers/startups","controllers/startups/card","controllers/transaction_feed","models/repository","models/startup","models/user","models/startup_role","models/new_tagging","facebook","mixpanel","modernizr"],null)}.call(this),function(t){var e=document,n="appendChild",i="styleSheet",r=e.createElement("style");r.type="text/css",e.getElementsByTagName("head")[0][n](r),r[i]?r[i].cssText=t:r[n](e.createTextNode(t))}('#facybox{position:absolute;top:0;left:0;margin:-20px 0 0 -20px;z-index:1500;text-align:left;padding:18px;min-width:40px;min-height:40px}#facybox .e,#facybox .ne,#facybox .nw,#facybox .se,#facybox .sw,#facybox .w{min-height:18px;min-width:13px}#facybox .n,#facybox .s{background-repeat:repeat-x;height:18px}#facybox .e,#facybox .w{background-repeat:repeat-y}#facybox .closek #facybox .loading,#facybox .ne,#facybox .nw,#facybox .se,#facybox .sw,#facybox a.next,#facybox a.prev{background-repeat:no-repeat}#facybox a.next{background-position:9999px 50%}#facybox a.prev{background-position:-9999px 50%}#facybox a.prev:hover{background-position:0 50%}#facybox a.next:hover{background-position:100% 50%}#facybox .close{position:absolute;top:5px;right:0;display:block;width:30px;height:30px;cursor:pointer}#facybox .next,#facybox .prev{display:block;position:absolute;cursor:pointer}#facybox .navigation .counter{background:#000;color:#fff;text-align:center;position:absolute;bottom:-33px;left:-10px;padding:2px 0;font-size:11px}#facybox .loading{margin:0 auto;width:22px;height:22px;background-repeat:no-repeat;background-position:50% 50%}#facybox .popup{position:relative}#facybox table{border-collapse:collapse}#facybox td{border-bottom:0;padding:0}#facybox .body{background:#fff;width:auto}#facybox .loading{text-align:center}#facybox .image{text-align:center;line-height:0}#facybox img{border:0;margin:0}#facybox .footer{position:absolute;top:28px;left:23px;padding:0;width:90%}#facybox .footer img{vertical-align:middle}#facybox .bl,#facybox .br,#facybox .tl,#facybox .tr{height:10px;width:10px;overflow:hidden;padding:0}#facybox_overlay{position:fixed;top:0;left:0;height:100%;width:100%}.facybox_hide{z-index:-100}.facybox_overlayBG{background-color:#000;z-index:100}#facybox .n{background-image:url(/assets/facybox/images/fancy_shadow_n.png?1429256589)}#facybox .s{background-image:url(/assets/facybox/images/fancy_shadow_s.png?1429256589)}#facybox .w{background-image:url(/assets/facybox/images/fancy_shadow_w.png?1429256589)}#facybox .e{background-image:url(/assets/facybox/images/fancy_shadow_e.png?1429256589)}#facybox .nw{background-image:url(/assets/facybox/images/fancy_shadow_nw.png?1429256589)}#facybox .ne{background-image:url(/assets/facybox/images/fancy_shadow_ne.png?1429256589)}#facybox .sw{background-image:url(/assets/facybox/images/fancy_shadow_sw.png?1429256589)}#facybox .se{background-image:url(/assets/facybox/images/fancy_shadow_se.png?1429256589)}#facybox a.next{background-image:url(/assets/facybox/images/fancy_right.png?1429256589)}#facybox a.prev{background-image:url(/assets/facybox/images/fancy_left.png?1429256589)}#facybox .close{background-image:url(/assets/facybox/images/fancy_closebox.png?1429256589)}#facybox .loading:not(.c-button--loading){background-image:url(/assets/facybox/images/loading.gif?1429256589)}html.ms #facybox{margin:0}html.ms #facybox .body{width:100%;background-color:rgba(255,255,255,.95)}.qtip{position:absolute;left:-28000px;top:-28000px;display:none;max-width:280px;min-width:50px;font-size:10.5px;line-height:12px;direction:ltr;-webkit-box-shadow:none;box-shadow:none;padding:0}.qtip-content{position:relative;padding:5px 9px;overflow:hidden;text-align:left;word-wrap:break-word}.qtip-titlebar{position:relative;padding:5px 35px 5px 10px;overflow:hidden;border-width:0 0 1px;font-weight:700}.qtip-titlebar+.qtip-content{border-top-width:0!important}.qtip-close{position:absolute;right:-9px;top:-9px;z-index:11;cursor:pointer;outline:0;border:1px solid transparent}.qtip-titlebar .qtip-close{right:4px;top:50%;margin-top:-9px}* html .qtip-titlebar .qtip-close{top:16px}.qtip-icon .ui-icon,.qtip-titlebar .ui-icon{display:block;text-indent:-1000em;direction:ltr}.qtip-icon,.qtip-icon .ui-icon{border-radius:3px;text-decoration:none}.qtip-icon .ui-icon{width:18px;height:14px;line-height:14px;text-align:center;text-indent:0;font:400 bold 10px/13px Tahoma,sans-serif;color:inherit;background:-100em -100em no-repeat}.qtip-default{border:1px solid #F1D031;background-color:#FFFFA3;color:#555}.qtip-default .qtip-titlebar{background-color:#FFEF93}.qtip-default .qtip-icon{border-color:#CCC;background:#F1F1F1;color:#777}.qtip-default .qtip-titlebar .qtip-close{border-color:#AAA;color:#111}/*! Light tooltip style */.qtip-light{background-color:#fff;border-color:#E2E2E2;color:#454545}.qtip-light .qtip-titlebar{background-color:#f1f1f1}/*! Dark tooltip style */.qtip-dark{background-color:#505050;border-color:#303030;color:#f3f3f3}.qtip-dark .qtip-titlebar{background-color:#404040}.qtip-dark .qtip-icon{border-color:#444}.qtip-dark .qtip-titlebar .ui-state-hover{border-color:#303030}/*! Cream tooltip style */.qtip-cream{background-color:#FBF7AA;border-color:#F9E98E;color:#A27D35}.qtip-cream .qtip-titlebar{background-color:#F0DE7D}.qtip-cream .qtip-close .qtip-icon{background-position:-82px 0}/*! Red tooltip style */.qtip-red{background-color:#F78B83;border-color:#D95252;color:#912323}.qtip-red .qtip-titlebar{background-color:#F06D65}.qtip-red .qtip-close .qtip-icon{background-position:-102px 0}.qtip-red .qtip-icon,.qtip-red .qtip-titlebar .ui-state-hover{border-color:#D95252}/*! Green tooltip style */.qtip-green{background-color:#CAED9E;border-color:#90D93F;color:#3F6219}.qtip-green .qtip-titlebar{background-color:#B0DE78}.qtip-green .qtip-close .qtip-icon{background-position:-42px 0}/*! Blue tooltip style */.qtip-blue{background-color:#E5F6FE;border-color:#ADD9ED;color:#5E99BD}.qtip-blue .qtip-titlebar{background-color:#D0E9F5}.qtip-blue .qtip-close .qtip-icon{background-position:-2px 0}.qtip-shadow{-webkit-box-shadow:1px 1px 3px 1px rgba(0,0,0,.15);box-shadow:1px 1px 3px 1px rgba(0,0,0,.15)}.qtip-bootstrap,.qtip-rounded,.qtip-tipsy{border-radius:5px}.qtip-rounded .qtip-titlebar{border-radius:4px 4px 0 0}.qtip-youtube{border-radius:2px;-webkit-box-shadow:0 0 3px #333;box-shadow:0 0 3px #333;color:#fff;border:0 solid transparent;background:#4A4A4A;background-image:-webkit-gradient(linear,left top,left bottom,color-stop(0,#4A4A4A),color-stop(100%,#000));background-image:-webkit-linear-gradient(top,#4A4A4A 0,#000 100%)}.qtip-youtube .qtip-titlebar{background-color:transparent}.qtip-youtube .qtip-content{padding:.75em;font:12px arial,sans-serif;filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr=#4a4a4a, EndColorStr=#000000);-ms-filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType=0,StartColorStr=#4a4a4a,EndColorStr=#000000);"}.qtip-youtube .qtip-icon{border-color:#222}.qtip-youtube .qtip-titlebar .ui-state-hover{border-color:#303030}.qtip-jtools{background:#232323;background:rgba(0,0,0,.7);background-image:-webkit-gradient(linear,left top,left bottom,from(#717171),to(#232323));background-image:-webkit-linear-gradient(top,#717171,#232323);border:2px solid #ddd;border:2px solid rgba(241,241,241,1);border-radius:2px;-webkit-box-shadow:0 0 12px #333;box-shadow:0 0 12px #333}.qtip-jtools .qtip-titlebar{filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#717171, endColorstr=#4A4A4A);-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#717171,endColorstr=#4A4A4A)"}.qtip-jtools .qtip-content{filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#4A4A4A, endColorstr=#232323);-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#4A4A4A,endColorstr=#232323)"}.qtip-jtools .qtip-content,.qtip-jtools .qtip-titlebar{background:0 0;color:#fff;border:0 dashed transparent}.qtip-jtools .qtip-icon{border-color:#555}.qtip-jtools .qtip-titlebar .ui-state-hover{border-color:#333}.qtip-cluetip{-webkit-box-shadow:4px 4px 5px rgba(0,0,0,.4);box-shadow:4px 4px 5px rgba(0,0,0,.4);background-color:#D9D9C2;color:#111;border:0 dashed transparent}.qtip-cluetip .qtip-titlebar{background-color:#87876A;color:#fff;border:0 dashed transparent}.qtip-cluetip .qtip-icon{border-color:#808064}.qtip-cluetip .qtip-titlebar .ui-state-hover{border-color:#696952;color:#696952}.qtip-tipsy{background:#000;background:rgba(0,0,0,.87);color:#fff;border:0 solid transparent;font-size:11px;font-family:\'Lucida Grande\',sans-serif;font-weight:700;line-height:16px;text-shadow:0 1px #000}.qtip-tipsy .qtip-titlebar{padding:6px 35px 0 10px;background-color:transparent}.qtip-tipsy .qtip-content{padding:6px 10px}.qtip-tipsy .qtip-icon{border-color:#222;text-shadow:none}.qtip-tipsy .qtip-titlebar .ui-state-hover{border-color:#303030}.qtip-tipped{border:3px solid #959FA9;border-radius:3px;background-color:#F9F9F9;color:#454545;font-weight:400;font-family:serif}.qtip-tipped .qtip-titlebar{border-bottom-width:0;color:#fff;background:#3A79B8;background-image:-webkit-gradient(linear,left top,left bottom,from(#3A79B8),to(#2E629D));background-image:-webkit-linear-gradient(top,#3A79B8,#2E629D);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#3A79B8, endColorstr=#2E629D);-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#3A79B8,endColorstr=#2E629D)"}.qtip-tipped .qtip-icon{border:2px solid #285589;background:#285589}.qtip-tipped .qtip-icon .ui-icon{background-color:#FBFBFB;color:#555}.qtip-bootstrap{font-size:14px;line-height:20px;color:#333;padding:1px;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,.2);border-radius:6px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,.2);box-shadow:0 5px 10px rgba(0,0,0,.2);-webkit-background-clip:padding-box;background-clip:padding-box}.qtip-bootstrap .qtip-titlebar{padding:8px 14px;margin:0;font-size:14px;font-weight:400;line-height:18px;background-color:#f7f7f7;border-bottom:1px solid #ebebeb;border-radius:5px 5px 0 0}.qtip-bootstrap .qtip-titlebar .qtip-close{right:11px;top:45%;border-style:none}.qtip-bootstrap .qtip-content{padding:9px 14px}.qtip-bootstrap .qtip-icon{background:0 0}.qtip-bootstrap .qtip-icon .ui-icon{width:auto;height:auto;float:right;font-size:20px;font-weight:700;line-height:18px;color:#000;text-shadow:0 1px 0 #fff;opacity:.2;filter:alpha(opacity=20)}.qtip-bootstrap .qtip-icon .ui-icon:hover{color:#000;text-decoration:none;cursor:pointer;opacity:.4;filter:alpha(opacity=40)}.qtip:not(.ie9haxors) div.qtip-content,.qtip:not(.ie9haxors) div.qtip-titlebar{-webkit-filter:none;filter:none;-ms-filter:none}.qtip .qtip-tip{margin:0 auto;overflow:hidden;z-index:10}.qtip .qtip-tip,x:-o-prefocus{visibility:hidden}.qtip .qtip-tip,.qtip .qtip-tip .qtip-vml,.qtip .qtip-tip canvas{position:absolute;color:#123456;background:0 0;border:0 dashed transparent}.qtip .qtip-tip canvas{top:0;left:0}.qtip .qtip-tip .qtip-vml{behavior:url(#default#VML);display:inline-block;visibility:visible}#qtip-overlay{position:fixed;left:0;top:0;width:100%;height:100%}#qtip-overlay.blurs{cursor:pointer}#qtip-overlay div{position:absolute;left:0;top:0;width:100%;height:100%;background-color:#000;opacity:.7;filter:alpha(opacity=70);-ms-filter:"alpha(Opacity=70)"}.qtipmodal-ie6fix{position:absolute!important}.qtip{background-color:#222;border-radius:3px;font-size:12px;line-height:1.5;font-family:"helvetica neue",arial,helvetica,freesans,"liberation sans","numbus sans l",sans-serif;max-width:200px;font-weight:400}.qtip>.qtip-content{padding:4px 8px 5px}.qtip.qtip-popover{background-color:#fff;border-color:#ddd;font-size:14px;line-height:21px;max-width:none;font-weight:400}.qtip.qtip-popover ul{list-style:disc}.qtip.qtip-popover li{margin-left:15px}.qtip.qtip-popover li,.qtip.qtip-popover p{margin-bottom:7px}.qtip.qtip-popover>.qtip-content{padding:10px}.dcl50.fte97.list_item>.container{padding:9px 12px}.dcl50.fte97.list_item>.container>.photo{vertical-align:middle}.dcl50.fte97.list_item>.container>.text>.main{color:#444;font-size:13px;line-height:17px}.dcl50.fte97.list_item>.container>.text>.detail{color:#777;font-size:10px;line-height:1}.dcl50.fte97.list_item>.container>.text .matched_substring,.dcl50.fte97.list_item>.container>.text strong{font-weight:700;color:#000}.dcl50.fte97.add_item{font-size:12px;padding:12px 12px 12px 9px;color:#444;text-shadow:0 1px 0 #fff}.dcl50.fte97.add_item .matched_substring{font-weight:700;color:#000}.dcl50.fte97.container{font-family:"helvetica neue",arial,helvetica,freesans,"liberation sans","numbus sans l",sans-serif;border-radius:3px;-webkit-box-shadow:rgba(0,0,0,.05) 0 1px 3px 0;box-shadow:rgba(0,0,0,.05) 0 1px 3px 0;max-width:260px;border:1px solid #eee;padding:0;overflow:hidden}.dcl50.fte97.container>.ui-menu-item{cursor:pointer;display:block;padding:0}.dcl50.fte97.container>.ui-menu-item>a:hover{text-decoration:none}.dcl50.fte97.container>.ui-menu-item.ui-state-focus{background-image:-webkit-gradient(linear,left top,left bottom,from(#f8f8f9),to(#e9eaec));background-image:-webkit-linear-gradient(#f8f8f9,#e9eaec);background-image:linear-gradient(#f8f8f9,#e9eaec);text-shadow:#fff 0 1px 0;color:#000;border:0;margin:0}.dcl50.fte97.container>.ui-menu-item.ui-state-focus:active{background-image:-webkit-gradient(linear,left top,left bottom,from(#f8f8f9),to(#e9eaec));background-image:-webkit-linear-gradient(#f8f8f9,#e9eaec);background-image:linear-gradient(#f8f8f9,#e9eaec);text-shadow:#fff 0 -1px 0;color:#000;border:0;margin:0}.atwho-view{position:absolute;top:0;left:0;display:none;margin-top:18px;background:#fff;border:1px solid #DDD;border-radius:3px;-webkit-box-shadow:0 0 5px rgba(0,0,0,.1);box-shadow:0 0 5px rgba(0,0,0,.1);min-width:120px;z-index:11110!important}.atwho-view .cur{background:#36F;color:#fff}.atwho-view .cur small{color:#fff}.atwho-view strong{color:#36F}.atwho-view .cur strong{color:#fff;font:700}.atwho-view ul{list-style:none;padding:0;margin:auto}.atwho-view ul li{display:block;padding:5px 10px;border-bottom:1px solid #DDD;cursor:pointer}.atwho-view small{font-size:smaller;color:#777;font-weight:400}#at-view-mentions.atwho-view{font-family:"helvetica neue",arial,helvetica,freesans,"liberation sans","numbus sans l",sans-serif;border-radius:3px;-webkit-box-shadow:rgba(0,0,0,.05) 0 1px 3px 0;box-shadow:rgba(0,0,0,.05) 0 1px 3px 0;max-width:260px;border:1px solid #eee;padding:0;overflow:hidden}#at-view-mentions.atwho-view ul{padding:0}#at-view-mentions.atwho-view ul li{padding:0;border:0}#at-view-mentions.atwho-view ul li.cur{background-image:-webkit-gradient(linear,left top,left bottom,from(#f8f8f9),to(#e9eaec));background-image:-webkit-linear-gradient(#f8f8f9,#e9eaec);background-image:linear-gradient(#f8f8f9,#e9eaec);text-shadow:#fff 0 1px 0;color:#000;border:0;margin:0}#at-view-mentions.atwho-view ul li.cur:active{background-image:-webkit-gradient(linear,left top,left bottom,from(#f8f8f9),to(#e9eaec));background-image:-webkit-linear-gradient(#f8f8f9,#e9eaec);background-image:linear-gradient(#f8f8f9,#e9eaec);text-shadow:#fff 0 -1px 0;color:#000;border:0;margin:0}.dcl50.fms77.autocomplete_mention{border-radius:2px;background:#e0edf5;border:1px solid #d1e4f0;margin:-1px}.dcl50.fms77.autocomplete_mention::after,.dcl50.fms77.autocomplete_mention::before{content:attr(data-marker)}.dcl50.fms77.highlighter{background-color:#fff;position:absolute;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;color:transparent;z-index:-1;border:1px solid transparent;white-space:pre-wrap;word-wrap:break-word}.dcl50.fms77.highlighter:empty::before{content:" ";display:block}.dcl50.fms77.highlighter::after{content:"\\a";display:block}.dcl50.ffm36.character_counter_template{color:#999}.dcl50.ffm36.character_counter_template.above_max{font-weight:700;color:#C0423F}.mfp-bg{top:0;left:0;width:100%;height:100%;z-index:1042;overflow:hidden;position:fixed;background:#0b0b0b;opacity:.8;filter:alpha(opacity=80)}.mfp-wrap{top:0;left:0;width:100%;height:100%;z-index:1043;position:fixed;outline:0!important;-webkit-backface-visibility:hidden}.mfp-container{text-align:center;position:absolute;width:100%;height:100%;left:0;top:0;padding:0 8px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.mfp-container:before{content:\'\';display:inline-block;height:100%;vertical-align:middle}.mfp-align-top .mfp-container:before{display:none}.mfp-content{position:relative;display:inline-block;vertical-align:middle;margin:0 auto;text-align:left;z-index:1045}.mfp-ajax-holder .mfp-content,.mfp-inline-holder .mfp-content{width:100%;cursor:auto}.mfp-ajax-cur{cursor:progress}.mfp-zoom-out-cur,.mfp-zoom-out-cur .mfp-image-holder .mfp-close{cursor:-webkit-zoom-out;cursor:zoom-out}.mfp-zoom{cursor:pointer;cursor:-webkit-zoom-in;cursor:zoom-in}.mfp-auto-cursor .mfp-content{cursor:auto}.mfp-arrow,.mfp-close,.mfp-counter,.mfp-preloader{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mfp-loading.mfp-figure{display:none}.mfp-hide{display:none!important}.mfp-preloader{color:#ccc;position:absolute;top:50%;width:auto;text-align:center;margin-top:-.8em;left:8px;right:8px;z-index:1044}.mfp-preloader a{color:#ccc}.mfp-preloader a:hover{color:#fff}.mfp-s-error .mfp-content,.mfp-s-ready .mfp-preloader{display:none}button.mfp-arrow,button.mfp-close{overflow:visible;cursor:pointer;background:0 0;border:0;-webkit-appearance:none;display:block;outline:0;padding:0;z-index:1046;-webkit-box-shadow:none;box-shadow:none}button::-moz-focus-inner{padding:0;border:0}.mfp-close{width:44px;height:44px;line-height:44px;position:absolute;right:0;top:0;text-decoration:none;text-align:center;opacity:.65;filter:alpha(opacity=65);padding:0 0 18px 10px;color:#fff;font-style:normal;font-size:28px;font-family:Arial,Baskerville,monospace}.mfp-close:focus,.mfp-close:hover{opacity:1;filter:alpha(opacity=100)}.mfp-close:active{top:1px}.mfp-close-btn-in .mfp-close{color:#333}.mfp-iframe-holder .mfp-close,.mfp-image-holder .mfp-close{color:#fff;right:-6px;text-align:right;padding-right:6px;width:100%}.mfp-counter{position:absolute;top:0;right:0;color:#ccc;font-size:12px;line-height:18px;white-space:nowrap}.mfp-arrow{position:absolute;opacity:.65;filter:alpha(opacity=65);margin:-55px 0 0;top:50%;padding:0;width:90px;height:110px;-webkit-tap-highlight-color:transparent}.mfp-arrow:active{margin-top:-54px}.mfp-arrow:focus,.mfp-arrow:hover{opacity:1;filter:alpha(opacity=100)}.mfp-arrow .mfp-a,.mfp-arrow .mfp-b,.mfp-arrow:after,.mfp-arrow:before{content:\'\';display:block;width:0;height:0;position:absolute;left:0;top:0;margin-top:35px;margin-left:35px;border:inset transparent}.mfp-arrow .mfp-a,.mfp-arrow:after{border-top-width:13px;border-bottom-width:13px;top:8px}.mfp-arrow .mfp-b,.mfp-arrow:before{border-top-width:21px;border-bottom-width:21px;opacity:.7}.mfp-arrow-left{left:0}.mfp-arrow-left .mfp-a,.mfp-arrow-left:after{border-right:17px solid #fff;margin-left:31px}.mfp-arrow-left .mfp-b,.mfp-arrow-left:before{margin-left:25px;border-right:27px solid #3f3f3f}.mfp-arrow-right{right:0}.mfp-arrow-right .mfp-a,.mfp-arrow-right:after{border-left:17px solid #fff;margin-left:39px}.mfp-arrow-right .mfp-b,.mfp-arrow-right:before{border-left:27px solid #3f3f3f}.mfp-iframe-holder{padding-top:40px;padding-bottom:40px}.mfp-iframe-holder .mfp-content{line-height:0;width:100%;max-width:900px}.mfp-iframe-holder .mfp-close{top:-40px}.mfp-iframe-scaler{width:100%;height:0;overflow:hidden;padding-top:56.25%}.mfp-iframe-scaler iframe{position:absolute;display:block;top:0;left:0;width:100%;height:100%;-webkit-box-shadow:0 0 8px rgba(0,0,0,.6);box-shadow:0 0 8px rgba(0,0,0,.6);background:#000}img.mfp-img{width:auto;max-width:100%;height:auto;display:block;line-height:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:40px 0;margin:0 auto}.mfp-figure{line-height:0}.mfp-figure:after{content:\'\';position:absolute;left:0;top:40px;bottom:40px;display:block;right:0;width:auto;height:auto;z-index:-1;-webkit-box-shadow:0 0 8px rgba(0,0,0,.6);box-shadow:0 0 8px rgba(0,0,0,.6);background:#444}.mfp-figure small{color:#bdbdbd;display:block;font-size:12px;line-height:14px}.mfp-figure figure{margin:0}.mfp-bottom-bar{margin-top:-36px;position:absolute;top:100%;left:0;width:100%;cursor:auto}.mfp-title{text-align:left;line-height:18px;color:#f3f3f3;word-wrap:break-word;padding-right:36px}.mfp-image-holder .mfp-content{max-width:100%}.mfp-gallery .mfp-image-holder .mfp-figure{cursor:pointer}@media screen and (max-width:800px) and (orientation:landscape),screen and (max-height:300px){.mfp-img-mobile .mfp-image-holder{padding-left:0;padding-right:0}.mfp-img-mobile img.mfp-img{padding:0}.mfp-img-mobile .mfp-figure:after{top:0;bottom:0}.mfp-img-mobile .mfp-figure small{display:inline;margin-left:5px}.mfp-img-mobile .mfp-bottom-bar{background:rgba(0,0,0,.6);bottom:0;margin:0;top:auto;padding:3px 5px;position:fixed;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.mfp-img-mobile .mfp-bottom-bar:empty{padding:0}.mfp-img-mobile .mfp-counter{right:5px;top:3px}.mfp-img-mobile .mfp-close{top:0;right:0;width:35px;height:35px;line-height:35px;background:rgba(0,0,0,.6);position:fixed;text-align:center;padding:0}}@media all and (max-width:900px){.mfp-arrow{-webkit-transform:scale(0.75);-ms-transform:scale(0.75);transform:scale(0.75)}.mfp-arrow-left{-webkit-transform-origin:0;-ms-transform-origin:0;transform-origin:0}.mfp-arrow-right{-webkit-transform-origin:100%;-ms-transform-origin:100%;transform-origin:100%}.mfp-container{padding-left:6px;padding-right:6px}}.mfp-ie7 .mfp-img{padding:0}.mfp-ie7 .mfp-bottom-bar{width:600px;left:50%;margin-left:-300px;margin-top:5px;padding-bottom:5px}.mfp-ie7 .mfp-container{padding:0}.mfp-ie7 .mfp-content{padding-top:44px}.mfp-ie7 .mfp-close{top:0;right:0;padding-top:0}.mfp-ajax-cur{cursor:default}.theme-standard.mfp-bg{opacity:.5}.theme-standard.mfp-wrap .mfp-content{background:#fff;width:auto;border-radius:2px;-webkit-box-shadow:0 0 10px 4px rgba(0,0,0,.3);box-shadow:0 0 10px 4px rgba(0,0,0,.3)}.theme-standard.mfp-wrap .lightbox-title{background:#414243;background:-webkit-gradient(linear,left top,left bottom,from(#414243),to(#303132));background:-webkit-linear-gradient(#414243,#303132);background:linear-gradient(#414243,#303132);border-top-left-radius:2px;border-top-right-radius:2px;padding:12px;color:#fff;font-size:18px}.theme-standard.mfp-wrap .lightbox-title~button.mfp-close{color:#fff}.theme-standard.mfp-wrap .lightbox-content{padding:12px}.dcl50.fas96.container{margin-left:-2px;margin-top:-2px}.dcl50.fas96.association{display:inline-block;vertical-align:middle;border-radius:3px;margin-left:2px;margin-top:2px;padding:4px 8px;background-color:#e0edf5;font-size:12px;-webkit-transition:background-color .2s;transition:background-color .2s}.dcl50.fas96.association:hover{background-color:#E8F1F7}.dcl50.fas96.association.associations_contrast{background-color:#fff}.dcl50.fas96.association.associations_contrast:hover{background-color:#f9fafa}.dcl50.fas96.association .destroy{cursor:pointer}.dcl50.fas96.association .destroy:hover{text-shadow:-1px 0 #AAA,0 1px #AAA,1px 0 #AAA,0 -1px #AAA}.dcl50.fpn66.pagination_line{text-align:center}.dcl50.fpn66.pagination_line .element{padding:6px;cursor:pointer;border-radius:3px;border:1px solid transparent}.dcl50.fpn66.pagination_line .element:hover{border:1px solid #E7E9EB}.dcl50.fpn66.pagination_line .element.current{background:#fff;border:1px solid #E7E9EB}.dcl50.fpg85.processing_list>.processing_list_footer.loading{text-indent:-119988px;overflow:hidden;text-align:left;text-transform:capitalize;position:relative}.dcl50.fpg85.processing_list>.processing_list_footer.loading::before{content:"\\e84c";-webkit-animation:fontello-spin 1s infinite linear;animation:fontello-spin 1s infinite linear;position:absolute;left:0;right:0;top:50%;line-height:1em;height:1em;margin-top:-.5em;text-indent:0;text-align:center;font-family:fontello}');
